/*! For license information please see main.067f6924.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},998:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):i===t}))}return!0}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,k);g[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,k);g[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,k);g[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,E=60106,x=60107,S=60108,T=60114,I=60109,C=60110,A=60112,D=60113,N=60120,R=60115,O=60116,P=60121,L=60128,F=60129,M=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;_=j("react.element"),E=j("react.portal"),x=j("react.fragment"),S=j("react.strict_mode"),T=j("react.profiler"),I=j("react.provider"),C=j("react.context"),A=j("react.forward_ref"),D=j("react.suspense"),N=j("react.suspense_list"),R=j("react.memo"),O=j("react.lazy"),P=j("react.block"),j("react.scope"),L=j("react.opaque.id"),F=j("react.debug_trace_mode"),M=j("react.offscreen"),U=j("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function H(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return G(e.type);case P:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,ge=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ce=null,Ae=null;function De(e){if(e=ri(e)){if("function"!==typeof Ie)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Ie(e.stateNode,e.type,t))}}function Ne(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Re(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}function Oe(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Fe=Oe,Me=!1,Ue=!1;function je(){null===Ce&&null===Ae||(Le(),Re())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,He=null,We=!1,Ge=null,Qe={onError:function(e){Ke=!0,He=e}};function Ye(e,t,n,r,i,a,o,u,s){Ke=!1,He=null,ze.apply(Qe,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Xe(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ni(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){mt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&mt(ut)&&(ut=null),null!==st&&mt(st)&&(st=null),null!==ct&&mt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function _t(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&wt(ut,e),null!==st&&wt(st,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xt={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},St={},Tt={};function It(e){if(St[e])return St[e];if(!xt[e])return e;var t,n=xt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return St[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);var Ct=It("animationend"),At=It("animationiteration"),Dt=It("animationstart"),Nt=It("transitionend"),Rt=new Map,Ot=new Map,Pt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Dt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Rt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Ft=8;function Mt(e){if(0!==(1&e))return Ft=15,1;if(0!==(2&e))return Ft=14,2;if(0!==(4&e))return Ft=13,4;var t=24&e;return 0!==t?(Ft=12,t):0!==(32&e)?(Ft=11,32):0!==(t=192&e)?(Ft=10,t):0!==(256&e)?(Ft=9,256):0!==(t=3584&e)?(Ft=8,t):0!==(4096&e)?(Ft=7,4096):0!==(t=4186112&e)?(Ft=6,t):0!==(t=62914560&e)?(Ft=5,t):67108864&e?(Ft=4,67108864):0!==(134217728&e)?(Ft=3,134217728):0!==(t=805306368&e)?(Ft=2,t):0!==(1073741824&e)?(Ft=1,1073741824):(Ft=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Ft=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Ft=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Mt(s),i=Ft):0!==(u&=a)&&(r=Mt(u),i=Ft)}else 0!==(a=n&~o)?(r=Mt(a),i=Ft):0!==u&&(r=Mt(u),i=Ft);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Ft)return t;Ft=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Vt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Vt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Wt|0)|0},Ht=Math.log,Wt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function Xt(e,t,n,r){Me||Le();var i=Jt,a=Me;Me=!0;try{Pe(i,e,t,n,r)}finally{(Me=a)||je()}}function $t(e,t,n,r){Qt(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Xe(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=$e(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=sn(yn),mn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),bn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(wn),En=sn(i({},hn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return In}var An=i({},pn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=sn(An),Nn=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Pn),Fn=[9,13,27,32],Mn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var jn=f&&"TextEvent"in window&&!Un,Vn=f&&(!Mn||Un&&8<Un&&11>=Un),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Qn(e,t,n,r){Ne(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function $n(e){Ar(e,0)}function Jn(e){if($(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Xn=Yn=null)}function ar(e){if("value"===e.propertyName&&Jn(Xn)){var t=[];if(Qn(t,Xn,e,Te(e)),e=$n,Me)e(t);else{Me=!0;try{Oe(e,t)}finally{Me=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Xn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Xn)}function sr(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,_r=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Mr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Pt,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<xr.length;Sr++)Ot.set(xr[Sr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=He;Ke=!1,He=null,We||(We=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(We)throw e=Ge,We=!1,Ge=null,e}function Dr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Nr]||(e[Nr]=!0,u.forEach((function(t){Ir.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Ir.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Pr(a,e,i,t),o.add(u))}function Pr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Xt;break;case 1:i=$t;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Fe(e,t,n)}finally{Ue=!1,je()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Rt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Dn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Rn;break;case Ct:case At:case Dt:s=bn;break;case Nt:s=On;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Nn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Fr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Xe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=gn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Gn(u))if(er)y=cr;else{y=ur;var g=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(g&&g(e,u,r),"focusout"===e&&(g=u._wrapperState)&&g.controlled&&"number"===u.type&&ie(u,"number",u.value)),g=r?ii(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(kr=g,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Er(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Er(o,n,i)}var m;if(Mn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(m=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(g=Mr(r,k)).length&&(k=new En(k,e,null,n,i),o.push({event:k,listeners:g}),m?k.data=m:null!==(m=Kn(n))&&(k.data=m))),(m=jn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Mn&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=m))}Ar(o,t)}))}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Fr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Fr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Fr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Fr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var $r=Math.random().toString(36).slice(2),Jr="__reactFiber$"+$r,Zr="__reactProps$"+$r,ei="__reactContainer$"+$r,ti="__reactEvents$"+$r;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Jr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var Ei=null,xi=null,Si=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Ii=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Di=a.unstable_now,Ni=a.unstable_getCurrentPriorityLevel,Ri=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Pi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Fi=a.unstable_IdlePriority,Mi={},Ui=void 0!==Ai?Ai:function(){},ji=null,Vi=null,Bi=!1,qi=Di(),zi=1e4>qi?Di:function(){return Di()-qi};function Ki(){switch(Ni()){case Ri:return 99;case Oi:return 98;case Pi:return 97;case Li:return 96;case Fi:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Ri;case 98:return Oi;case 97:return Pi;case 96:return Li;case 95:return Fi;default:throw Error(o(332))}}function Wi(e,t){return e=Hi(e),Si(e,t)}function Gi(e,t,n){return e=Hi(e),Ti(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Ii(e)}Yi()}function Yi(){if(!Bi&&null!==ji){Bi=!0;var e=0;try{var t=ji;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ti(Ri,Qi),n}finally{Bi=!1}}}var Xi=w.ReactCurrentBatchConfig;function $i(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ga={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ma(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=gi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=gi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ga.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function Ea(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Sa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ea(e,t,n),r.return=e,r):((r=Gs(n.type,n.key,n.props,null,e.mode,r)).ref=Ea(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$s(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Gs(t.type,t.key,t.props,null,e.mode,n)).ref=Ea(e,null,t),n.return=e,n;case E:return(t=$s(t,e.mode,n)).return=e,t}if(_a(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===x?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null}if(_a(n)||q(n))return null!==i?null:f(e,t,n,r,null);xa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===x?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);xa(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var g=d(i,f,u[v],s);if(null===g){null===f&&(f=y);break}e&&f&&null===g.alternate&&t(i,f),o=a(g,o,v),null===l?c=g:l.sibling=g,l=g,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,g=null,m=s.next();null!==v&&!m.done;y++,m=s.next()){v.index>y?(g=v,v=null):g=v.sibling;var k=d(i,v,m.value,c);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=g}if(m.done)return n(i,v),l;if(null===v){for(;!m.done;y++,m=s.next())null!==(m=h(i,m.value,c))&&(u=a(m,u,y),null===f?l=m:f.sibling=m,f=m);return l}for(v=r(i,v);!m.done;y++,m=s.next())null!==(m=p(v,i,y,m.value,c))&&(e&&null!==m.alternate&&v.delete(null===m.key?y:m.key),u=a(m,u,y),null===f?l=m:f.sibling=m,f=m);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===x&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===x){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ea(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===x?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Gs(a.type,a.key,a.props,null,e.mode,s)).ref=Ea(e,r,a),s.return=e,e=s)}return u(e);case E:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$s(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Xs(a,e.mode,s)).return=e,e=r),u(e);if(_a(a))return v(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&xa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Sa(!0),Ia=Sa(!1),Ca={},Aa=ci(Ca),Da=ci(Ca),Na=ci(Ca);function Ra(e){if(e===Ca)throw Error(o(174));return e}function Oa(e,t){switch(fi(Na,t),fi(Da,e),fi(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Aa),fi(Aa,t)}function Pa(){li(Aa),li(Da),li(Na)}function La(e){Ra(Na.current);var t=Ra(Aa.current),n=pe(t,e.type);t!==n&&(fi(Da,e),fi(Aa,n))}function Fa(e){Da.current===e&&(li(Aa),li(Da))}var Ma=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Va=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(ja=e);qa(ja,n)}ja=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,ja=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Wa(e){if(e!==ja)return!1;if(!Ba)return Ha(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Va;t;)qa(e,t),t=Qr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=ja?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=ja=null,Ba=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Xa=w.ReactCurrentDispatcher,$a=w.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xa.current=null===e||null===e.memoizedState?Oo:Po,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Xa.current=Lo,e=n(r,i)}while(ro)}if(Xa.current=Ro,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ou;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Xa.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=No.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=No.bind(null,Za,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mo(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function bo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void go(t,n,a,r)}Za.flags|=e,i.memoizedState=go(1|t,n,a,r)}function _o(e,t){return bo(516,4,e,t)}function Eo(e,t){return wo(516,4,e,t)}function xo(e,t){return wo(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,So.bind(null,t,e),n)}function Io(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Do(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=$a.transition;$a.transition=1;try{e(!1),t()}finally{$a.transition=n}}))}function No(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Ro={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,Za,e),[r.memoizedState,e]},useRef:mo,useState:yo,useDebugValue:Io,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return _o((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return mo(e=Do.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,go(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:To,useLayoutEffect:xo,useMemo:Ao,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:Io,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Eo((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:To,useLayoutEffect:xo,useMemo:Ao,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:Io,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return Eo((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Fo=w.ReactCurrentOwner,Mo=!1;function Uo(e,t,n,r){t.child=null===e?Ia(t,null,n,r):Ta(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ws(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Mo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_s(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_s(t,e),null;t.memoizedState={baseLanes:0},_s(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_s(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=gi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Ho(e,t,n,r,i){if(gi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=gi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ba(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ma(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:$i(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=gi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ba(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ma(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),au(e,t,a);r=t.stateNode,Fo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Uo(e,t,u,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Qo,Yo,Xo,$o={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Ma.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Ma,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=$o,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ws(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ws(o,u),null!==e?r=Ws(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&mi(),null;case 3:return Pa(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Fa(t);var a=Ra(Na.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ra(Aa.current),Wa(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Jr]=t,r[Zr]=u,n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Dr(Tr[e],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":ee(r,u),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Dr("invalid",r);break;case"textarea":se(r,u),Dr("invalid",r)}for(var c in xe(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Dr("scroll",r));switch(n){case"input":X(r),re(r,u,!0);break;case"textarea":X(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Se(n,r),n){case"dialog":Dr("cancel",e),Dr("close",e),a=r;break;case"iframe":case"object":case"embed":Dr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Dr(Tr[a],e);a=r;break;case"source":Dr("error",e),a=r;break;case"img":case"image":case"link":Dr("error",e),Dr("load",e),a=r;break;case"details":Dr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Dr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Dr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Dr("invalid",e);break;default:a=r}xe(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?_e(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ge(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&me(e,f):"number"===typeof f&&me(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Dr("scroll",e):null!=f&&b(e,u,f,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ra(Na.current),Ra(Aa.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Ma),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Ou||0===(134217727&Bu)&&0===(134217727&qu)||ms(Ou,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Pa(),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Ma),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Wu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Ua(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Ma.current,fi(Ma,u?1&t|2:1&t),n):null;case 23:case 24:return Es(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:gi(e.type)&&mi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Pa(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Fa(e),null;case 13:return li(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ma),null;case 4:return Pa(),null;case 10:return ra(e),null;case 23:case 24:return Es(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ra(Aa.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in xe(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Dr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xu||(Xu=!0,$u=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ju?Ju=new Set([this]):Ju.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$i(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function gu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Ms(n,e),Fs(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:$i(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function mu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(xi&&"function"===typeof xi.onCommitFiberUnmount)try{xi.onCommitFiberUnmount(Ei,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Ms(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Su(e,t)}}function bu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function wu(e){return 5===e.tag||3===e.tag||4===e.tag}function _u(e){e:{for(var t=e.return;null!==t;){if(wu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(me(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Eu(e,n,t):xu(e,n,t)}function Eu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(Eu(e,t,n),e=e.sibling;null!==e;)Eu(e,t,n),e=e.sibling}function xu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(xu(e,t,n),e=e.sibling;null!==e;)xu(e,t,n),e=e.sibling}function Su(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,i),t=Se(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?_e(n,s):"dangerouslySetInnerHTML"===u?ge(n,s):"children"===u?me(n,s):b(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hu=zi(),mu(t.child,!0)),void Iu(t);case 19:return void Iu(t);case 23:case 24:return void mu(t,null!==t.memoizedState)}throw Error(o(163))}function Iu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Du=w.ReactCurrentDispatcher,Nu=w.ReactCurrentOwner,Ru=0,Ou=null,Pu=null,Lu=0,Fu=0,Mu=ci(0),Uu=0,ju=null,Vu=0,Bu=0,qu=0,zu=0,Ku=null,Hu=0,Wu=1/0;function Gu(){Wu=zi()+500}var Qu,Yu=null,Xu=!1,$u=null,Ju=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Ru)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=Vu),0!==Xi.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ru)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ou&&(qu|=t,4===Uu&&ms(e,Lu));var r=Ki();1===t?0!==(8&Ru)&&0===(48&Ru)?ks(e):(ys(e,n),0===Ru&&(Gu(),Qi())):(0===(4&Ru)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Mt(c);var f=Ft;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ut(e,e===Ou?Lu:0),t=Ft,0===r)null!==n&&(n!==Mi&&Ii(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ii(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Vi=Ti(Ri,Yi)):ji.push(n),n=Mi):14===t?n=Gi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,gs.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gs(e){if(us=-1,cs=ss=0,0!==(48&Ru))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ut(e,e===Ou?Lu:0);if(0===n)return null;var r=n,i=Ru;Ru|=16;var a=Ts();for(Ou===e&&Lu===r||(Gu(),xs(e,r));;)try{As();break}catch(s){Ss(e,s)}if(na(),Du.current=a,Ru=i,null!==Pu?r=0:(Ou=null,Lu=0,r=Uu),0!==(Vu&qu))xs(e,0);else if(0!==r){if(2===r&&(Ru|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Is(e,n))),1===r)throw t=ju,xs(e,0),ms(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Rs(e);break;case 3:if(ms(e,n),(62914560&n)===n&&10<(r=Hu+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Rs.bind(null,e),r);break}Rs(e);break;case 4:if(ms(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=Hr(Rs.bind(null,e),n);break}Rs(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?gs.bind(null,e):null}function ms(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ru))throw Error(o(327));if(Ls(),e===Ou&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Is(e,t);0!==(Vu&qu)&&(n=Is(e,t=Ut(e,t)))}else n=Is(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Ru|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Is(e,t))),1===n)throw n=ju,xs(e,0),ms(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rs(e),ys(e,zi()),null}function bs(e,t){var n=Ru;Ru|=1;try{return e(t)}finally{0===(Ru=n)&&(Gu(),Qi())}}function ws(e,t){var n=Ru;Ru&=-2,Ru|=8;try{return e(t)}finally{0===(Ru=n)&&(Gu(),Qi())}}function _s(e,t){fi(Mu,Fu),Fu|=t,Vu|=t}function Es(){Fu=Mu.current,li(Mu)}function xs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mi();break;case 3:Pa(),li(pi),li(di),Ya();break;case 5:Fa(r);break;case 4:Pa();break;case 13:case 19:li(Ma);break;case 10:ra(r);break;case 23:case 24:Es()}n=n.return}Ou=e,Pu=Ws(e.current,null),Lu=Fu=Vu=t,Uu=0,ju=null,zu=qu=Bu=0}function Ss(e,t){for(;;){var n=Pu;try{if(na(),Xa.current=Ro,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,Nu.current=null,null===n||null===n.return){Uu=1,ju=t,Pu=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ma.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var g=new Set;g.add(c),h.updateQueue=g}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var m=la(-1,1);m.tag=2,fa(u,m)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var b=Bs.bind(null,a,c,u);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var w=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Ju||!Ju.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Ns(n)}catch(E){t=E,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function Ts(){var e=Du.current;return Du.current=Ro,null===e?Ro:e}function Is(e,t){var n=Ru;Ru|=16;var r=Ts();for(Ou===e&&Lu===t||xs(e,t);;)try{Cs();break}catch(i){Ss(e,i)}if(na(),Ru=n,Du.current=r,null!==Pu)throw Error(o(261));return Ou=null,Lu=0,Uu}function Cs(){for(;null!==Pu;)Ds(Pu)}function As(){for(;null!==Pu&&!Ci();)Ds(Pu)}function Ds(e){var t=Qu(e.alternate,e,Fu);e.memoizedProps=e.pendingProps,null===t?Ns(e):Pu=t,Nu.current=null}function Ns(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Fu)))return void(Pu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Fu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Pu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Uu&&(Uu=5)}function Rs(e){var t=Ki();return Wi(99,Os.bind(null,e,t)),null}function Os(e,t){do{Ls()}while(null!==es);if(0!==(48&Ru))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ou&&(Pu=Ou=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ru,Ru|=32,Nu.current=null,Br=Yt,gr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,g=null;t:for(;;){for(var m;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(m=y.firstChild);)g=y,y=m;for(;;){if(y===u)break t;if(g===s&&++p===a&&(h=f),g===c&&++v===l&&(d=f),null!==(m=y.nextSibling))break;g=(y=g).parentNode}y=m}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Ps()}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&me(Yu.stateNode,""),128&k){var b=Yu.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:_u(Yu),Yu.flags&=-3;break;case 6:_u(Yu),Yu.flags&=-3,Tu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Tu(Yu.alternate,Yu);break;case 4:Tu(Yu.alternate,Yu);break;case 8:Su(u,s=Yu);var _=s.alternate;bu(s),null!==_&&bu(_)}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);if(w=qr,b=yr(),k=w.focusedElem,u=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&gr(k)&&(b=u.start,void 0===(w=u.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),s=k.textContent.length,_=Math.min(u.start,s),u=void 0===u.end?_:Math.min(u.end,s),!w.extend&&_>u&&(s=u,u=_,_=s),s=pr(k,_),a=pr(k,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),_>u?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!Br,qr=Br=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var E=Yu.flags;if(36&E&&gu(k,Yu.alternate,Yu),128&E){b=void 0;var x=Yu.ref;if(null!==x){var S=Yu.stateNode;Yu.tag,b=S,"function"===typeof x?x(b):x.current=b}}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Ui(),Ru=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((E=Yu).sibling=null,E.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&(Ju=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,xi&&"function"===typeof xi.onCommitFiberRoot)try{xi.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(T){}if(ys(e,zi()),Xu)throw Xu=!1,e=$u,$u=null,e;return 0!==(8&Ru)||Qi(),null}function Ps(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&yu(e,Yu),0===(512&t)||Zu||(Zu=!0,Gi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Wi(e,Us)}return!1}function Fs(e,t){ns.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Ms(e,t){rs.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ru))throw Error(o(331));var t=Ru;Ru|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ru=t,Qi(),!0}function js(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function Vs(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ou===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>zi()-Hu?xs(e,0):zu|=n),ys(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=Vu),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Hs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Hs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Qs(n.children,i,a,t);case F:u=8,i|=16;break;case S:u=8,i|=1;break;case T:return(e=Ks(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case D:return(e=Ks(13,n,t,i)).type=D,e.elementType=D,e.lanes=a,e;case N:return(e=Ks(19,n,t,i)).elementType=N,e.lanes=a,e;case M:return Ys(n,i,a,t);case U:return(e=Ks(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case C:u=9;break e;case A:u=11;break e;case R:u=14;break e;case O:u=16,r=null;break e;case P:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=M,e.lanes=n,e}function Xs(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function $s(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Js(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(gi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(gi(c)){n=bi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Js(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ws((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:gi(t.type)&&wi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fi(Ma,1&Ma.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Ma,1&Ma.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ga,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===R)return 14}return 2}(i),e=$i(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,$i(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ia(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Jo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Ji,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=$i(i=t.type,t.pendingProps),Vo(e,t,i,a=$i(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:$i(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Ie=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));$(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bs,Pe=function(e,t,n,r,i){var a=Ru;Ru|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ru=a)&&(Gu(),Qi())}},Le=function(){0===(49&Ru)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Ls())},Fe=function(e,t){var n=Ru;Ru|=2;try{return e(t)}finally{0===(Ru=n)&&(Gu(),Qi())}};var sc={Events:[ri,ii,ai,Ne,Re,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Ei=fc.inject(lc),xi=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ru;if(0!==(48&n))return e(t);Ru|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ru=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(ws((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bs,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=m.prototype=new g;k.constructor=m,r(k,y.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:b.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),I(o,t,n,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=I(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=I(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var D={current:null};function N(){var e=D.current;if(null===e)throw Error(d(321));return e}var R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=m,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return N().useCallback(e,t)},t.useContext=function(e,t){return N().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return N().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return N().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return N().useLayoutEffect(e,t)},t.useMemo=function(e,t){return N().useMemo(e,t)},t.useReducer=function(e,t,n){return N().useReducer(e,t,n)},t.useRef=function(e){return N().useRef(e)},t.useState=function(e){return N().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function g(){}function m(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(A([])));w&&w!==n&&r.call(w,a)&&(k=w);var _=m.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return g.prototype=m,s(_,"constructor",m),s(m,"constructor",g),g.displayName=s(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},E(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,g=-1,m=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):m=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+m;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){g=h((function(){e(t.unstable_now())}),n)},i=function(){d(g),g=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function x(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>S(o,n))void 0!==s&&0>S(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>S(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],I=[],C=1,A=null,D=3,N=!1,R=!1,O=!1;function P(e){for(var t=E(I);null!==t;){if(null===t.callback)x(I);else{if(!(t.startTime<=e))break;x(I),t.sortIndex=t.expirationTime,_(T,t)}t=E(I)}}function L(e){if(O=!1,P(e),!R)if(null!==E(T))R=!0,n(F);else{var t=E(I);null!==t&&r(L,t.startTime-e)}}function F(e,n){R=!1,O&&(O=!1,i()),N=!0;var a=D;try{for(P(n),A=E(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,D=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===E(T)&&x(T),P(n)}else x(T);A=E(T)}if(null!==A)var s=!0;else{var c=E(I);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,D=a,N=!1}}var M=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||N||(R=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=M,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,_(I,e),null===E(T)&&e===E(I)&&(O?i():O=!0,r(L,o-u))):(e.sortIndex=s,_(T,e),R||N||(R=!0,n(F))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},849:function(e,t,n){"use strict";e.exports=n.p+"static/media/checked.d5cff772da51e04966f0.png"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/image_uploader-app/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ye},SDK_VERSION:function(){return Vt},_DEFAULT_ENTRY_NAME:function(){return St},_addComponent:function(){return At},_addOrOverwriteComponent:function(){return Dt},_apps:function(){return It},_clearComponents:function(){return Pt},_components:function(){return Ct},_getProvider:function(){return Rt},_registerComponent:function(){return Nt},_removeServiceInstance:function(){return Ot},deleteApp:function(){return Kt},getApp:function(){return qt},getApps:function(){return zt},initializeApp:function(){return Bt},onLog:function(){return Gt},registerVersion:function(){return Wt},setLogLevel:function(){return Qt}});var t=n(791),r=n(164),i="page_container__2h62-",a="page_card__12vWP";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=n(184),d=(0,t.createContext)(),p=function(e){var n=e.children,r=f((0,t.useState)(""),2),i=r[0],a=r[1],o=f((0,t.useState)(!1),2),u=o[0],s=o[1],c=f((0,t.useState)(!1),2),l=c[0],p=c[1];return(0,h.jsx)(d.Provider,{value:{file:i,setFile:a,isLoading:u,setIsLoading:s,isUploaded:l,setIsUploaded:p},children:n})},v=d;var y=n.p+"static/media/image.3710b8a35e7e317216bf76a9c717b30a.svg",g="dropzone_container__gvcBN",m="dropzone_Uploaded__TMqdW",k="dropzone_back_img__Uzwuu",b=n(7),w=n.n(b);function _(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function E(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create;function x(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}Object.create;var S=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function T(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=S.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var I=[".DS_Store","Thumbs.db"];function C(e){return(null!==e.target&&e.target.files?N(e.target.files):[]).map((function(e){return T(e)}))}function A(e,t){return _(this,void 0,void 0,(function(){var n;return E(this,(function(r){switch(r.label){case 0:return e.items?(n=N(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(R))]):[3,2];case 1:return[2,D(O(r.sent()))];case 2:return[2,D(N(e.files).map((function(e){return T(e)})))]}}))}))}function D(e){return e.filter((function(e){return-1===I.indexOf(e.name)}))}function N(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function R(e){if("function"!==typeof e.webkitGetAsEntry)return P(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?F(t):P(e)}function O(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x(arguments[t]));return e}(e,Array.isArray(t)?O(t):[t])}),[])}function P(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=T(t);return Promise.resolve(n)}function L(e){return _(this,void 0,void 0,(function(){return E(this,(function(t){return[2,e.isDirectory?F(e):M(e)]}))}))}function F(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var a=this;t.readEntries((function(t){return _(a,void 0,void 0,(function(){var a,o,u;return E(this,(function(s){switch(s.label){case 0:if(t.length)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return a=s.sent(),e(a),[3,4];case 3:return o=s.sent(),n(o),[3,4];case 4:return[3,6];case 5:u=Promise.all(t.map(L)),r.push(u),i(),s.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function M(e){return _(this,void 0,void 0,(function(){return E(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=T(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var U=n(998);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B="file-invalid-type",q="file-too-large",z="file-too-small",K="too-many-files",H=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:B,message:"File type must be ".concat(t)}},W=function(e){return{code:q,message:"File is larger than ".concat(e," bytes")}},G=function(e){return{code:z,message:"File is smaller than ".concat(e," bytes")}},Q={code:K,message:"Too many files"};function Y(e,t){var n="application/x-moz-file"===e.type||(0,U.Z)(e,t);return[n,n?null:H(t)]}function X(e,t,n){if($(e.size))if($(t)&&$(n)){if(e.size>n)return[!1,W(n)];if(e.size<t)return[!1,G(t)]}else{if($(t)&&e.size<t)return[!1,G(t)];if($(n)&&e.size>n)return[!1,W(n)]}return[!0,null]}function $(e){return void 0!==e&&null!==e}function J(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,a=e.multiple,o=e.maxFiles;return!(!a&&t.length>1||a&&o>=1&&t.length>o)&&t.every((function(e){var t=j(Y(e,n),1)[0],a=j(X(e,r,i),1)[0];return t&&a}))}function Z(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function ee(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function te(e){e.preventDefault()}function ne(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function re(e){return-1!==e.indexOf("Edge/")}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return ne(e)||re(e)}function ae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!Z(e)&&t&&t.apply(void 0,[e].concat(r)),Z(e)}))}}var oe=["children"],ue=["open"],se=["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ce=["refKey","onChange","onClick"];function le(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||he(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||he(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){if(e){if("string"===typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var me=(0,t.forwardRef)((function(e,n){var r=e.children,i=we(ge(e,oe)),a=i.open,o=ge(i,ue);return(0,t.useImperativeHandle)(n,(function(){return{open:a}}),[a]),t.createElement(t.Fragment,null,r(ve(ve({},o),{},{open:a})))}));me.displayName="Dropzone";var ke={disabled:!1,getFilesFromEvent:function(e){return _(this,void 0,void 0,(function(){return E(this,(function(t){return[2,(n=e,n.dataTransfer&&e.dataTransfer?A(e.dataTransfer,e.type):C(e))];var n}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null};me.defaultProps=ke,me.propTypes={children:w().func,accept:w().oneOfType([w().string,w().arrayOf(w().string)]),multiple:w().bool,preventDropOnDocument:w().bool,noClick:w().bool,noKeyboard:w().bool,noDrag:w().bool,noDragEventsBubbling:w().bool,minSize:w().number,maxSize:w().number,maxFiles:w().number,disabled:w().bool,getFilesFromEvent:w().func,onFileDialogCancel:w().func,onFileDialogOpen:w().func,onDragEnter:w().func,onDragLeave:w().func,onDragOver:w().func,onDrop:w().func,onDropAccepted:w().func,onDropRejected:w().func,validator:w().func};var be={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=ve(ve({},ke),e),r=n.accept,i=n.disabled,a=n.getFilesFromEvent,o=n.maxSize,u=n.minSize,s=n.multiple,c=n.maxFiles,l=n.onDragEnter,f=n.onDragLeave,h=n.onDragOver,d=n.onDrop,p=n.onDropAccepted,v=n.onDropRejected,y=n.onFileDialogCancel,g=n.onFileDialogOpen,m=n.preventDropOnDocument,k=n.noClick,b=n.noKeyboard,w=n.noDrag,_=n.noDragEventsBubbling,E=n.validator,x=(0,t.useRef)(null),S=(0,t.useRef)(null),T=(0,t.useReducer)(_e,be),I=fe(T,2),C=I[0],A=I[1],D=C.isFocused,N=C.isFileDialogActive,R=C.draggedFiles,O=(0,t.useCallback)((function(){S.current&&(A({type:"openDialog"}),"function"===typeof g&&g(),S.current.value=null,S.current.click())}),[A,g]),P=function(){N&&setTimeout((function(){S.current&&(S.current.files.length||(A({type:"closeDialog"}),"function"===typeof y&&y()))}),300)};(0,t.useEffect)((function(){return window.addEventListener("focus",P,!1),function(){window.removeEventListener("focus",P,!1)}}),[S,N,y]);var L=(0,t.useCallback)((function(e){x.current&&x.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),O()))}),[x,S,O]),F=(0,t.useCallback)((function(){A({type:"focus"})}),[]),M=(0,t.useCallback)((function(){A({type:"blur"})}),[]),U=(0,t.useCallback)((function(){k||(ie()?setTimeout(O,0):O())}),[S,k,O]),j=(0,t.useRef)([]),V=function(e){x.current&&x.current.contains(e.target)||(e.preventDefault(),j.current=[])};(0,t.useEffect)((function(){return m&&(document.addEventListener("dragover",te,!1),document.addEventListener("drop",V,!1)),function(){m&&(document.removeEventListener("dragover",te),document.removeEventListener("drop",V))}}),[x,m]);var B=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),$(e),j.current=[].concat(le(j.current),[e.target]),ee(e)&&Promise.resolve(a(e)).then((function(t){Z(e)&&!_||(A({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),l&&l(e))}))}),[a,l,_]),q=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),$(e);var t=ee(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&h&&h(e),!1}),[h,_]),z=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),$(e);var t=j.current.filter((function(e){return x.current&&x.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),j.current=t,t.length>0||(A({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),ee(e)&&f&&f(e))}),[x,f,_]),K=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),$(e),j.current=[],ee(e)&&Promise.resolve(a(e)).then((function(t){if(!Z(e)||_){var n=[],i=[];t.forEach((function(e){var t=fe(Y(e,r),2),a=t[0],s=t[1],c=fe(X(e,u,o),2),l=c[0],f=c[1],h=E?E(e):null;if(a&&l&&!h)n.push(e);else{var d=[s,f];h&&(d=d.concat(h)),i.push({file:e,errors:d.filter((function(e){return e}))})}})),(!s&&n.length>1||s&&c>=1&&n.length>c)&&(n.forEach((function(e){i.push({file:e,errors:[Q]})})),n.splice(0)),A({acceptedFiles:n,fileRejections:i,type:"setFiles"}),d&&d(n,i,e),i.length>0&&v&&v(i,e),n.length>0&&p&&p(n,e)}})),A({type:"reset"})}),[s,r,u,o,c,a,d,p,v,_,E]),H=function(e){return i?null:e},W=function(e){return b?null:H(e)},G=function(e){return w?null:H(e)},$=function(e){_&&e.stopPropagation()},ne=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onKeyDown,a=e.onFocus,o=e.onBlur,u=e.onClick,s=e.onDragEnter,c=e.onDragOver,l=e.onDragLeave,f=e.onDrop,h=ge(e,se);return ve(ve(ye({onKeyDown:W(ae(r,L)),onFocus:W(ae(a,F)),onBlur:W(ae(o,M)),onClick:H(ae(u,U)),onDragEnter:G(ae(s,B)),onDragOver:G(ae(c,q)),onDragLeave:G(ae(l,z)),onDrop:G(ae(f,K))},n,x),i||b?{}:{tabIndex:0}),h)}}),[x,L,F,M,U,B,q,z,K,b,w,i]),re=(0,t.useCallback)((function(e){e.stopPropagation()}),[]),oe=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.onChange,a=e.onClick,o=ge(e,ce),u=ye({accept:r,multiple:s,type:"file",style:{display:"none"},onChange:H(ae(i,K)),onClick:H(ae(a,re)),autoComplete:"off",tabIndex:-1},n,S);return ve(ve({},u),o)}}),[S,r,s,K,i]),ue=R.length,he=ue>0&&J({files:R,accept:r,minSize:u,maxSize:o,multiple:s,maxFiles:c}),de=ue>0&&!he;return ve(ve({},C),{},{isDragAccept:he,isDragReject:de,isFocused:D&&!i,getRootProps:ne,getInputProps:oe,rootRef:x,inputRef:S,open:H(O)})}function _e(e,t){switch(t.type){case"focus":return ve(ve({},e),{},{isFocused:!0});case"blur":return ve(ve({},e),{},{isFocused:!1});case"openDialog":return ve(ve({},e),{},{isFileDialogActive:!0});case"closeDialog":return ve(ve({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return ve(ve({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return ve(ve({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return ve({},be);default:return e}}function Ee(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function xe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ee(a,r,i,o,u,"next",e)}function u(e){Ee(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Se=n(757),Te=n.n(Se);function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t,n){return t&&Ce(e.prototype,t),n&&Ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function De(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e,t){return Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Re(e,t)}function Oe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}function Le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Me(e,t){if(t&&("object"===Fe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ne(e)}function Ue(e){var t=Le();return function(){var n,r=Pe(e);if(t){var i=Pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Me(this,n)}}function je(e,t,n){return je=Le()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Re(i,n.prototype),i},je.apply(null,arguments)}function Ve(e){var t="function"===typeof Map?new Map:void 0;return Ve=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return je(e,arguments,Pe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Re(n,e)},Ve(e)}var Be=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},qe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Be(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ze=function(e){return function(e){var t=Be(e);return qe.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function Ke(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ke(e[n],t[n]));return e}var He=function(){function e(){var t=this;Ie(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ae(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function We(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(a)),""].join(".")}function Ge(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var Ye=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Ne(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ne(a),Xe.prototype.create),a}return Ae(n)}(Ve(Error)),Xe=function(){function e(t,n,r){Ie(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ae(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?$e(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ye(n,a,t);return o}}]),e}();function $e(e,t){return e.replace(Je,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Je=/\{\$([^}]+)}/g;function Ze(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function et(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(tt(u)&&tt(s)){if(!et(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function tt(e){return null!==e&&"object"===typeof e}function nt(e,t){var n=new rt(e,t);return n.subscribe.bind(n)}var rt=function(){function e(t,n){var r=this;Ie(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ae(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=De(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=it),void 0===r.error&&(r.error=it),void 0===r.complete&&(r.complete=it);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function it(){}function at(e){return e&&e._delegate?e._delegate:e}function ot(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ut=function(){function e(t,n,r){Ie(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ae(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),st="[DEFAULT]",ct=function(){function e(t,n){Ie(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ae(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new He;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:st})}catch(s){}var t,n=De(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=xe(Se.mark((function e(){var t;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ot(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ot(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=De(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=f(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=De(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(pg){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===st?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(pg){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.component?this.component.multipleInstances?e:st:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var lt,ft,ht=function(){function e(t){Ie(this,e),this.name=t,this.providers=new Map}return Ae(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ct(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),dt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ft||(ft={}));var pt,vt,yt={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},gt=ft.INFO,mt=(o(lt={},ft.DEBUG,"log"),o(lt,ft.VERBOSE,"log"),o(lt,ft.INFO,"info"),o(lt,ft.WARN,"warn"),o(lt,ft.ERROR,"error"),lt),kt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=mt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},bt=function(){function e(t){Ie(this,e),this.name=t,this._logLevel=gt,this._logHandler=kt,this._userLogHandler=null,dt.push(this)}return Ae(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ft))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?yt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.DEBUG].concat(t)),this._logHandler.apply(this,[this,ft.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ft.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.INFO].concat(t)),this._logHandler.apply(this,[this,ft.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.WARN].concat(t)),this._logHandler.apply(this,[this,ft.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.ERROR].concat(t)),this._logHandler.apply(this,[this,ft.ERROR].concat(t))}}]),e}();var wt=function(){function e(t){Ie(this,e),this.container=t}return Ae(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var _t="@firebase/app",Et="0.7.15",xt=new bt("@firebase/app"),St="[DEFAULT]",Tt=(o(pt={},_t,"fire-core"),o(pt,"@firebase/app-compat","fire-core-compat"),o(pt,"@firebase/analytics","fire-analytics"),o(pt,"@firebase/analytics-compat","fire-analytics-compat"),o(pt,"@firebase/app-check","fire-app-check"),o(pt,"@firebase/app-check-compat","fire-app-check-compat"),o(pt,"@firebase/auth","fire-auth"),o(pt,"@firebase/auth-compat","fire-auth-compat"),o(pt,"@firebase/database","fire-rtdb"),o(pt,"@firebase/database-compat","fire-rtdb-compat"),o(pt,"@firebase/functions","fire-fn"),o(pt,"@firebase/functions-compat","fire-fn-compat"),o(pt,"@firebase/installations","fire-iid"),o(pt,"@firebase/installations-compat","fire-iid-compat"),o(pt,"@firebase/messaging","fire-fcm"),o(pt,"@firebase/messaging-compat","fire-fcm-compat"),o(pt,"@firebase/performance","fire-perf"),o(pt,"@firebase/performance-compat","fire-perf-compat"),o(pt,"@firebase/remote-config","fire-rc"),o(pt,"@firebase/remote-config-compat","fire-rc-compat"),o(pt,"@firebase/storage","fire-gcs"),o(pt,"@firebase/storage-compat","fire-gcs-compat"),o(pt,"@firebase/firestore","fire-fst"),o(pt,"@firebase/firestore-compat","fire-fst-compat"),o(pt,"fire-js","fire-js"),o(pt,"firebase","fire-js-all"),pt),It=new Map,Ct=new Map;function At(e,t){try{e.container.addComponent(t)}catch(n){xt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Dt(e,t){e.container.addOrOverwriteComponent(t)}function Nt(e){var t=e.name;if(Ct.has(t))return xt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ct.set(t,e);var n,r=De(It.values());try{for(r.s();!(n=r.n()).done;){At(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Rt(e,t){return e.container.getProvider(t)}function Ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:St;Rt(e,t).clearInstance(n)}function Pt(){Ct.clear()}var Lt,Ft,Mt=(o(vt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),o(vt,"bad-app-name","Illegal App name: '{$appName}"),o(vt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),o(vt,"app-deleted","Firebase App named '{$appName}' already deleted"),o(vt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),o(vt,"invalid-log-argument","First argument to `onLog` must be null or a function."),vt),Ut=new Xe("app","Firebase",Mt),jt=function(){function e(t,n,r){var i=this;Ie(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",(function(){return i}),"PUBLIC"))}return Ae(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ut.create("app-deleted",{appName:this._name})}}]),e}(),Vt="9.6.5";function Bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:St,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ut.create("bad-app-name",{appName:String(i)});var a=It.get(i);if(a){if(et(e,a.options)&&et(r,a.config))return a;throw Ut.create("duplicate-app",{appName:i})}var o,u=new ht(i),s=De(Ct.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new jt(e,r,u);return It.set(i,l),l}function qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=It.get(e);if(!t)throw Ut.create("no-app",{appName:e});return t}function zt(){return Array.from(It.values())}function Kt(e){return Ht.apply(this,arguments)}function Ht(){return Ht=xe(Se.mark((function e(t){var n;return Se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!It.has(n)){e.next=6;break}return It.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Ht.apply(this,arguments)}function Wt(e,t,n){var r,i=null!==(r=Tt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void xt.warn(u.join(" "))}Nt(new ut("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Gt(e,t){if(null!==e&&"function"!==typeof e)throw Ut.create("invalid-log-argument");!function(e,t){var n,r=De(dt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=yt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ft[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Qt(e){var t;t=e,dt.forEach((function(e){e.setLogLevel(t)}))}Lt="",Nt(new ut("platform-logger",(function(e){return new wt(e)}),"PRIVATE")),Wt(_t,Et,Lt),Wt(_t,Et,"esm2017"),Wt("fire-js","");var Yt=function(){function e(t,n){var r=this;Ie(this,e),this._delegate=t,this.firebase=n,At(t,new ut("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ae(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Kt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){At(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Dt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Xt=(o(Ft={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),o(Ft,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ft),$t=new Xe("app-compat","Firebase",Xt);var Jt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Bt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ze(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Wt,setLogLevel:Qt,onLog:Gt,apps:null,SDK_VERSION:Vt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Nt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw $t.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ke(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ze(n,e=e||St))throw $t.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Yt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ke(n,e)},createSubscribe:nt,ErrorFactory:Xe,deepExtend:Ke}),n}(),Zt=new bt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Zt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var en=self.firebase.SDK_VERSION;en&&en.indexOf("LITE")>=0&&Zt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var tn=Jt;!function(e){Wt("@firebase/app-compat","0.1.16",e)}();tn.registerVersion("firebase","9.6.5","app-compat");var nn="firebasestorage.googleapis.com",rn=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,an(e),"Firebase Storage: ".concat(r," (").concat(an(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Ne(i),n.prototype),i}return Ae(n,[{key:"_codeEquals",value:function(e){return an(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ye);function an(e){return"storage/"+e}function on(){return new rn("unknown","An unknown error occurred, please check the error payload for server response.")}function un(){return new rn("canceled","User canceled the upload/download.")}function sn(){return new rn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function cn(e){return new rn("invalid-argument",e)}function ln(){return new rn("app-deleted","The Firebase app was deleted.")}function fn(e){return new rn("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hn(e,t){return new rn("invalid-format","String does not match format '"+e+"': "+t)}function dn(e){throw new rn("internal-error","Internal error: "+e)}var pn,vn=function(){function e(t,n){Ie(this,e),this.bucket=t,this.path_=n}return Ae(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new rn("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===nn?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new rn("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),yn=function(){function e(t){Ie(this,e),this.promise_=Promise.reject(t)}return Ae(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function gn(e){return"string"===typeof e||e instanceof String}function mn(e){return kn()&&e instanceof Blob}function kn(){return"undefined"!==typeof Blob}function bn(e,t,n,r){if(r<t)throw cn("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw cn("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function wn(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function _n(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(pn||(pn={}));var En=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;Ie(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Ae(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=on();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?ln():un());else i(new rn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new xn(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new xn(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===pn.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new xn(o,r))}else{var u=r.getErrorCode()===pn.ABORT;t(!1,new xn(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),xn=Ae((function e(t,n,r){Ie(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Sn(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Tn(){for(var e=Sn(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(kn())return new Blob(n);throw new rn("unsupported-environment","This browser doesn't seem to support creating Blobs")}var In={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Cn=Ae((function e(t,n){Ie(this,e),this.data=t,this.contentType=n||null}));function An(e,t){switch(e){case In.RAW:return new Cn(Dn(t));case In.BASE64:case In.BASE64URL:return new Cn(Nn(e,t));case In.DATA_URL:return new Cn(function(e){var t=new Rn(e);return t.base64?Nn(In.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw hn(In.DATA_URL,"Malformed data URL.")}return Dn(t)}(t.rest)}(t),new Rn(t).contentType)}throw on()}function Dn(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Nn(e,t){switch(e){case In.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw hn(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case In.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw hn(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw hn(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Rn=Ae((function e(t){Ie(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw hn(In.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var On=function(){function e(t,n){Ie(this,e);var r=0,i="";mn(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Ae(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(mn(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(kn()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Tn.apply(null,i))}var a=n.map((function(e){return gn(e)?An(In.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function Pn(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Ln(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Fn(e,t){return t}var Mn=Ae((function e(t,n,r,i){Ie(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Fn})),Un=null;function jn(){if(Un)return Un;var e=[];e.push(new Mn("bucket")),e.push(new Mn("generation")),e.push(new Mn("metageneration")),e.push(new Mn("name","fullPath",!0));var t=new Mn("name");t.xform=function(e,t){return function(e){return!gn(e)||e.length<2?e:Ln(e)}(t)},e.push(t);var n=new Mn("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Mn("timeCreated")),e.push(new Mn("updated")),e.push(new Mn("md5Hash",null,!0)),e.push(new Mn("cacheControl",null,!0)),e.push(new Mn("contentDisposition",null,!0)),e.push(new Mn("contentEncoding",null,!0)),e.push(new Mn("contentLanguage",null,!0)),e.push(new Mn("contentType",null,!0)),e.push(new Mn("metadata","customMetadata",!0)),Un=e}function Vn(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new vn(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Bn(e,t,n){var r=Pn(t);return null===r?null:Vn(e,r,n)}function qn(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function zn(e,t,n){var r=Pn(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=De(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new vn(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=De(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new vn(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var Kn=Ae((function e(t,n,r,i){Ie(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Hn(e){if(!e)throw on()}function Wn(e,t){return function(n,r){var i=Bn(e,r,t);return Hn(null!==i),i}}function Gn(e,t){return function(n,r){var i=Bn(e,r,t);return Hn(null!==i),function(e,t,n,r){var i=Pn(t);if(null===i)return null;if(!gn(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return wn("/b/"+o(i)+"/o/"+o(a),n,r)+_n({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Qn(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new rn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new rn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new rn("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new rn("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Yn(e){var t=Qn(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new rn("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Xn(e,t,n){var r=wn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Kn(r,"GET",Wn(e,n),i);return a.errorHandler=Yn(t),a}function $n(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=wn(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new Kn(o,"GET",function(e,t){return function(n,r){var i=zn(e,t,r);return Hn(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=Qn(t),s}function Jn(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Zn(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=Jn(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qn(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=On.getBlob(c,r,l);if(null===f)throw sn();var h={name:s.fullPath},d=wn(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Kn(d,"POST",Wn(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Qn(t),v}var er=Ae((function e(t,n,r,i){Ie(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function tr(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Hn(!1)}return Hn(!!n&&-1!==(t||["active"]).indexOf(n)),n}var nr=262144;function rr(e,t,n,r,i,a,o,u){var s=new er(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new rn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw sn();var v=t.maxUploadRetryTime,y=new Kn(n,"POST",(function(e,n){var i,o=tr(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?Wn(t,a)(e,n):null,new er(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=Qn(e),y}var ir={STATE_CHANGED:"state_changed"},ar={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function or(e){switch(e){case"running":case"pausing":case"canceling":return ar.RUNNING;case"paused":return ar.PAUSED;case"success":return ar.SUCCESS;case"canceled":return ar.CANCELED;default:return ar.ERROR}}var ur=Ae((function e(t,n,r){Ie(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function sr(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var cr=function(){function e(){var t=this;Ie(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pn.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=pn.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=pn.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Ae(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw dn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw dn("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw dn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw dn("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw dn("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),lr=function(e){Oe(n,e);var t=Ue(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ae(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(cr);function fr(){return new lr}var hr=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Ie(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=jn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Ae(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=f(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Jn(t,r,i),u={name:o.fullPath},s=wn(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=qn(o,n),f=e.maxUploadRetryTime,h=new Kn(s,"POST",(function(e){var t;tr(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Hn(!1)}return Hn(gn(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=Qn(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,fr,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Kn(n,"POST",(function(e){var t=tr(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Hn(!1)}n||Hn(!1);var i=Number(n);return Hn(!isNaN(i)),new er(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Qn(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,fr,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=nr*this._chunkMultiplier,n=new er(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=rr(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,fr,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){nr*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Xn(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,fr,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Zn(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,fr,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=un(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=or(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new ur(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(or(this._state)){case ar.SUCCESS:sr(this._resolve.bind(null,this.snapshot))();break;case ar.CANCELED:case ar.ERROR:sr(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(or(this._state)){case ar.RUNNING:case ar.PAUSED:e.next&&sr(e.next.bind(e,this.snapshot))();break;case ar.SUCCESS:e.complete&&sr(e.complete.bind(e))();break;default:e.error&&sr(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),dr=function(){function e(t,n){Ie(this,e),this._service=t,this._location=n instanceof vn?n:vn.makeFromUrl(n,t.host)}return Ae(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new vn(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Ln(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new vn(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw fn(e)}}]),e}();function pr(e,t,n){return vr.apply(this,arguments)}function vr(){return(vr=xe(Te().mark((function e(t,n,r){var i,a,o,u;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,yr(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,ot(u.prefixes)),(a=n.items).push.apply(a,ot(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,pr(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yr(e,t){null!=t&&"number"===typeof t.maxResults&&bn("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=$n(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,fr)}function gr(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=wn(t.fullServerUrl(),e.host,e._protocol),a=qn(n,r),o=e.maxOperationRetryTime,u=new Kn(i,"PATCH",Wn(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=Yn(t),u}(e.storage,e._location,t,jn());return e.storage.makeRequestWithTokens(n,fr)}function mr(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=wn(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Kn(r,"GET",Gn(e,n),i);return a.errorHandler=Yn(t),a}(e.storage,e._location,jn());return e.storage.makeRequestWithTokens(t,fr).then((function(e){if(null===e)throw new rn("no-download-url","The given file does not have any download URLs.");return e}))}function kr(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=wn(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Kn(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Yn(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,fr)}function br(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new vn(e._location.bucket,n);return new dr(e.storage,r)}function wr(e,t){if(e instanceof Sr){var n=e;if(null==n._bucket)throw new rn("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new dr(n,n._bucket);return null!=t?wr(r,t):r}return void 0!==t?br(e,t):e}function _r(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Sr)return new dr(e,t);throw cn("To use ref(service, url), the first argument must be a Storage instance.")}return wr(e,t)}function Er(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:vn.makeFromBucketSpec(n,e)}function xr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:We(i,e.app.options.projectId))}var Sr=function(){function e(t,n,r,i,a){Ie(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=nn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?vn.makeFromBucketSpec(i,this._host):Er(this._host,this.app.options)}return Ae(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=vn.makeFromBucketSpec(this._url,e):this._bucket=Er(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){bn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){bn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=xe(Te().mark((function e(){var t,n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=xe(Te().mark((function e(){var t,n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new dr(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new yn(ln());var a=function(e,t,n,r,i,a){var o=_n(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new En(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=xe(Te().mark((function e(t,n){var r,i,a,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=f(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Tr="@firebase/storage",Ir="0.9.2",Cr="storage";function Ar(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new hr(e,new On(t),n)}(e=at(e),t,n)}function Dr(e){return function(e){e._throwIfRoot("getMetadata");var t=Xn(e.storage,e._location,jn());return e.storage.makeRequestWithTokens(t,fr)}(e=at(e))}function Nr(e){return function(e){var t={prefixes:[],items:[]};return pr(e,t).then((function(){return t}))}(e=at(e))}function Rr(e,t){return _r(e=at(e),t)}function Or(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};xr(e,t,n,r)}function Pr(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Sr(r,i,a,n,Vt)}Nt(new ut(Cr,Pr,"PUBLIC").setMultipleInstances(!0)),Wt(Tr,Ir,""),Wt(Tr,Ir,"esm2017");var Lr=function(){function e(t,n,r){Ie(this,e),this._delegate=t,this.task=n,this.ref=r}return Ae(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Fr=function(){function e(t,n){Ie(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Ae(e,[{key:"snapshot",get:function(){return new Lr(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Lr(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Lr(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Lr(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Mr=function(){function e(t,n){Ie(this,e),this._delegate=t,this._service=n}return Ae(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Ur(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Ur(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Ur=function(){function e(t,n){Ie(this,e),this._delegate=t,this.storage=n}return Ae(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return br(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Fr(Ar(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:In.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=An(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Fr(new hr(this._delegate,new On(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Nr(this._delegate).then((function(t){return new Mr(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return yr(e=at(e),t)}(this._delegate,e||void 0).then((function(e){return new Mr(e,t.storage)}))}},{key:"getMetadata",value:function(){return Dr(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return gr(e=at(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return mr(at(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),kr(at(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw fn(e)}}]),e}(),jr=function(){function e(t,n){Ie(this,e),this.app=t,this._delegate=n}return Ae(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Vr(e))throw cn("ref() expected a child path but got a URL, use refFromURL instead.");return new Ur(Rr(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Vr(e))throw cn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vn.makeFromUrl(e,this._delegate.host)}catch(t){throw cn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ur(Rr(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Or(this._delegate,e,t,n)}}]),e}();function Vr(e){return/^[A-Za-z]+:\/\//.test(e)}function Br(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new jr(r,i)}function qr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}function zr(){return zr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=qr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},zr.apply(this,arguments)}!function(e){var t={TaskState:ar,TaskEvent:ir,StringFormat:In,Storage:jr,Reference:Ur};e.INTERNAL.registerComponent(new ut("storage-compat",Br,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.10")}(tn);var Kr,Hr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Wr={},Gr=Gr||{},Qr=Hr||self;function Yr(){}function Xr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function $r(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Jr="closure_uid_"+(1e9*Math.random()>>>0),Zr=0;function ei(e,t,n){return e.call.apply(e.bind,arguments)}function ti(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ni(e,t,n){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ei:ti).apply(null,arguments)}function ri(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ii(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ai(){this.s=this.s,this.o=this.o}var oi={};ai.prototype.s=!1,ai.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Jr)&&e[Jr]||(e[Jr]=++Zr)}(this);delete oi[e]}},ai.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ui=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},si=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ci(e){return Array.prototype.concat.apply([],arguments)}function li(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function fi(e){return/^[\s\xa0]*$/.test(e)}var hi,di=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function pi(e,t){return-1!=e.indexOf(t)}function vi(e,t){return e<t?-1:e>t?1:0}e:{var yi=Qr.navigator;if(yi){var gi=yi.userAgent;if(gi){hi=gi;break e}}hi=""}function mi(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ki(e){var t={};for(var n in e)t[n]=e[n];return t}var bi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wi(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<bi.length;a++)n=bi[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _i(e){return _i[" "](e),e}_i[" "]=Yr;var Ei,xi=pi(hi,"Opera"),Si=pi(hi,"Trident")||pi(hi,"MSIE"),Ti=pi(hi,"Edge"),Ii=Ti||Si,Ci=pi(hi,"Gecko")&&!(pi(hi.toLowerCase(),"webkit")&&!pi(hi,"Edge"))&&!(pi(hi,"Trident")||pi(hi,"MSIE"))&&!pi(hi,"Edge"),Ai=pi(hi.toLowerCase(),"webkit")&&!pi(hi,"Edge");function Di(){var e=Qr.document;return e?e.documentMode:void 0}e:{var Ni="",Ri=function(){var e=hi;return Ci?/rv:([^\);]+)(\)|;)/.exec(e):Ti?/Edge\/([\d\.]+)/.exec(e):Si?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ai?/WebKit\/(\S+)/.exec(e):xi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ri&&(Ni=Ri?Ri[1]:""),Si){var Oi=Di();if(null!=Oi&&Oi>parseFloat(Ni)){Ei=String(Oi);break e}}Ei=Ni}var Pi,Li={};function Fi(){return function(e){var t=Li;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=di(String(Ei)).split("."),n=di("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=vi(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||vi(0==a[2].length,0==o[2].length)||vi(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Qr.document&&Si){var Mi=Di();Pi=Mi||(parseInt(Ei,10)||void 0)}else Pi=void 0;var Ui=Pi,ji=function(){if(!Qr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Qr.addEventListener("test",Yr,t),Qr.removeEventListener("test",Yr,t)}catch(n){}return e}();function Vi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Bi(e,t){if(Vi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ci){e:{try{_i(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:qi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Bi.Z.h.call(this)}}Vi.prototype.h=function(){this.defaultPrevented=!0},ii(Bi,Vi);var qi={2:"touch",3:"pen",4:"mouse"};Bi.prototype.h=function(){Bi.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var zi="closure_listenable_"+(1e6*Math.random()|0),Ki=0;function Hi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ki,this.ca=this.fa=!1}function Wi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Gi(e){this.src=e,this.g={},this.h=0}function Qi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ui(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Wi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Yi(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Gi.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Yi(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Hi(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Xi="closure_lm_"+(1e6*Math.random()|0),$i={};function Ji(e,t,n,r,i){if(r&&r.once)return ea(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ji(e,t[a],n,r,i);return null}return n=ua(n),e&&e[zi]?e.N(t,n,$r(r)?!!r.capture:!!r,i):Zi(e,t,n,!1,r,i)}function Zi(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=$r(i)?!!i.capture:!!i,u=aa(e);if(u||(e[Xi]=u=new Gi(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ia;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ji||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ra(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ea(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ea(e,t[a],n,r,i);return null}return n=ua(n),e&&e[zi]?e.O(t,n,$r(r)?!!r.capture:!!r,i):Zi(e,t,n,!0,r,i)}function ta(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ta(e,t[a],n,r,i);else r=$r(r)?!!r.capture:!!r,n=ua(n),e&&e[zi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Yi(a=e.g[t],n,r,i))&&(Wi(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=aa(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Yi(t,n,r,i)),(n=-1<e?t[e]:null)&&na(n))}function na(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[zi])Qi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ra(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=aa(t))?(Qi(n,e),0==n.h&&(n.src=null,t[Xi]=null)):Wi(e)}}}function ra(e){return e in $i?$i[e]:$i[e]="on"+e}function ia(e,t){if(e.ca)e=!0;else{t=new Bi(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&na(e),e=n.call(r,t)}return e}function aa(e){return(e=e[Xi])instanceof Gi?e:null}var oa="__closure_events_fn_"+(1e9*Math.random()>>>0);function ua(e){return"function"===typeof e?e:(e[oa]||(e[oa]=function(t){return e.handleEvent(t)}),e[oa])}function sa(){ai.call(this),this.i=new Gi(this),this.P=this,this.I=null}function ca(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Vi(t,e);else if(t instanceof Vi)t.target=t.target||e;else{var i=t;wi(t=new Vi(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=la(o,r,!0,t)&&i}if(i=la(o=t.g=e,r,!0,t)&&i,i=la(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=la(o=t.g=n[a],r,!1,t)&&i}function la(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Qi(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ii(sa,ai),sa.prototype[zi]=!0,sa.prototype.removeEventListener=function(e,t,n,r){ta(this,e,t,n,r)},sa.prototype.M=function(){if(sa.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wi(n[r]);delete t.g[e],t.h--}}this.I=null},sa.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},sa.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var fa=Qr.JSON.stringify;function ha(){var e=ba,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var da,pa=function(){function e(){Ie(this,e),this.h=this.g=null}return Ae(e,[{key:"add",value:function(e,t){var n=va.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),va=new(function(){function e(t,n){Ie(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ae(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ya}),(function(e){return e.reset()})),ya=function(){function e(){Ie(this,e),this.next=this.g=this.h=null}return Ae(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ga(e){Qr.setTimeout((function(){throw e}),0)}function ma(e,t){da||function(){var e=Qr.Promise.resolve(void 0);da=function(){e.then(wa)}}(),ka||(da(),ka=!0),ba.add(e,t)}var ka=!1,ba=new pa;function wa(){for(var e;e=ha();){try{e.h.call(e.g)}catch(n){ga(n)}var t=va;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ka=!1}function _a(e,t){sa.call(this),this.h=e||1,this.g=t||Qr,this.j=ni(this.kb,this),this.l=Date.now()}function Ea(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function xa(e,t,n){if("function"===typeof e)n&&(e=ni(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ni(e.handleEvent,e)}return 2147483647<Number(t)?-1:Qr.setTimeout(e,t||0)}function Sa(e){e.g=xa((function(){e.g=null,e.i&&(e.i=!1,Sa(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ii(_a,sa),(Kr=_a.prototype).da=!1,Kr.S=null,Kr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ca(this,"tick"),this.da&&(Ea(this),this.start()))}},Kr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kr.M=function(){_a.Z.M.call(this),Ea(this),delete this.g};var Ta=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ae(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Sa(this)}},{key:"M",value:function(){zr(Pe(n.prototype),"M",this).call(this),this.g&&(Qr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ai);function Ia(e){ai.call(this),this.h=e,this.g={}}ii(Ia,ai);var Ca=[];function Aa(e,t,n,r){Array.isArray(n)||(n&&(Ca[0]=n.toString()),n=Ca);for(var i=0;i<n.length;i++){var a=Ji(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Da(e){mi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&na(e)}),e),e.g={}}function Na(){this.g=!0}function Ra(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return fa(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ia.prototype.M=function(){Ia.Z.M.call(this),Da(this)},Ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Na.prototype.Aa=function(){this.g=!1},Na.prototype.info=function(){};var Oa={},Pa=null;function La(){return Pa=Pa||new sa}function Fa(e){Vi.call(this,Oa.Ma,e)}function Ma(e){var t=La();ca(t,new Fa(t,e))}function Ua(e,t){Vi.call(this,Oa.STAT_EVENT,e),this.stat=t}function ja(e){var t=La();ca(t,new Ua(t,e))}function Va(e,t){Vi.call(this,Oa.Na,e),this.size=t}function Ba(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Qr.setTimeout((function(){e()}),t)}Oa.Ma="serverreachability",ii(Fa,Vi),Oa.STAT_EVENT="statevent",ii(Ua,Vi),Oa.Na="timingevent",ii(Va,Vi);var qa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},za={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ka(){}function Ha(e){return e.h||(e.h=e.i())}function Wa(){}Ka.prototype.h=null;var Ga,Qa={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ya(){Vi.call(this,"d")}function Xa(){Vi.call(this,"c")}function $a(){}function Ja(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ia(this),this.P=eo,e=Ii?125:void 0,this.W=new _a(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Za}function Za(){this.i=null,this.g="",this.h=!1}ii(Ya,Vi),ii(Xa,Vi),ii($a,Ka),$a.prototype.g=function(){return new XMLHttpRequest},$a.prototype.i=function(){return{}},Ga=new $a;var eo=45e3,to={},no={};function ro(e,t,n){e.K=1,e.v=Io(wo(t)),e.s=n,e.U=!0,io(e,null)}function io(e,t){e.F=Date.now(),so(e),e.A=wo(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Vo(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Za,e.g=qu(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ta(ni(e.Ia,e,e.g),e.O)),Aa(e.V,e.g,"readystatechange",e.gb),t=e.H?ki(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ma(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ao(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function oo(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=uo(e,n))==no){4==t&&(e.o=4,ja(14),i=!1),Ra(e.j,e.m,null,"[Incomplete Response]");break}if(r==to){e.o=4,ja(15),Ra(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ra(e.j,e.m,r,null),po(e,r)}ao(e)&&r!=no&&r!=to&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ja(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pu(t),t.L=!0,ja(11))):(Ra(e.j,e.m,n,"[Invalid Chunked Response]"),ho(e),fo(e))}function uo(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?no:(n=Number(t.substring(n,r)),isNaN(n)?to:(r+=1)+n>t.length?no:(t=t.substr(r,n),e.C=r+n,t))}function so(e){e.Y=Date.now()+e.P,co(e,e.P)}function co(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ba(ni(e.eb,e),t)}function lo(e){e.B&&(Qr.clearTimeout(e.B),e.B=null)}function fo(e){0==e.l.G||e.I||Mu(e.l,e)}function ho(e){lo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ea(e.W),Da(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function po(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Qo(n.i,e)))if(n.I=e.N,!e.J&&Qo(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Fu(n),Su(n)}Ou(n),ja(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ba(ni(n.ab,n),6e3));if(1>=Go(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else ju(n,11)}else if((e.J||n.g==e)&&Fu(n),!fi(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(pi(l,"spdy")||pi(l,"quic")||pi(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Yo(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,To(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Bu(r,r.H?r.la:null,r.W),d.J){Xo(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(lo(p),so(p)),r.g=d}else Ru(r);0<n.l.length&&Cu(n)}else"stop"!=a[0]&&"close"!=a[0]||ju(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ju(n,7):xu(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Ma(4)}catch(a){}}function vo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Xr(e)||"string"===typeof e)si(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Xr(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Xr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function yo(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof yo)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function go(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];mo(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)mo(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function mo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Kr=Ja.prototype).setTimeout=function(e){this.P=e},Kr.gb=function(e){e=e.target;var t=this.L;t&&3==ku(e)?t.l():this.Ia(e)},Kr.Ia=function(e){try{if(e==this.g)e:{var t=ku(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ii||this.g&&(this.h.h||this.g.ga()||bu(this.g)))){this.I||4!=t||7==n||Ma(8==n||0>=r?3:2),lo(this);var i=this.g.ba();this.N=i;t:if(ao(this)){var a=bu(this.g);e="";var o=a.length,u=4==ku(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ho(this),fo(this);var s="";break t}this.h.i=new Qr.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fi(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,ja(12),ho(this),fo(this);break e}Ra(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,po(this,i)}this.U?(oo(this,t,s),Ii&&this.i&&3==t&&(Aa(this.V,this.W,"tick",this.fb),this.W.start())):(Ra(this.j,this.m,s,null),po(this,s)),4==t&&ho(this),this.i&&!this.I&&(4==t?Mu(this.l,this):(this.i=!1,so(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,ja(12)):(this.o=0,ja(13)),ho(this),fo(this)}}}catch(t){}},Kr.fb=function(){if(this.g){var e=ku(this.g),t=this.g.ga();this.C<t.length&&(lo(this),oo(this,e,t),this.i&&4!=e&&so(this))}},Kr.cancel=function(){this.I=!0,ho(this)},Kr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ma(3),ja(17)),ho(this),this.o=2,fo(this)):co(this,this.Y-e)},(Kr=yo.prototype).R=function(){go(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Kr.T=function(){return go(this),this.g.concat()},Kr.get=function(e,t){return mo(this.h,e)?this.h[e]:t},Kr.set=function(e,t){mo(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Kr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var ko=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bo(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof bo){this.g=void 0!==t?t:e.g,_o(this,e.j),this.s=e.s,Eo(this,e.i),xo(this,e.m),this.l=e.l,t=e.h;var n=new Fo;n.i=t.i,t.g&&(n.g=new yo(t.g),n.h=t.h),So(this,n),this.o=e.o}else e&&(n=String(e).match(ko))?(this.g=!!t,_o(this,n[1]||"",!0),this.s=Co(n[2]||""),Eo(this,n[3]||"",!0),xo(this,n[4]),this.l=Co(n[5]||"",!0),So(this,n[6]||"",!0),this.o=Co(n[7]||"")):(this.g=!!t,this.h=new Fo(null,this.g))}function wo(e){return new bo(e)}function _o(e,t,n){e.j=n?Co(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Eo(e,t,n){e.i=n?Co(t,!0):t}function xo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function So(e,t,n){t instanceof Fo?(e.h=t,function(e,t){t&&!e.j&&(Mo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Uo(this,t),Vo(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ao(t,Po)),e.h=new Fo(t,e.g))}function To(e,t,n){e.h.set(t,n)}function Io(e){return To(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Co(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ao(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Do),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Do(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}bo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ao(t,No,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ao(t,No,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ao(n,"/"==n.charAt(0)?Oo:Ro,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ao(n,Lo)),e.join("")};var No=/[#\/\?@]/g,Ro=/[#\?:]/g,Oo=/[#\?]/g,Po=/[#\?@]/g,Lo=/#/g;function Fo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mo(e){e.g||(e.g=new yo,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Uo(e,t){Mo(e),t=Bo(e,t),mo(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,mo((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&go(e)))}function jo(e,t){return Mo(e),t=Bo(e,t),mo(e.g.h,t)}function Vo(e,t,n){Uo(e,t),0<n.length&&(e.i=null,e.g.set(Bo(e,t),li(n)),e.h+=n.length)}function Bo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Kr=Fo.prototype).add=function(e,t){Mo(this),this.i=null,e=Bo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Kr.forEach=function(e,t){Mo(this),this.g.forEach((function(n,r){si(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Kr.T=function(){Mo(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Kr.R=function(e){Mo(this);var t=[];if("string"===typeof e)jo(this,e)&&(t=ci(t,this.g.get(Bo(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ci(t,e[n])}return t},Kr.set=function(e,t){return Mo(this),this.i=null,jo(this,e=Bo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Kr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Kr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var qo=Ae((function e(t,n){Ie(this,e),this.h=t,this.g=n}));function zo(e){this.l=e||Ho,Qr.PerformanceNavigationTiming?e=0<(e=Qr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Qr.g&&Qr.g.Ea&&Qr.g.Ea()&&Qr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ko,Ho=10;function Wo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Go(e){return e.h?1:e.g?e.g.size:0}function Qo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Yo(e,t){e.g?e.g.add(t):e.h=t}function Xo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $o(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=De(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return li(e.i)}function Jo(){}function Zo(){this.g=new Jo}function eu(e,t,n){var r=n||"";try{vo(e,(function(e,n){var i=e;$r(e)&&(i=fa(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function tu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function nu(e){this.l=e.$b||null,this.j=e.ib||!1}function ru(e,t){sa.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=iu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zo.prototype.cancel=function(){if(this.i=$o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=De(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Jo.prototype.stringify=function(e){return Qr.JSON.stringify(e,void 0)},Jo.prototype.parse=function(e){return Qr.JSON.parse(e,void 0)},ii(nu,Ka),nu.prototype.g=function(){return new ru(this.l,this.j)},nu.prototype.i=(Ko={},function(){return Ko}),ii(ru,sa);var iu=0;function au(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function ou(e){e.readyState=4,e.l=null,e.j=null,e.A=null,uu(e)}function uu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Kr=ru.prototype).open=function(e,t){if(this.readyState!=iu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,uu(this)},Kr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Qr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Kr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ou(this)),this.readyState=iu},Kr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,uu(this)),this.g&&(this.readyState=3,uu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Qr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;au(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Kr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ou(this):uu(this),3==this.readyState&&au(this)}},Kr.Ua=function(e){this.g&&(this.response=this.responseText=e,ou(this))},Kr.Ta=function(e){this.g&&(this.response=e,ou(this))},Kr.ha=function(){this.g&&ou(this)},Kr.setRequestHeader=function(e,t){this.v.append(e,t)},Kr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Kr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ru.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var su=Qr.JSON.parse;function cu(e){sa.call(this),this.headers=new yo,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lu,this.K=this.L=!1}ii(cu,sa);var lu="",fu=/^https?$/i,hu=["POST","PUT"];function du(e){return"content-type"==e.toLowerCase()}function pu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,vu(e),gu(e)}function vu(e){e.D||(e.D=!0,ca(e,"complete"),ca(e,"error"))}function yu(e){if(e.h&&"undefined"!=typeof Gr&&(!e.C[1]||4!=ku(e)||2!=e.ba()))if(e.v&&4==ku(e))xa(e.Fa,0,e);else if(ca(e,"readystatechange"),4==ku(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ko)[1]||null;if(!a&&Qr.self&&Qr.self.location){var o=Qr.self.location.protocol;a=o.substr(0,o.length-1)}i=!fu.test(a?a.toLowerCase():"")}t=i}if(t)ca(e,"complete"),ca(e,"success");else{e.m=6;try{var u=2<ku(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",vu(e)}}finally{gu(e)}}}function gu(e,t){if(e.g){mu(e);var n=e.g,r=e.C[0]?Yr:null;e.g=null,e.C=null,t||ca(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function mu(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Qr.clearTimeout(e.A),e.A=null)}function ku(e){return e.g?e.g.readyState:0}function bu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case lu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function wu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return mi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):To(e,t,n))}function _u(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Eu(e){this.za=0,this.l=[],this.h=new Na,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_u("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_u("baseRetryDelayMs",5e3,e),this.$a=_u("retryDelaySeedMs",1e4,e),this.Ya=_u("forwardChannelMaxRetries",2,e),this.ra=_u("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new zo(e&&e.concurrentRequestLimit),this.Ca=new Zo,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function xu(e){if(Tu(e),3==e.G){var t=e.V++,n=wo(e.F);To(n,"SID",e.J),To(n,"RID",t),To(n,"TYPE","terminate"),Du(e,n),(t=new Ja(e,e.h,t,void 0)).K=2,t.v=Io(wo(n)),n=!1,Qr.navigator&&Qr.navigator.sendBeacon&&(n=Qr.navigator.sendBeacon(t.v.toString(),"")),!n&&Qr.Image&&((new Image).src=t.v,n=!0),n||(t.g=qu(t.l,null),t.g.ea(t.v)),t.F=Date.now(),so(t)}Vu(e)}function Su(e){e.g&&(Pu(e),e.g.cancel(),e.g=null)}function Tu(e){Su(e),e.u&&(Qr.clearTimeout(e.u),e.u=null),Fu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Qr.clearTimeout(e.m),e.m=null)}function Iu(e,t){e.l.push(new qo(e.Za++,t)),3==e.G&&Cu(e)}function Cu(e){Wo(e.i)||e.m||(e.m=!0,ma(e.Ha,e),e.C=0)}function Au(e,t){var n;n=t?t.m:e.V++;var r=wo(e.F);To(r,"SID",e.J),To(r,"RID",n),To(r,"AID",e.U),Du(e,r),e.o&&e.s&&wu(r,e.o,e.s),n=new Ja(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Nu(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Yo(e.i,n),ro(n,r,t)}function Du(e,t){e.j&&vo({},(function(e,n){To(t,n,e)}))}function Nu(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ni(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{eu(l,o,"req"+c+"_")}catch(ks){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ru(e){e.g||e.u||(e.Y=1,ma(e.Ga,e),e.A=0)}function Ou(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Ba(ni(e.Ga,e),Uu(e,e.A)),e.A++,!0)}function Pu(e){null!=e.B&&(Qr.clearTimeout(e.B),e.B=null)}function Lu(e){e.g=new Ja(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=wo(e.oa);To(t,"RID","rpc"),To(t,"SID",e.J),To(t,"CI",e.N?"0":"1"),To(t,"AID",e.U),Du(e,t),To(t,"TYPE","xmlhttp"),e.o&&e.s&&wu(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Io(wo(t)),n.s=null,n.U=!0,io(n,e)}function Fu(e){null!=e.v&&(Qr.clearTimeout(e.v),e.v=null)}function Mu(e,t){var n=null;if(e.g==t){Fu(e),Pu(e),e.g=null;var r=2}else{if(!Qo(e.i,t))return;n=t.D,Xo(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ca(r=La(),new Va(r,n,t,i)),Cu(e)}else Ru(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Go(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Ba(ni(e.Ha,e,t),Uu(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ou(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ju(e,5);break;case 4:ju(e,10);break;case 3:ju(e,6);break;default:ju(e,2)}}function Uu(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ju(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ni(e.jb,e);n||(n=new bo("//www.google.com/images/cleardot.gif"),Qr.location&&"http"==Qr.location.protocol||_o(n,"https"),Io(n)),function(e,t){var n=new Na;if(Qr.Image){var r=new Image;r.onload=ri(tu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ri(tu,n,r,"TestLoadImage: error",!1,t),r.onabort=ri(tu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ri(tu,n,r,"TestLoadImage: timeout",!1,t),Qr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ja(2);e.G=0,e.j&&e.j.va(t),Vu(e),Tu(e)}function Vu(e){e.G=0,e.I=-1,e.j&&(0==$o(e.i).length&&0==e.l.length||(e.i.i.length=0,li(e.l),e.l.length=0),e.j.ua())}function Bu(e,t,n){var r=function(e){return e instanceof bo?wo(e):new bo(e,void 0)}(n);if(""!=r.i)t&&Eo(r,t+"."+r.i),xo(r,r.m);else{var i=Qr.location;r=function(e,t,n,r){var i=new bo(null,void 0);return e&&_o(i,e),t&&Eo(i,t),n&&xo(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&mi(e.aa,(function(e,t){To(r,t,e)})),t=e.D,n=e.sa,t&&n&&To(r,t,n),To(r,"VER",e.ma),Du(e,r),r}function qu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new cu(new nu({ib:!0})):new cu(e.qa)).L=e.H,t}function zu(){}function Ku(){if(Si&&!(10<=Number(Ui)))throw Error("Environmental error: no available transport.")}function Hu(e,t){sa.call(this),this.g=new Eu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!fi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fi(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Qu(this)}function Wu(e){Ya.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Gu(){Xa.call(this),this.status=1}function Qu(e){this.g=e}(Kr=cu.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ga.g(),this.C=this.u?Ha(this.u):Ha(Ga),this.g.onreadystatechange=ni(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void pu(this,a)}e=n||"";var i=new yo(this.headers);r&&vo(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=du,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Qr.FormData&&e instanceof Qr.FormData,!(0<=ui(hu,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mu(this),0<this.B&&((this.K=function(e){return Si&&Fi()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ni(this.pa,this)):this.A=xa(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){pu(this,a)}},Kr.pa=function(){"undefined"!=typeof Gr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ca(this,"timeout"),this.abort(8))},Kr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ca(this,"complete"),ca(this,"abort"),gu(this))},Kr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gu(this,!0)),cu.Z.M.call(this)},Kr.Fa=function(){this.s||(this.F||this.v||this.l?yu(this):this.cb())},Kr.cb=function(){yu(this)},Kr.ba=function(){try{return 2<ku(this)?this.g.status:-1}catch(Ko){return-1}},Kr.ga=function(){try{return this.g?this.g.responseText:""}catch(Ko){return""}},Kr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),su(t)}},Kr.Da=function(){return this.m},Kr.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Kr=Eu.prototype).ma=8,Kr.G=1,Kr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Kr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Ja(this,this.h,e,void 0),n=this.s;if(this.P&&(n?wi(n=ki(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Nu(this,t,r),To(i=wo(this.F),"RID",e),To(i,"CVER",22),this.D&&To(i,"X-HTTP-Session-Id",this.D),Du(this,i),this.o&&n&&wu(i,this.o,n),Yo(this.i,t),this.Ra&&To(i,"TYPE","init"),this.ja?(To(i,"$req",r),To(i,"SID","null"),t.$=!0,ro(t,i,null)):ro(t,i,r),this.G=2}}else 3==this.G&&(e?Au(this,e):0==this.l.length||Wo(this.i)||Au(this))},Kr.Ga=function(){if(this.u=null,Lu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ba(ni(this.bb,this),e)}},Kr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ja(10),Su(this),Lu(this))},Kr.ab=function(){null!=this.v&&(this.v=null,Su(this),Ou(this),ja(19))},Kr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),ja(2)):(this.h.info("Failed to ping google.com"),ja(1))},(Kr=zu.prototype).xa=function(){},Kr.wa=function(){},Kr.va=function(){},Kr.ua=function(){},Kr.Oa=function(){},Ku.prototype.g=function(e,t){return new Hu(e,t)},ii(Hu,sa),Hu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ma(ni(e.hb,e,t))),ja(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Bu(e,null,e.W),Cu(e)},Hu.prototype.close=function(){xu(this.g)},Hu.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Iu(this.g,t)}else this.v?((t={}).__data__=fa(e),Iu(this.g,t)):Iu(this.g,e)},Hu.prototype.M=function(){this.g.j=null,delete this.j,xu(this.g),delete this.g,Hu.Z.M.call(this)},ii(Wu,Ya),ii(Gu,Xa),ii(Qu,zu),Qu.prototype.xa=function(){ca(this.g,"a")},Qu.prototype.wa=function(e){ca(this.g,new Wu(e))},Qu.prototype.va=function(e){ca(this.g,new Gu(e))},Qu.prototype.ua=function(){ca(this.g,"b")},Ku.prototype.createWebChannel=Ku.prototype.g,Hu.prototype.send=Hu.prototype.u,Hu.prototype.open=Hu.prototype.m,Hu.prototype.close=Hu.prototype.close,qa.NO_ERROR=0,qa.TIMEOUT=8,qa.HTTP_ERROR=6,za.COMPLETE="complete",Wa.EventType=Qa,Qa.OPEN="a",Qa.CLOSE="b",Qa.ERROR="c",Qa.MESSAGE="d",sa.prototype.listen=sa.prototype.N,cu.prototype.listenOnce=cu.prototype.O,cu.prototype.getLastError=cu.prototype.La,cu.prototype.getLastErrorCode=cu.prototype.Da,cu.prototype.getStatus=cu.prototype.ba,cu.prototype.getResponseJson=cu.prototype.Qa,cu.prototype.getResponseText=cu.prototype.ga,cu.prototype.send=cu.prototype.ea;var Yu=Wr.createWebChannelTransport=function(){return new Ku},Xu=Wr.getStatEventTarget=function(){return La()},$u=Wr.ErrorCode=qa,Ju=Wr.EventType=za,Zu=Wr.Event=Oa,es=Wr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ts=Wr.FetchXmlHttpFactory=nu,ns=Wr.WebChannel=Wa,rs=Wr.XhrIo=cu,is="@firebase/firestore",as=function(){function e(t){Ie(this,e),this.uid=t}return Ae(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");var os="9.6.5",us=new bt("@firebase/firestore");function ss(){return us.logLevel}function cs(e){if(us.logLevel<=ft.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(hs);us.debug.apply(us,["Firestore (".concat(os,"): ").concat(e)].concat(ot(i)))}}function ls(e){if(us.logLevel<=ft.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(hs);us.error.apply(us,["Firestore (".concat(os,"): ").concat(e)].concat(ot(i)))}}function fs(e){if(us.logLevel<=ft.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(hs);us.warn.apply(us,["Firestore (".concat(os,"): ").concat(e)].concat(ot(i)))}}function hs(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(os,") INTERNAL ASSERTION FAILED: ")+e;throw ls(t),new Error(t)}function ps(e,t){e||ds()}function vs(e,t){return e}var ys={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gs=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ae(n)}(Ye),ms=Ae((function e(){var t=this;Ie(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ks=Ae((function e(t,n){Ie(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),bs=function(){function e(){Ie(this,e)}return Ae(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(as.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ws=function(){function e(t){Ie(this,e),this.token=t,this.changeListener=null}return Ae(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),_s=function(){function e(t){Ie(this,e),this.t=t,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ae(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ms;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ms,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){cs("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(cs("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ms)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(cs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ps("string"==typeof n.accessToken),new ks(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ps(null===e||"string"==typeof e),new as(e)}}]),e}(),Es=Ae((function e(t,n,r){Ie(this,e),this.type="FirstParty",this.user=as.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),xs=function(){function e(t,n,r){Ie(this,e),this.h=t,this.l=n,this.m=r}return Ae(e,[{key:"getToken",value:function(){return Promise.resolve(new Es(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(as.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ss=Ae((function e(t){Ie(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ts=function(){function e(t){Ie(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return Ae(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&cs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){cs("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):cs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(ps("string"==typeof e.token),new Ss(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Is=function(){function e(t,n){var r=this;Ie(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Ae(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Cs(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Is.I=-1;var As=function(){function e(){Ie(this,e)}return Ae(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Cs(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ds(e,t){return e<t?-1:e>t?1:0}function Ns(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Rs(e){return e+"\0"}var Os=function(){function e(t,n){if(Ie(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new gs(ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new gs(ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new gs(ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gs(ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ae(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ds(this.nanoseconds,e.nanoseconds):Ds(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ps=function(){function e(t){Ie(this,e),this.timestamp=t}return Ae(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Os(0,0))}}]),e}();function Ls(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fs(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ms(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Us=function(){function e(t,n,r){Ie(this,e),void 0===n?n=0:n>t.length&&ds(),void 0===r?r=t.length-n:r>t.length-n&&ds(),this.segments=t,this.offset=n,this.len=r}return Ae(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),js=function(e){Oe(n,e);var t=Ue(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ae(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new gs(ys.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ot(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Us),Vs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bs=function(e){Oe(n,e);var t=Ue(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ae(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Vs.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new gs(ys.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new gs(ys.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new gs(ys.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new gs(ys.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Us),qs=function(){function e(t){Ie(this,e),this.fields=t,t.sort(Bs.comparator)}return Ae(e,[{key:"covers",value:function(e){var t,n=De(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ns(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var zs=function(e){function t(e){Ie(this,t),this.binaryString=e}return Ae(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ds(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();zs.EMPTY_BYTE_STRING=new zs("");var Ks=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(e){if(ps(!!e),"string"==typeof e){var t=0,n=Ks.exec(e);if(ps(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ws(e.seconds),nanos:Ws(e.nanos)}}function Ws(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Gs(e){return"string"==typeof e?zs.fromBase64String(e):zs.fromUint8Array(e)}function Qs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ys(e){var t=e.mapValue.fields.__previous_value__;return Qs(t)?Ys(t):t}function Xs(e){var t=Hs(e.mapValue.fields.__local_write_time__.timestampValue);return new Os(t.seconds,t.nanos)}function $s(e){return null==e}function Js(e){return 0===e&&1/e==-1/0}function Zs(e){return"number"==typeof e&&Number.isInteger(e)&&!Js(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ec=function(){function e(t){Ie(this,e),this.path=t}return Ae(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===js.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(js.fromString(t))}},{key:"fromName",value:function(t){return new e(js.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return js.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new js(t.slice()))}}]),e}();function tc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qs(e)?4:10:ds()}function nc(e,t){if(e===t)return!0;var n=tc(e);if(n!==tc(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Xs(e).isEqual(Xs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Hs(e.timestampValue),r=Hs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Gs(e.bytesValue).isEqual(Gs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ws(e.geoPointValue.latitude)===Ws(t.geoPointValue.latitude)&&Ws(e.geoPointValue.longitude)===Ws(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ws(e.integerValue)===Ws(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ws(e.doubleValue),r=Ws(t.doubleValue);return n===r?Js(n)===Js(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ns(e.arrayValue.values||[],t.arrayValue.values||[],nc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ls(n)!==Ls(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!nc(n[i],r[i])))return!1;return!0}(e,t);default:return ds()}}function rc(e,t){return void 0!==(e.values||[]).find((function(e){return nc(e,t)}))}function ic(e,t){if(e===t)return 0;var n=tc(e),r=tc(t);if(n!==r)return Ds(n,r);switch(n){case 0:return 0;case 1:return Ds(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ws(e.integerValue||e.doubleValue),r=Ws(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ac(e.timestampValue,t.timestampValue);case 4:return ac(Xs(e),Xs(t));case 5:return Ds(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Gs(e),r=Gs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ds(n[i],r[i]);if(0!==a)return a}return Ds(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ds(Ws(e.latitude),Ws(t.latitude));return 0!==n?n:Ds(Ws(e.longitude),Ws(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ic(n[i],r[i]);if(a)return a}return Ds(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ds(r[o],a[o]);if(0!==u)return u;var s=ic(n[r[o]],i[a[o]]);if(0!==s)return s}return Ds(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ds()}}function ac(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ds(e,t);var n=Hs(e),r=Hs(t),i=Ds(n.seconds,r.seconds);return 0!==i?i:Ds(n.nanos,r.nanos)}function oc(e){return uc(e)}function uc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Hs(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Gs(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ec.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=De(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=uc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=De(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(uc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ds();var t,n}function sc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function cc(e){return!!e&&"integerValue"in e}function lc(e){return!!e&&"arrayValue"in e}function fc(e){return!!e&&"nullValue"in e}function hc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dc(e){return!!e&&"mapValue"in e}function pc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Fs(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=pc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=pc(e.arrayValue.values[r]);return n}return Object.assign({},e)}var vc=function(){function e(t){Ie(this,e),this.value=t}return Ae(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!dc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(t)}},{key:"setAll",value:function(e){var t=this,n=Bs.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=pc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());dc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return nc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Fs(t,(function(t,n){return e[t]=n}));var r,i=De(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(pc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function yc(e){var t=[];return Fs(e.fields,(function(e,n){var r=new Bs([e]);if(dc(n)){var i=yc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=De(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new qs(t)}var gc=function(){function e(t,n,r,i,a){Ie(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return Ae(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=vc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=vc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ps.min(),vc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,vc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,vc.empty(),2)}}]),e}(),mc=Ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ie(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.R=null}));function kc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new mc(e,t,n,r,i,a,o)}function bc(e){var t=vs(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+oc(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),$s(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Oc(t.startAt)),t.endAt&&(n+="|ub:",n+=Oc(t.endAt)),t.R=n}return t.R}function wc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Lc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!nc(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Mc(e.startAt,t.startAt)&&Mc(e.endAt,t.endAt)}function _c(e){return ec.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Ec=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ic(t,this.value)):null!==t&&tc(this.value)===tc(t)&&this.v(ic(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ds()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new xc(e,t,r):"array-contains"===t?new Cc(e,r):"in"===t?new Ac(e,r):"not-in"===t?new Dc(e,r):"array-contains-any"===t?new Nc(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new Sc(e,n):new Tc(e,n)}}]),n}(function(){return Ae((function e(){Ie(this,e)}))}());var xc=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this,e,r,i)).key=ec.fromName(i.referenceValue),a}return Ae(n,[{key:"matches",value:function(e){var t=ec.comparator(e.key,this.key);return this.v(t)}}]),n}(Ec),Sc=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,e,"in",r)).keys=Ic("in",r),i}return Ae(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ec),Tc=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,e,"not-in",r)).keys=Ic("not-in",r),i}return Ae(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ec);function Ic(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ec.fromName(e.referenceValue)}))}var Cc=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ie(this,n),t.call(this,e,"array-contains",r)}return Ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return lc(t)&&rc(t.arrayValue,this.value)}}]),n}(Ec),Ac=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ie(this,n),t.call(this,e,"in",r)}return Ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&rc(this.value.arrayValue,t)}}]),n}(Ec),Dc=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ie(this,n),t.call(this,e,"not-in",r)}return Ae(n,[{key:"matches",value:function(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!rc(this.value.arrayValue,t)}}]),n}(Ec),Nc=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ie(this,n),t.call(this,e,"array-contains-any",r)}return Ae(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!lc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return rc(t.value.arrayValue,e)}))}}]),n}(Ec),Rc=Ae((function e(t,n){Ie(this,e),this.position=t,this.before=n}));function Oc(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return oc(e)})).join(","))}var Pc=Ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ie(this,e),this.field=t,this.dir=n}));function Lc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Fc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ec.comparator(ec.fromName(o.referenceValue),n.key):ic(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Mc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!nc(e.position[n],t.position[n]))return!1;return!0}var Uc=Ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ie(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.S=null,this.D=null,this.startAt,this.endAt}));function jc(e,t,n,r,i,a,o,u){return new Uc(e,t,n,r,i,a,o,u)}function Vc(e){return new Uc(e)}function Bc(e){return!$s(e.limit)&&"F"===e.limitType}function qc(e){return!$s(e.limit)&&"L"===e.limitType}function zc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Kc(e){var t,n=De(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Hc(e){return null!==e.collectionGroup}function Wc(e){var t=vs(e);if(null===t.S){t.S=[];var n=Kc(t),r=zc(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new Pc(n)),t.S.push(new Pc(Bs.keyField(),"asc"));else{var i,a=!1,o=De(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.S.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new Pc(Bs.keyField(),s))}}}return t.S}function Gc(e){var t=vs(e);if(!t.D)if("F"===t.limitType)t.D=kc(t.path,t.collectionGroup,Wc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=De(Wc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Pc(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Rc(t.endAt.position,!t.endAt.before):null,s=t.startAt?new Rc(t.startAt.position,!t.startAt.before):null;t.D=kc(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.D}function Qc(e,t,n){return new Uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yc(e,t){return wc(Gc(e),Gc(t))&&e.limitType===t.limitType}function Xc(e){return"".concat(bc(Gc(e)),"|lt:").concat(e.limitType)}function $c(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(oc(t.value));var t})).join(", "),"]")),$s(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+Oc(e.startAt)),e.endAt&&(t+=", endAt: "+Oc(e.endAt)),"Target(".concat(t,")")}(Gc(e)),"; limitType=").concat(e.limitType,")")}function Jc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ec.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=De(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=De(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!Fc(e.startAt,Wc(e),t))&&(!e.endAt||!Fc(e.endAt,Wc(e),t))}(e,t)}function Zc(e){return function(t,n){var r,i=!1,a=De(Wc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=el(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function el(e,t,n){var r=e.field.isKeyField()?ec.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ic(r,i):ds()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ds()}}function tl(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Js(t)?"-0":t}}function nl(e){return{integerValue:""+e}}function rl(e,t){return Zs(t)?nl(t):tl(e,t)}var il=Ae((function e(){Ie(this,e),this._=void 0}));function al(e,t,n){return e instanceof sl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof cl?ll(e,t):e instanceof fl?hl(e,t):function(e,t){var n=ul(e,t),r=pl(n)+pl(e.N);return cc(n)&&cc(e.N)?nl(r):tl(e.k,r)}(e,t)}function ol(e,t,n){return e instanceof cl?ll(e,t):e instanceof fl?hl(e,t):n}function ul(e,t){return e instanceof dl?cc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var sl=function(e){Oe(n,e);var t=Ue(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ae(n)}(il),cl=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ie(this,n),(r=t.call(this)).elements=e,r}return Ae(n)}(il);function ll(e,t){var n,r=vl(t),i=De(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return nc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var fl=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ie(this,n),(r=t.call(this)).elements=e,r}return Ae(n)}(il);function hl(e,t){var n,r=vl(t),i=De(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!nc(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var dl=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this)).k=e,i.N=r,i}return Ae(n)}(il);function pl(e){return Ws(e.integerValue||e.doubleValue)}function vl(e){return lc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var yl=Ae((function e(t,n){Ie(this,e),this.field=t,this.transform=n}));var gl=Ae((function e(t,n){Ie(this,e),this.version=t,this.transformResults=n})),ml=function(){function e(t,n){Ie(this,e),this.updateTime=t,this.exists=n}return Ae(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function kl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var bl=Ae((function e(){Ie(this,e)}));function wl(e,t,n){e instanceof Tl?function(e,t,n){var r=e.value.clone(),i=Al(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Il?function(e,t,n){if(kl(e.precondition,t)){var r=Al(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Cl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function _l(e,t,n){e instanceof Tl?function(e,t,n){if(kl(e.precondition,t)){var r=e.value.clone(),i=Dl(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Sl(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Il?function(e,t,n){if(kl(e.precondition,t)){var r=Dl(e.fieldTransforms,n,t),i=t.data;i.setAll(Cl(e)),i.setAll(r),t.convertToFoundDocument(Sl(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){kl(e.precondition,t)&&t.convertToNoDocument(Ps.min())}(e,t)}function El(e,t){var n,r=null,i=De(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=ul(a.transform,o||null);null!=u&&(null==r&&(r=vc.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function xl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ns(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof cl&&t instanceof cl||e instanceof fl&&t instanceof fl?Ns(e.elements,t.elements,nc):e instanceof dl&&t instanceof dl?nc(e.N,t.N):e instanceof sl&&t instanceof sl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Sl(e){return e.isFoundDocument()?e.version:Ps.min()}var Tl=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ie(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ae(n)}(bl),Il=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ie(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ae(n)}(bl);function Cl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Al(e,t,n){var r=new Map;ps(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ol(o,u,n[i]))}return r}function Dl(e,t,n){var r,i=new Map,a=De(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,al(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Nl,Rl,Ol=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ae(n)}(bl),Pl=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ae(n)}(bl),Ll=Ae((function e(t){Ie(this,e),this.count=t}));function Fl(e){switch(e){default:return ds();case ys.CANCELLED:case ys.UNKNOWN:case ys.DEADLINE_EXCEEDED:case ys.RESOURCE_EXHAUSTED:case ys.INTERNAL:case ys.UNAVAILABLE:case ys.UNAUTHENTICATED:return!1;case ys.INVALID_ARGUMENT:case ys.NOT_FOUND:case ys.ALREADY_EXISTS:case ys.PERMISSION_DENIED:case ys.FAILED_PRECONDITION:case ys.ABORTED:case ys.OUT_OF_RANGE:case ys.UNIMPLEMENTED:case ys.DATA_LOSS:return!0}}function Ml(e){if(void 0===e)return ls("GRPC error has no .code"),ys.UNKNOWN;switch(e){case Nl.OK:return ys.OK;case Nl.CANCELLED:return ys.CANCELLED;case Nl.UNKNOWN:return ys.UNKNOWN;case Nl.DEADLINE_EXCEEDED:return ys.DEADLINE_EXCEEDED;case Nl.RESOURCE_EXHAUSTED:return ys.RESOURCE_EXHAUSTED;case Nl.INTERNAL:return ys.INTERNAL;case Nl.UNAVAILABLE:return ys.UNAVAILABLE;case Nl.UNAUTHENTICATED:return ys.UNAUTHENTICATED;case Nl.INVALID_ARGUMENT:return ys.INVALID_ARGUMENT;case Nl.NOT_FOUND:return ys.NOT_FOUND;case Nl.ALREADY_EXISTS:return ys.ALREADY_EXISTS;case Nl.PERMISSION_DENIED:return ys.PERMISSION_DENIED;case Nl.FAILED_PRECONDITION:return ys.FAILED_PRECONDITION;case Nl.ABORTED:return ys.ABORTED;case Nl.OUT_OF_RANGE:return ys.OUT_OF_RANGE;case Nl.UNIMPLEMENTED:return ys.UNIMPLEMENTED;case Nl.DATA_LOSS:return ys.DATA_LOSS;default:return ds()}}(Rl=Nl||(Nl={}))[Rl.OK=0]="OK",Rl[Rl.CANCELLED=1]="CANCELLED",Rl[Rl.UNKNOWN=2]="UNKNOWN",Rl[Rl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rl[Rl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rl[Rl.NOT_FOUND=5]="NOT_FOUND",Rl[Rl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rl[Rl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rl[Rl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rl[Rl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rl[Rl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rl[Rl.ABORTED=10]="ABORTED",Rl[Rl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rl[Rl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rl[Rl.INTERNAL=13]="INTERNAL",Rl[Rl.UNAVAILABLE=14]="UNAVAILABLE",Rl[Rl.DATA_LOSS=15]="DATA_LOSS";var Ul=function(){function e(t,n){Ie(this,e),this.comparator=t,this.root=n||Vl.EMPTY}return Ae(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Vl.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vl.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new jl(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new jl(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new jl(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new jl(this.root,e,this.comparator,!0)}}]),e}(),jl=function(){function e(t,n,r,i){Ie(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ae(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Vl=function(){function e(t,n,r,i,a){Ie(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ae(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ds();if(this.right.isRed())throw ds();var e=this.left.check();if(e!==this.right.check())throw ds();return e+(this.isRed()?0:1)}}]),e}();Vl.EMPTY=null,Vl.RED=!0,Vl.BLACK=!1,Vl.EMPTY=new(function(){function e(){Ie(this,e),this.size=0}return Ae(e,[{key:"key",get:function(){throw ds()}},{key:"value",get:function(){throw ds()}},{key:"color",get:function(){throw ds()}},{key:"left",get:function(){throw ds()}},{key:"right",get:function(){throw ds()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Vl(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Bl=function(){function e(t){Ie(this,e),this.comparator=t,this.data=new Ul(this.comparator)}return Ae(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ql(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ql(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ql=function(){function e(t){Ie(this,e),this.iter=t}return Ae(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),zl=new Ul(ec.comparator);function Kl(){return zl}var Hl=new Ul(ec.comparator);function Wl(){return Hl}var Gl=new Ul(ec.comparator);function Ql(){return Gl}var Yl=new Bl(ec.comparator);function Xl(){for(var e=Yl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var $l=new Bl(Ds);function Jl(){return $l}var Zl=function(){function e(t,n,r,i,a){Ie(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ae(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,ef.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ps.min(),r,Jl(),Kl(),Xl())}}]),e}(),ef=function(){function e(t,n,r,i,a){Ie(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ae(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(zs.EMPTY_BYTE_STRING,n,Xl(),Xl(),Xl())}}]),e}(),tf=Ae((function e(t,n,r,i){Ie(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.O=i})),nf=Ae((function e(t,n){Ie(this,e),this.targetId=t,this.M=n})),rf=Ae((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zs.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ie(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),af=function(){function e(){Ie(this,e),this.F=0,this.L=sf(),this.B=zs.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return Ae(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.F}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=Xl(),t=Xl(),n=Xl();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ds()}})),new ef(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=sf()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.F+=1}},{key:"Z",value:function(){this.F-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),of=function(){function e(t){Ie(this,e),this.et=t,this.nt=new Map,this.st=Kl(),this.it=uf(),this.rt=new Bl(Ds)}return Ae(e,[{key:"ot",value:function(e){var t,n=De(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.O&&e.O.isFoundDocument()?this.ct(r,e.O):this.at(r,e.key,e.O)}}catch(u){n.e(u)}finally{n.f()}var i,a=De(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.O)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:ds()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.M.count,r=this.wt(t);if(r){var i=r.target;if(_c(i))if(0===n){var a=new ec(i.path);this.at(t,a,gc.newNoDocument(a,Ps.min()))}else ps(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&_c(a.target)){var o=new ec(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.at(i,o,gc.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=Xl();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Zl(e,n,this.rt,this.st,r);return this.st=Kl(),this.it=uf(),this.rt=new Bl(Ds),i}},{key:"ct",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new af,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new Bl(Ds),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||cs("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new af),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function uf(){return new Ul(ec.comparator)}function sf(){return new Ul(ec.comparator)}var cf={asc:"ASCENDING",desc:"DESCENDING"},lf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ff=Ae((function e(t,n){Ie(this,e),this.databaseId=t,this.C=n}));function hf(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function df(e,t){return e.C?t.toBase64():t.toUint8Array()}function pf(e,t){return hf(e,t.toTimestamp())}function vf(e){return ps(!!e),Ps.fromTimestamp(function(e){var t=Hs(e);return new Os(t.seconds,t.nanos)}(e))}function yf(e,t){return function(e){return new js(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function gf(e){var t=js.fromString(e);return ps(qf(t)),t}function mf(e,t){return yf(e.databaseId,t.path)}function kf(e,t){var n=gf(t);if(n.get(1)!==e.databaseId.projectId)throw new gs(ys.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new gs(ys.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ec(Ef(n))}function bf(e,t){return yf(e.databaseId,t)}function wf(e){var t=gf(e);return 4===t.length?js.emptyPath():Ef(t)}function _f(e){return new js(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ef(e){return ps(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xf(e,t,n){return{name:mf(e,t),fields:n.value.mapValue.fields}}function Sf(e,t,n){var r=kf(e,t.name),i=vf(t.updateTime),a=new vc({mapValue:{fields:t.fields}}),o=gc.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Tf(e,t){return"found"in t?function(e,t){ps(!!t.found),t.found.name,t.found.updateTime;var n=kf(e,t.found.name),r=vf(t.found.updateTime),i=new vc({mapValue:{fields:t.found.fields}});return gc.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){ps(!!t.missing),ps(!!t.readTime);var n=kf(e,t.missing),r=vf(t.readTime);return gc.newNoDocument(n,r)}(e,t):ds()}function If(e,t){var n;if(t instanceof Tl)n={update:xf(e,t.key,t.value)};else if(t instanceof Ol)n={delete:mf(e,t.key)};else if(t instanceof Il)n={update:xf(e,t.key,t.data),updateMask:Bf(t.fieldMask)};else{if(!(t instanceof Pl))return ds();n={verify:mf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof sl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof cl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof dl)return{fieldPath:t.field.canonicalString(),increment:n.N};throw ds()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:pf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ds()}(e,t.precondition)),n}function Cf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ml.updateTime(vf(e.updateTime)):void 0!==e.exists?ml.exists(e.exists):ml.none()}(t.currentDocument):ml.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)ps("REQUEST_TIME"===t.setToServerValue),n=new sl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new cl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new fl(i)}else"increment"in t?n=new dl(e,t.increment):ds();var a=Bs.fromServerFormat(t.fieldPath);return new yl(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=kf(e,t.update.name),a=new vc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new qs(t.map((function(e){return Bs.fromServerFormat(e)})))}(t.updateMask);return new Il(i,a,o,n,r)}return new Tl(i,a,n,r)}if(t.delete){var u=kf(e,t.delete);return new Ol(u,n)}if(t.verify){var s=kf(e,t.verify);return new Pl(s,n)}return ds()}function Af(e,t){return{documents:[bf(e,t.path)]}}function Df(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=bf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=bf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(hc(e.value))return{unaryFilter:{field:Mf(e.field),op:"IS_NAN"}};if(fc(e.value))return{unaryFilter:{field:Mf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hc(e.value))return{unaryFilter:{field:Mf(e.field),op:"IS_NOT_NAN"}};if(fc(e.value))return{unaryFilter:{field:Mf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mf(e.field),op:Ff(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Mf(e.field),direction:Lf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||$s(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Of(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Of(t.endAt)),n}function Nf(e){var t=wf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ps(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Rf(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Pc(Uf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return $s(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Pf(n.startAt));var l=null;return n.endAt&&(l=Pf(n.endAt)),jc(t,i,u,o,s,"F",c,l)}function Rf(e){return e?void 0!==e.unaryFilter?[Vf(e)]:void 0!==e.fieldFilter?[jf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Rf(e)})).reduce((function(e,t){return e.concat(t)})):ds():[]}function Of(e){return{before:e.before,values:e.position}}function Pf(e){var t=!!e.before,n=e.values||[];return new Rc(n,t)}function Lf(e){return cf[e]}function Ff(e){return lf[e]}function Mf(e){return{fieldPath:e.canonicalString()}}function Uf(e){return Bs.fromServerFormat(e.fieldPath)}function jf(e){return Ec.create(Uf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ds()}}(e.fieldFilter.op),e.fieldFilter.value)}function Vf(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Uf(e.unaryFilter.field);return Ec.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Uf(e.unaryFilter.field);return Ec.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Uf(e.unaryFilter.field);return Ec.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Uf(e.unaryFilter.field);return Ec.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ds()}}function Bf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function qf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function zf(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Hf(t)),t=Kf(e.get(n),t);return Hf(t)}function Kf(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Hf(e){return e+"\x01\x01"}function Wf(e){var t=e.length;if(ps(t>=2),2===t)return ps("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),js.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ds(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ds()}a=o+2}return new js(r)}var Gf=Ae((function e(t,n){Ie(this,e),this.seconds=t,this.nanoseconds=n})),Qf=Ae((function e(t,n,r){Ie(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));Qf.store="owner",Qf.key="owner";var Yf=Ae((function e(t,n,r){Ie(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));Yf.store="mutationQueues",Yf.keyPath="userId";var Xf=Ae((function e(t,n,r,i,a){Ie(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));Xf.store="mutations",Xf.keyPath="batchId",Xf.userMutationsIndex="userMutationsIndex",Xf.userMutationsKeyPath=["userId","batchId"];var $f=function(){function e(){Ie(this,e)}return Ae(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,zf(t)]}},{key:"key",value:function(e,t,n){return[e,zf(t),n]}}]),e}();$f.store="documentMutations",$f.PLACEHOLDER=new $f;var Jf=Ae((function e(t,n){Ie(this,e),this.path=t,this.readTime=n})),Zf=Ae((function e(t,n){Ie(this,e),this.path=t,this.version=n})),eh=Ae((function e(t,n,r,i,a,o){Ie(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));eh.store="remoteDocuments",eh.readTimeIndex="readTimeIndex",eh.readTimeIndexPath="readTime",eh.collectionReadTimeIndex="collectionReadTimeIndex",eh.collectionReadTimeIndexPath=["parentPath","readTime"];var th=Ae((function e(t){Ie(this,e),this.byteSize=t}));th.store="remoteDocumentGlobal",th.key="remoteDocumentGlobalKey";var nh=Ae((function e(t,n,r,i,a,o,u){Ie(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u}));nh.store="targets",nh.keyPath="targetId",nh.queryTargetsIndexName="queryTargetsIndex",nh.queryTargetsKeyPath=["canonicalId","targetId"];var rh=Ae((function e(t,n,r){Ie(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));rh.store="targetDocuments",rh.keyPath=["targetId","path"],rh.documentTargetsIndex="documentTargetsIndex",rh.documentTargetsKeyPath=["path","targetId"];var ih=Ae((function e(t,n,r,i){Ie(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));ih.key="targetGlobalKey",ih.store="targetGlobal";var ah=Ae((function e(t,n){Ie(this,e),this.collectionId=t,this.parent=n}));ah.store="collectionParents",ah.keyPath=["collectionId","parent"];var oh=Ae((function e(t,n,r,i){Ie(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));oh.store="clientMetadata",oh.keyPath="clientId";var uh=Ae((function e(t,n,r){Ie(this,e),this.bundleId=t,this.createTime=n,this.version=r}));uh.store="bundles",uh.keyPath="bundleId";var sh=Ae((function e(t,n,r){Ie(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));sh.store="namedQueries",sh.keyPath="name";var ch=[Yf.store,Xf.store,$f.store,eh.store,nh.store,Qf.store,ih.store,rh.store].concat([oh.store]).concat([th.store]).concat([ah.store]).concat([uh.store,sh.store]),lh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fh=function(){function e(){Ie(this,e),this.onCommittedListeners=[]}return Ae(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),hh=function(){function e(t){var n=this;Ie(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ae(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ds(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=De(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),dh=function(){function e(t,n){var r=this;Ie(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new ms,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new yh(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=wh(e.target.error);r.It.reject(new yh(t,n))}}return Ae(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(cs("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new mh(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new yh(n,t)}}}]),e}(),ph=function(){function e(t,n,r){Ie(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.bt(Ge())&&ls("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ae(e,[{key:"Ct",value:function(){var e=xe(Te().mark((function e(t){var n=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return cs("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new yh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new gs(ys.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new gs(ys.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new yh(t,n))},i.onupgradeneeded=function(e){cs("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){cs("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=xe(Te().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Te().mark((function e(){var n,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Ct(t);case 2:return c.db=e.sent,n=dh.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),hh.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.At;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,cs("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return cs("SimpleDb","Removing database:",e),kh(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Pt",value:function(){if("object"!==typeof indexedDB)return!1;if(e.vt())return!0;var t=Ge(),n=e.bt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/image_uploader-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"bt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),vh=function(){function e(t){Ie(this,e),this.$t=t,this.Ot=!1,this.Mt=null}return Ae(e,[{key:"isDone",get:function(){return this.Ot}},{key:"Ft",get:function(){return this.Mt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ot=!0}},{key:"Lt",value:function(e){this.Mt=e}},{key:"delete",value:function(){return kh(this.$t.delete())}}]),e}(),yh=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,ys.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ae(n)}(gs);function gh(e){return"IndexedDbTransactionError"===e.name}var mh=function(){function e(t){Ie(this,e),this.store=t}return Ae(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(cs("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(cs("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),kh(n)}},{key:"add",value:function(e){return cs("SimpleDb","ADD",this.store.name,e,e),kh(this.store.add(e))}},{key:"get",value:function(e){var t=this;return kh(this.store.get(e)).next((function(n){return void 0===n&&(n=null),cs("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return cs("SimpleDb","DELETE",this.store.name,e),kh(this.store.delete(e))}},{key:"count",value:function(){return cs("SimpleDb","COUNT",this.store.name),kh(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){cs("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new hh((function(n,r){t.onerror=function(e){var t=wh(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new hh((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new vh(i),o=t(i.primaryKey,i.value,a);if(o instanceof hh){var u=o.catch((function(e){return a.done(),hh.reject(e)}));n.push(u)}a.isDone?r():null===a.Ft?i.continue():i.continue(a.Ft)}else r()}})).next((function(){return hh.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function kh(e){return new hh((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=wh(e.target.error);n(t)}}))}var bh=!1;function wh(e){var t=ph.bt(Ge());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new gs("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return bh||(bh=!0,setTimeout((function(){throw r}),0)),r}}return e}var _h=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return Ae(n)}(fh);function Eh(e,t){var n=vs(e);return ph.Dt(n.Wt,t)}var xh=function(){function e(t,n,r,i){Ie(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ae(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&wl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=De(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&_l(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=De(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&_l(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ps.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Xl())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(function(e,t){return xl(e,t)}))&&Ns(this.baseMutations,e.baseMutations,(function(e,t){return xl(e,t)}))}}]),e}(),Sh=function(){function e(t,n,r,i){Ie(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ae(e,null,[{key:"from",value:function(t,n,r){ps(t.mutations.length===r.length);for(var i=Ql(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Th=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ps.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ps.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:zs.EMPTY_BYTE_STRING;Ie(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ae(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Ih=Ae((function e(t){Ie(this,e),this.Gt=t}));function Ch(e,t){if(t.document)return Sf(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=ec.fromSegments(t.noDocument.path),r=Oh(t.noDocument.readTime),i=gc.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=ec.fromSegments(t.unknownDocument.path),o=Oh(t.unknownDocument.version);return gc.newUnknownDocument(a,o)}return ds()}function Ah(e,t,n){var r=Dh(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:mf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:hf(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new eh(null,null,a,o,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),s=Rh(t.version),c=t.hasCommittedMutations;return new eh(null,new Jf(u,s),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=Rh(t.version);return new eh(new Zf(l,f),null,null,!0,r,i)}return ds()}function Dh(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Nh(e){var t=new Os(e[0],e[1]);return Ps.fromTimestamp(t)}function Rh(e){var t=e.toTimestamp();return new Gf(t.seconds,t.nanoseconds)}function Oh(e){var t=new Os(e.seconds,e.nanoseconds);return Ps.fromTimestamp(t)}function Ph(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Cf(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Cf(e.Gt,t)})),u=Os.fromMillis(t.localWriteTimeMs);return new xh(t.batchId,u,n,o)}function Lh(e){var t,n,r=Oh(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Oh(e.lastLimboFreeSnapshotVersion):Ps.min();return void 0!==e.query.documents?(ps(1===(n=e.query).documents.length),t=Gc(Vc(wf(n.documents[0])))):t=function(e){return Gc(Nf(e))}(e.query),new Th(t,e.targetId,0,e.lastListenSequenceNumber,r,i,zs.fromBase64String(e.resumeToken))}function Fh(e,t){var n,r=Rh(t.snapshotVersion),i=Rh(t.lastLimboFreeSnapshotVersion);n=_c(t.target)?Af(e.Gt,t.target):Df(e.Gt,t.target);var a=t.resumeToken.toBase64();return new nh(t.targetId,bc(t.target),r,a,t.sequenceNumber,i,n)}function Mh(e){var t=Nf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Qc(t,t.limit,"L"):t}var Uh=function(){function e(){Ie(this,e)}return Ae(e,[{key:"getBundleMetadata",value:function(e,t){return jh(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Oh(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return jh(e).put({bundleId:(n=t).id,createTime:Rh(vf(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Vh(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Mh(t.bundledQuery),readTime:Oh(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Vh(e).put(function(e){return{name:e.name,readTime:Rh(vf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function jh(e){return Eh(e,uh.store)}function Vh(e){return Eh(e,sh.store)}var Bh=function(){function e(){Ie(this,e),this.zt=new qh}return Ae(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),hh.resolve()}},{key:"getCollectionParents",value:function(e,t){return hh.resolve(this.zt.getEntries(t))}}]),e}(),qh=function(){function e(){Ie(this,e),this.index={}}return Ae(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bl(js.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Bl(js.comparator)).toArray()}}]),e}(),zh=function(){function e(){Ie(this,e),this.Ht=new qh}return Ae(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:zf(i)};return Kh(e).put(a)}return hh.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Rs(t),""],!1,!0);return Kh(e).Bt(r).next((function(e){var r,i=De(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Wf(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function Kh(e){return Eh(e,ah.store)}var Hh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wh=function(){function e(t,n,r){Ie(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ae(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Gh(e,t,n){var r=e.store(Xf.store),i=e.store($f.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.jt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){ps(1===u)})));var c,l=[],f=De(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=$f.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return hh.waitFor(a).next((function(){return l}))}function Qh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ds();t=e.noDocument}return JSON.stringify(t).length}Wh.DEFAULT_COLLECTION_PERCENTILE=10,Wh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wh.DEFAULT=new Wh(41943040,Wh.DEFAULT_COLLECTION_PERCENTILE,Wh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wh.DISABLED=new Wh(-1,0,0);var Yh=function(){function e(t,n,r,i){Ie(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return Ae(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $h(e).jt({index:Xf.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Jh(e),o=$h(e);return o.add({}).next((function(u){ps("number"==typeof u);var s,c=new xh(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return If(e.Gt,t)})),i=n.mutations.map((function(t){return If(e.Gt,t)}));return new Xf(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new Bl((function(e,t){return Ds(e.canonicalString(),t.canonicalString())})),d=De(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=$f.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,$f.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[u]=c.keys()})),hh.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return $h(e).get(t).next((function(e){return e?(ps(e.userId===n.userId),Ph(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?hh.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return $h(e).jt({index:Xf.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(ps(t.batchId>=r),a=Ph(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return $h(e).jt({index:Xf.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $h(e).Bt(Xf.userMutationsIndex,n).next((function(e){return e.map((function(e){return Ph(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=$f.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Jh(e).jt({range:i},(function(r,i,o){var u=f(r,3),s=u[0],c=u[1],l=u[2],h=Wf(c);if(s===n.userId&&t.path.isEqual(h))return $h(e).get(l).next((function(e){if(!e)throw ds();ps(e.userId===n.userId),a.push(Ph(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Bl(Ds),i=[];return t.forEach((function(t){var a=$f.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Jh(e).jt({range:o},(function(e,i,a){var o=f(e,3),u=o[0],s=o[1],c=o[2],l=Wf(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),hh.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=$f.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Bl(Ds);return Jh(e).jt({range:o},(function(e,t,a){var o=f(e,3),s=o[0],c=o[1],l=o[2],h=Wf(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.te(e,u)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push($h(e).get(t).next((function(e){if(null===e)throw ds();ps(e.userId===n.userId),r.push(Ph(n.k,e))})))})),hh.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Gh(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),hh.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return hh.resolve();var r=IDBKeyRange.lowerBound($f.prefixForUser(t.userId)),i=[];return Jh(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Wf(e[1]);i.push(a)}else r.done()})).next((function(){ps(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Xh(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return Zh(e).get(this.userId).next((function(e){return e||new Yf(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return ps(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Xh(e,t,n){var r=$f.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Jh(e).jt({range:a,Kt:!0},(function(e,n,r){var a=f(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function $h(e){return Eh(e,Xf.store)}function Jh(e){return Eh(e,$f.store)}function Zh(e){return Eh(e,Yf.store)}var ed=function(){function e(t){Ie(this,e),this.se=t}return Ae(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),td=function(){function e(t,n){Ie(this,e),this.referenceDelegate=t,this.k=n}return Ae(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new ed(n.highestTargetId);return n.highestTargetId=r.next(),t.ce(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return Ps.fromTimestamp(new Os(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ce(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ae(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ce(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ae(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return nd(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return ps(t.targetCount>0),t.targetCount-=1,n.ce(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return nd(e).jt((function(o,u){var s=Lh(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return hh.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return nd(e).jt((function(e,n){var r=Lh(n);t(r)}))}},{key:"oe",value:function(e){return rd(e).get(ih.key).next((function(e){return ps(null!==e),e}))}},{key:"ce",value:function(e,t){return rd(e).put(ih.key,t)}},{key:"ae",value:function(e,t){return nd(e).put(Fh(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=bc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return nd(e).jt({range:r,index:nh.queryTargetsIndexName},(function(e,n,r){var a=Lh(n);wc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=id(e);return t.forEach((function(t){var o=zf(t.path);i.push(a.put(new rh(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),hh.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=id(e);return hh.forEach(t,(function(t){var a=zf(t.path);return hh.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=id(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=id(e),i=Xl();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=Wf(e[1]),a=new ec(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=zf(t.path),r=IDBKeyRange.bound([n],[Rs(n)],!1,!0),i=0;return id(e).jt({index:rh.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=f(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return nd(e).get(t).next((function(e){return e?Lh(e):null}))}}]),e}();function nd(e){return Eh(e,nh.store)}function rd(e){return Eh(e,ih.store)}function id(e){return Eh(e,rh.store)}function ad(e){return od.apply(this,arguments)}function od(){return od=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ys.FAILED_PRECONDITION&&t.message===lh){e.next=2;break}throw t;case 2:cs("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),od.apply(this,arguments)}function ud(e,t){var n=f(e,2),r=n[0],i=n[1],a=f(t,2),o=a[0],u=a[1],s=Ds(r,o);return 0===s?Ds(i,u):s}var sd=function(){function e(t){Ie(this,e),this.he=t,this.buffer=new Bl(ud),this.le=0}return Ae(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ud(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),cd=function(){function e(t,n){Ie(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return Ae(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;cs("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,xe(Te().mark((function n(){return Te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!gh(n.t0)){n.next=12;break}cs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,ad(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),ld=function(){function e(t,n){Ie(this,e),this.ge=t,this.params=n}return Ae(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return hh.resolve(Is.I);var r=new sd(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(cs("LruGarbageCollector","Garbage collection skipped; disabled"),hh.resolve(Hh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(cs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Hh):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(cs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ss()<=ft.DEBUG&&cs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),hh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),fd=function(){function e(t,n){Ie(this,e),this.db=t,this.garbageCollector=function(e,t){return new ld(e,t)}(this,n)}return Ae(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return hd(e,n)}},{key:"removeReference",value:function(e,t,n){return hd(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return hd(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return Zh(e).Qt((function(r){return Xh(e,r,t).next((function(e){return e&&(n=!0),hh.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,u){if(u<=t){var s=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),id(e).delete([0,zf(o.path)])}))}));i.push(s)}})).next((function(){return hh.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return hd(e,t)}},{key:"Ie",value:function(e,t){var n,r=id(e),i=Is.I;return r.jt({index:rh.documentTargetsIndex},(function(e,r){var a=f(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Is.I&&t(new ec(Wf(n)),i),i=s,n=u):i=Is.I})).next((function(){i!==Is.I&&t(new ec(Wf(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function hd(e,t){return id(e).put(function(e,t){return new rh(0,zf(e.path),t)}(t,e.currentSequenceNumber))}var dd=function(){function e(t,n){Ie(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return Ae(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=De(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Fs(this.inner,(function(t,n){var r,i=De(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ms(this.inner)}}]),e}(),pd=function(){function e(){Ie(this,e),this.changes=new dd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ae(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:Ps.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:gc.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?hh.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),vd=function(){function e(t,n){Ie(this,e),this.k=t,this.Jt=n}return Ae(e,[{key:"addEntry",value:function(e,t,n){return md(e).put(kd(t),n)}},{key:"removeEntry",value:function(e,t){var n=md(e),r=kd(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return md(e).get(kd(t)).next((function(e){return n.be(t,e)}))}},{key:"Pe",value:function(e,t){var n=this;return md(e).get(kd(t)).next((function(e){return{document:n.be(t,e),size:Qh(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Kl();return this.ve(e,t,(function(e,t){var i=n.be(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=Kl(),i=new Ul(ec.comparator);return this.ve(e,t,(function(e,t){var a=n.be(e,t);r=r.insert(e,a),i=i.insert(e,Qh(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return hh.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return md(e).jt({range:r},(function(e,t,r){for(var o=ec.fromSegments(e);a&&ec.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Kl(),a=t.path.length+1,o={};if(n.isEqual(Ps.min())){var u=t.path.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=Dh(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=eh.collectionReadTimeIndex}return md(e).jt(o,(function(e,n,o){if(e.length===a){var u=Ch(r.k,n);t.path.isPrefixOf(u.key.path)?Jc(t,u)&&(i=i.insert(u.key,u)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new yd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return gd(e).get(th.key).next((function(e){return ps(!!e),e}))}},{key:"Re",value:function(e,t){return gd(e).put(th.key,t)}},{key:"be",value:function(e,t){if(t){var n=Ch(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(Ps.min()))return n}return gc.newInvalidDocument(e)}}]),e}(),yd=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new dd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ae(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Bl((function(e,t){return Ds(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Ce.get(a);if(o.document.isValidDocument()){var s=Ah(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=Qh(s);r+=c-u,n.push(t.De.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=Ah(t.De.k,gc.newNoDocument(a,Ps.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),hh.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.Pe(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(pd);function gd(e){return Eh(e,th.store)}function md(e){return Eh(e,eh.store)}function kd(e){return e.path.toArray()}var bd=function(){function e(t){Ie(this,e),this.k=t}return Ae(e,[{key:"Nt",value:function(e,t,n,r){var i=this;ps(n<r&&n>=0&&r<=11);var a=new dh("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Qf.store)}(e),function(e){e.createObjectStore(Yf.store,{keyPath:Yf.keyPath}),e.createObjectStore(Xf.store,{keyPath:Xf.keyPath,autoIncrement:!0}).createIndex(Xf.userMutationsIndex,Xf.userMutationsKeyPath,{unique:!0}),e.createObjectStore($f.store)}(e),wd(e),function(e){e.createObjectStore(eh.store)}(e));var o=hh.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(rh.store),e.deleteObjectStore(nh.store),e.deleteObjectStore(ih.store)}(e),wd(e)),o=o.next((function(){return function(e){var t=e.store(ih.store),n=new ih(0,0,Ps.min().toTimestamp(),0);return t.put(ih.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(Xf.store).Bt().next((function(n){e.deleteObjectStore(Xf.store),e.createObjectStore(Xf.store,{keyPath:Xf.keyPath,autoIncrement:!0}).createIndex(Xf.userMutationsIndex,Xf.userMutationsKeyPath,{unique:!0});var r=t.store(Xf.store),i=n.map((function(e){return r.put(e)}));return hh.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(oh.store,{keyPath:oh.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(th.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(eh.store);t.createIndex(eh.readTimeIndex,eh.readTimeIndexPath,{unique:!1}),t.createIndex(eh.collectionReadTimeIndex,eh.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Oe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(uh.store,{keyPath:uh.keyPath})}(e),function(e){e.createObjectStore(sh.store,{keyPath:sh.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(eh.store).jt((function(e,n){t+=Qh(n)})).next((function(){var n=new th(t);return e.store(th.store).put(th.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(Yf.store),r=e.store(Xf.store);return n.Bt().next((function(n){return hh.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(Xf.userMutationsIndex,i).next((function(r){return hh.forEach(r,(function(r){ps(r.userId===n.userId);var i=Ph(t.k,r);return Gh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(rh.store),n=e.store(eh.store);return e.store(ih.store).get(ih.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new js(n),o=function(e){return[0,zf(e)]}(a);r.push(t.get(o).next((function(n){return n?hh.resolve():function(n){return t.put(new rh(0,zf(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return hh.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(ah.store,{keyPath:ah.keyPath});var n=t.store(ah.store),r=new qh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:zf(i)})}};return t.store(eh.store).jt({Kt:!0},(function(e,t){var n=new js(e);return i(n.popLast())})).next((function(){return t.store($f.store).jt({Kt:!0},(function(e,t){var n=f(e,3),r=(n[0],n[1]),a=(n[2],Wf(r));return i(a.popLast())}))}))}},{key:"Oe",value:function(e){var t=this,n=e.store(nh.store);return n.jt((function(e,r){var i=Lh(r),a=Fh(t.k,i);return n.put(a)}))}}]),e}();function wd(e){e.createObjectStore(rh.store,{keyPath:rh.keyPath}).createIndex(rh.documentTargetsIndex,rh.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(nh.store,{keyPath:nh.keyPath}).createIndex(nh.queryTargetsIndexName,nh.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ih.store)}var _d="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ed=function(){function e(t,n,r,i,a,o,u,s,c,l){if(Ie(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Me=a,this.window=o,this.document=u,this.Fe=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.Pt())throw new gs(ys.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fd(this,i),this.Ge=n+"main",this.k=new Ih(s),this.ze=new ph(this.Ge,11,new bd(this.k)),this.He=new td(this.referenceDelegate,this.k),this.Jt=new zh,this.Je=function(e,t){return new vd(e,t)}(this.k,this.Jt),this.Ye=new Uh,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&ls("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ae(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new gs(ys.FAILED_PRECONDITION,_d);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new Is(t,e.Fe)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=xe(Te().mark((function n(r){return Te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=xe(Te().mark((function t(n){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget(xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Sd(t).put(new oh(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Me.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.cn(t).next((function(){return!1})):!!n&&e.an(t).next((function(){return!0}))}))})).catch((function(t){if(gh(t))return cs("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return cs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Me.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return xd(e).get(Qf.key).next((function(e){return hh.resolve(t.un(e))}))}},{key:"hn",value:function(e){return Sd(e).delete(this.clientId)}},{key:"ln",value:function(){var e=xe(Te().mark((function e(){var t,n,r,i,a=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Eh(e,oh.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return hh.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=De(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?hh.resolve(!0):xd(e).get(Qf.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new gs(ys.FAILED_PRECONDITION,_d);return!1}}return!(!t.networkEnabled||!t.inForeground)||Sd(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&cs("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=xe(Te().mark((function e(){var t=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[Qf.store,oh.store],(function(e){var n=new _h(e,Is.I);return t.cn(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Sd(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return Yh.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;cs("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,ch,(function(a){return i=new _h(a,r.Be?r.Be.next():Is.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw ls("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Me.enqueueRetryable((function(){return r.We(!1)})),new gs(ys.FAILED_PRECONDITION,lh);return n(i)})).next((function(e){return r.an(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return xd(e).get(Qf.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new gs(ys.FAILED_PRECONDITION,_d)}))}},{key:"an",value:function(e){var t=new Qf(this.clientId,this.allowTabSynchronization,Date.now());return xd(e).put(Qf.key,t)}},{key:"cn",value:function(e){var t=this,n=xd(e);return n.get(Qf.key).next((function(e){return t.un(e)?(cs("IndexedDbPersistence","Releasing primary lease."),n.delete(Qf.key)):hh.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ls("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Me.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),Qe()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Me.enterRestrictedMode(!0),t.Me.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return cs("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ls("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(ii){ls("Failed to set zombie client id.",ii)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(ii){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Pt",value:function(){return ph.Pt()}}]),e}();function xd(e){return Eh(e,Qf.store)}function Sd(e){return Eh(e,oh.store)}function Td(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Id=Ae((function e(t,n){Ie(this,e),this.progress=t,this.In=n})),Cd=function(){function e(t,n,r){Ie(this,e),this.Je=t,this.An=n,this.Jt=r}return Ae(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.bn(e,t,r)}))}},{key:"bn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=De(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Pn",value:function(e,t){e.forEach((function(e,n){var r,i=De(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Pn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ec.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):Hc(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new ec(t)).next((function(e){var t=Wl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Wl();return this.Jt.getCollectionParents(e,i).next((function(o){return hh.forEach(o,(function(o){var u=function(e,t){return new Uc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=De(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,u=De(o.mutations);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s.key,l=r.get(c);null==l&&(l=gc.newInvalidDocument(c),r=r.insert(c,l)),_l(s,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){Jc(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=Xl(),a=De(t);try{for(a.s();!(r=a.n()).done;){var o,u=De(r.value.mutations);try{for(u.s();!(o=u.n()).done;){var s=o.value;s instanceof Il&&null===n.get(s.key)&&(i=i.add(s.key))}}catch(l){u.e(l)}finally{u.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),Ad=function(){function e(t,n,r,i){Ie(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return Ae(e,null,[{key:"$n",value:function(t,n){var r,i=Xl(),a=Xl(),o=De(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Dd=function(){function e(){Ie(this,e)}return Ae(e,[{key:"On",value:function(e){this.Mn=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Ps.min())?this.Fn(e,t):this.Mn.vn(e,r).next((function(a){var o=i.Ln(t,a);return(Bc(t)||qc(t))&&i.Bn(t.limitType,o,r,n)?i.Fn(e,t):(ss()<=ft.DEBUG&&cs("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),$c(t)),i.Mn.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new Bl(Zc(e));return t.forEach((function(t,r){Jc(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return ss()<=ft.DEBUG&&cs("QueryEngine","Using full collection scan to execute query:",$c(t)),this.Mn.getDocumentsMatchingQuery(e,t,Ps.min())}}]),e}(),Nd=function(){function e(t,n,r,i){Ie(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new Ul(Ds),this.Kn=new dd((function(e){return bc(e)}),wc),this.jn=Ps.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new Cd(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.On(this.Wn)}return Ae(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function Rd(e,t,n,r){return new Nd(e,t,n,r)}function Od(e,t){return Pd.apply(this,arguments)}function Pd(){return Pd=xe(Te().mark((function e(t,n){var r,i,a,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vs(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new Cd(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],u=Xl(),s=De(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;i.push(c.batchId);var l,f=De(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=De(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,g=De(v.mutations);try{for(g.s();!(y=g.n()).done;){var m=y.value;u=u.add(m.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){p.e(k)}finally{p.f()}return a.vn(e,u).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.On(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),Pd.apply(this,arguments)}function Ld(e,t){var n=vs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=hh.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ps(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function Fd(e){var t=vs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function Md(e,t){var n=vs(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.He.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.He.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(zs.EMPTY_BYTE_STRING,Ps.min()).withLastLimboFreeSnapshotVersion(Ps.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.He.updateTargetData(e,c))}}));var u=Kl();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ud(e,a,t.documentUpdates,r,void 0).next((function(e){u=e}))),!r.isEqual(Ps.min())){var s=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return hh.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,u)})).next((function(){return u}))})).then((function(e){return n.qn=i,e}))}function Ud(e,t,n,r,i){var a=Xl();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=Kl();return n.forEach((function(n,o){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Ps.min())?(t.removeEntry(n,s),a=a.insert(n,o)):!u.isValidDocument()||o.version.compareTo(u.version)>0||0===o.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(o,s),a=a.insert(n,o)):cs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",o.version)})),a}))}function jd(e,t){var n=vs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function Vd(e,t){var n=vs(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,hh.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new Th(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function Bd(e,t,n){return qd.apply(this,arguments)}function qd(){return qd=xe(Te().mark((function e(t,n,r){var i,a,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=vs(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),gh(e.t1)){e.next=12;break}throw e.t1;case 12:cs("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),qd.apply(this,arguments)}function zd(e,t,n){var r=vs(e),i=Ps.min(),a=Xl();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=vs(e),i=r.Kn.get(n);return void 0!==i?hh.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,Gc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:Ps.min(),n?a:Xl())})).next((function(e){return{documents:e,zn:a}}))}))}function Kd(e,t){var n=vs(e),r=vs(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Hd(e){var t=vs(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=vs(e),i=Kl(),a=Dh(n),o=md(t),u=IDBKeyRange.lowerBound(a,!0);return o.jt({index:eh.readTimeIndex,range:u},(function(e,t){var n=Ch(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:Nh(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function Wd(e){return Gd.apply(this,arguments)}function Gd(){return Gd=xe(Te().mark((function e(t){var n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vs(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=md(e),n=Ps.min();return t.jt({index:eh.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Nh(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),Gd.apply(this,arguments)}function Qd(e,t,n,r){return Yd.apply(this,arguments)}function Yd(){return Yd=xe(Te().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=vs(t),o=Xl(),u=Kl(),s=Ql(),c=De(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hn(f.metadata.name),f.document&&(o=o.add(h)),u=u.insert(h,n.Jn(f)),s=s.insert(h,n.Yn(f.metadata.readTime))}catch(v){c.e(v)}finally{c.f()}return d=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,Vd(a,function(e){return Gc(Vc(js.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ud(e,d,u,Ps.min(),s).next((function(t){return d.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.He.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Yd.apply(this,arguments)}function Xd(e,t){return $d.apply(this,arguments)}function $d(){return $d=xe(Te().mark((function e(t,n){var r,i,a,o=arguments;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Xl(),e.next=3,Vd(t,Gc(Mh(n.bundledQuery)));case 3:return i=e.sent,a=vs(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=vf(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(zs.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),$d.apply(this,arguments)}var Jd=function(){function e(t){Ie(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return Ae(e,[{key:"getBundleMetadata",value:function(e,t){return hh.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:vf(n.createTime)}),hh.resolve()}},{key:"getNamedQuery",value:function(e,t){return hh.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:Mh(e.bundledQuery),readTime:vf(e.readTime)}}(t)),hh.resolve()}}]),e}(),Zd=function(){function e(){Ie(this,e),this.ts=new Bl(ep.es),this.ns=new Bl(ep.ss)}return Ae(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ep(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new ep(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new ec(new js([])),r=new ep(n,e),i=new ep(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new ec(new js([])),n=new ep(t,e),r=new ep(t,e+1),i=Xl();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ep(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ep=function(){function e(t,n){Ie(this,e),this.key=t,this.fs=n}return Ae(e,null,[{key:"es",value:function(e,t){return ec.comparator(e.key,t.key)||Ds(e.fs,t.fs)}},{key:"ss",value:function(e,t){return Ds(e.fs,t.fs)||ec.comparator(e.key,t.key)}}]),e}(),tp=function(){function e(t,n){Ie(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new Bl(ep.es)}return Ae(e,[{key:"checkEmpty",value:function(e){return hh.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new xh(i,t,n,r);this.An.push(a);var o,u=De(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ws=this.ws.add(new ep(s.key,i)),this.Jt.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return hh.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return hh.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return hh.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return hh.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return hh.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ep(t,0),i=new ep(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),hh.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Bl(Ds);return t.forEach((function(e){var t=new ep(e,0),i=new ep(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),hh.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ec.isDocumentKey(i)||(i=i.child(""));var a=new ep(new ec(i),0),o=new Bl(Ds);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),hh.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ps(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return hh.forEach(t.mutations,(function(i){var a=new ep(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ep(t,0),r=this.ws.firstAfterOrEqual(n);return hh.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,hh.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),np=function(){function e(t,n){Ie(this,e),this.Jt=t,this.Ts=n,this.docs=new Ul(ec.comparator),this.size=0}return Ae(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return hh.resolve(n?n.document.mutableCopy():gc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Kl();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():gc.newInvalidDocument(e))})),hh.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Kl(),i=new ec(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||Jc(t,c)&&(r=r.insert(c.key,c.mutableCopy()))}return hh.resolve(r)}},{key:"Es",value:function(e,t){return hh.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new rp(this)}},{key:"getSize",value:function(e){return hh.resolve(this.size)}}]),e}(),rp=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ie(this,n),(r=t.call(this)).De=e,r}return Ae(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),hh.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(pd),ip=function(){function e(t){Ie(this,e),this.persistence=t,this.Is=new dd((function(e){return bc(e)}),wc),this.lastRemoteSnapshotVersion=Ps.min(),this.highestTargetId=0,this.As=0,this.Rs=new Zd,this.targetCount=0,this.bs=ed.ie()}return Ae(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),hh.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return hh.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return hh.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),hh.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),hh.resolve()}},{key:"ae",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new ed(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ae(t),this.targetCount+=1,hh.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ae(t),hh.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,hh.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),hh.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return hh.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return hh.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),hh.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),hh.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),hh.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return hh.resolve(n)}},{key:"containsKey",value:function(e,t){return hh.resolve(this.Rs.containsKey(t))}}]),e}(),ap=function(){function e(t,n){var r=this;Ie(this,e),this.Ps={},this.Be=new Is(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new ip(this),this.Jt=new Bh,this.Je=function(e,t){return new np(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new Ih(n),this.Ye=new Jd(this.k)}return Ae(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.Ps[e.toKey()];return t||(t=new tp(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;cs("MemoryPersistence","Starting transaction:",e);var i=new op(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return hh.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),op=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ie(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ae(n)}(fh),up=function(){function e(t){Ie(this,e),this.persistence=t,this.Cs=new Zd,this.Ns=null}return Ae(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw ds()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),hh.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),hh.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),hh.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hh.forEach(this.xs,(function(r){var i=ec.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return hh.or([function(){return hh.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function sp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function cp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function lp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var fp=function(){function e(t,n,r,i){Ie(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ae(e,[{key:"Ms",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Os",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new gs(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ls("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),hp=function(){function e(t,n,r){Ie(this,e),this.targetId=t,this.state=n,this.error=r}return Ae(e,[{key:"Ms",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Os",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new gs(i.error.code,i.error.message))),a?new e(t,i.state,r):(ls("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),dp=function(){function e(t,n){Ie(this,e),this.clientId=t,this.activeTargetIds=n}return Ae(e,null,[{key:"Os",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Jl(),o=0;i&&o<r.activeTargetIds.length;++o)i=Zs(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ls("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),pp=function(){function e(t,n){Ie(this,e),this.clientId=t,this.onlineState=n}return Ae(e,null,[{key:"Os",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ls("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),vp=function(){function e(){Ie(this,e),this.activeTargetIds=Jl()}return Ae(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Ms",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),yp=function(){function e(t,n,r,i,a){Ie(this,e),this.window=t,this.Me=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Ul(Ds),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=sp(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new vp),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return Ae(e,[{key:"start",value:function(){var e=xe(Te().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=De(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(sp(this.persistenceKey,i)))&&(o=dp.Os(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(u=this.storage.getItem(this.Js))&&(s=this.Zs(u))&&this.ti(s),c=De(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(d){c.e(d)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(lp(this.persistenceKey,e));if(n){var r=hp.Os(e,n);r&&(t=r.state)}}return this.ii.Fs(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(lp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ci()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return cs("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){cs("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){cs("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(cs("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void ls("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable(xe(Te().mark((function e(){var r,i,a,o,u,s;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ai(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(u));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}s=function(e){var t=Is.I;if(null!=e)try{var n=JSON.parse(e);ps("number"==typeof n),t=n}catch(e){ls("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Is.I&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Ms())}},{key:"ni",value:function(e,t,n){var r=new fp(this.currentUser,e,t,n),i=cp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ms())}},{key:"si",value:function(e){var t=cp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=lp(this.persistenceKey,e),i=new hp(e,t,n);this.setItem(r,i.Ms())}},{key:"ci",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ai",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ai(e);return dp.Os(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return fp.Os(new as(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return hp.Os(r,t)}},{key:"Zs",value:function(e){return pp.Os(e)}},{key:"fi",value:function(){var e=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:cs("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.yi(o,u).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=Jl();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Pt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),gp=function(){function e(){Ie(this,e),this.pi=new vp,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ae(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new vp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),mp=function(){function e(){Ie(this,e)}return Ae(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),kp=function(){function e(){var t=this;Ie(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.bi()},this.Pi=[],this.vi()}return Ae(e,[{key:"Ei",value:function(e){this.Pi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){cs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=De(this.Pi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"bi",value:function(){cs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=De(this.Pi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"Pt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),bp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wp=function(){function e(t){Ie(this,e),this.Vi=t.Vi,this.Si=t.Si}return Ae(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Oi",value:function(e){this.ki(e)}},{key:"Mi",value:function(e){this.xi(e)}}]),e}(),_p=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ie(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ae(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new rs;o.listenOnce(Ju.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case $u.NO_ERROR:var t=o.getResponseJson();cs("Connection","XHR received:",JSON.stringify(t)),i(t);break;case $u.TIMEOUT:cs("Connection",'RPC "'+e+'" timed out'),a(new gs(ys.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:var n=o.getStatus();if(cs("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ys).indexOf(t)>=0?t:ys.UNKNOWN}(r.status);a(new gs(u,r.message))}else a(new gs(ys.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new gs(ys.UNAVAILABLE,"Connection failed."));break;default:ds()}}finally{cs("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Yu(),a=Xu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ts({})),this.qi(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())||"object"===typeof navigator&&"ReactNative"===navigator.product||Ge().indexOf("Electron/")>=0||function(){var e=Ge();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||Ge().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");cs("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new wp({Vi:function(e){l?cs("Connection","Not sending because WebChannel is closed:",e):(c||(cs("Connection","Opening WebChannel transport."),s.open(),c=!0),cs("Connection","WebChannel sending:",e),s.send(e))},Si:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,ns.EventType.OPEN,(function(){l||cs("Connection","WebChannel transport opened.")})),h(s,ns.EventType.CLOSE,(function(){l||(l=!0,cs("Connection","WebChannel transport closed"),f.Oi())})),h(s,ns.EventType.ERROR,(function(e){l||(l=!0,fs("Connection","WebChannel transport errored:",e),f.Oi(new gs(ys.UNAVAILABLE,"The operation could not be completed")))})),h(s,ns.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];ps(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){cs("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Nl[e];if(void 0!==t)return Ml(t)}(a),u=i.message;void 0===o&&(o=ys.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Oi(new gs(o,u)),s.close()}else cs("Connection","WebChannel received:",n),f.Mi(n)}})),h(a,Zu.STAT_EVENT,(function(e){e.stat===es.PROXY?cs("Connection","Detected buffering proxy"):e.stat===es.NOPROXY&&cs("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){Ie(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Fi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ae(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);cs("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return cs("RestConnection","Received: ",e),e}),(function(t){throw fs("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+os,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=bp[e];return"".concat(this.Fi,"/v1/").concat(t,":").concat(n)}}]),e}());function Ep(){return"undefined"!=typeof window?window:null}function xp(){return"undefined"!=typeof document?document:null}function Sp(e){return new ff(e,!0)}var Tp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ie(this,e),this.Me=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return Ae(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&cs("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Me.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),Ip=function(){function e(t,n,r,i,a,o,u,s){Ie(this,e),this.Me=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new Tp(t,n)}return Ae(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"pr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"close",value:function(){var e=xe(Te().mark((function e(t,n){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===ys.RESOURCE_EXHAUSTED?(ls(n.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===ys.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=f(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new gs(ys.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.ar=n.Me.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(xe(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return cs("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Me.enqueueAndForget((function(){return t.rr===e?n():(cs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Cp=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a,o,u){var s;return Ie(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).k=o,s}return Ae(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ds()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?(ps(void 0===t||"string"==typeof t),zs.fromBase64String(t||"")):(ps(void 0===t||t instanceof Uint8Array),zs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?ys.UNKNOWN:Ml(e.code);return new gs(t,e.message||"")}(o);n=new rf(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=kf(e,s.document.name),l=vf(s.document.updateTime),f=new vc({mapValue:{fields:s.document.fields}}),h=gc.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new tf(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=kf(e,v.document),g=v.readTime?vf(v.readTime):Ps.min(),m=gc.newNoDocument(y,g),k=v.removedTargetIds||[];n=new tf([],k,m.key,m)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=kf(e,b.document),_=b.removedTargetIds||[];n=new tf([],_,w,null)}else{if(!("filter"in t))return ds();t.filter;var E=t.filter;E.targetId;var x=E.count||0,S=new Ll(x),T=E.targetId;n=new nf(T,S)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return Ps.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ps.min():t.readTime?vf(t.readTime):Ps.min()}(e);return this.listener.br(t,n)}},{key:"Pr",value:function(e){var t={};t.database=_f(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=_c(r)?{documents:Af(e,r)}:{query:Df(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=df(e,t.resumeToken):t.snapshotVersion.compareTo(Ps.min())>0&&(n.readTime=hf(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ds()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=_f(this.k),t.removeTarget=e,this.gr(t)}}]),n}(Ip),Ap=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a,o,u){var s;return Ie(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).k=o,s.Vr=!1,s}return Ae(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,zr(Pe(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(ps(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(ps(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?vf(e.updateTime):vf(t);return n.isEqual(Ps.min())&&(n=vf(t)),new gl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=vf(e.commitTime);return this.listener.Cr(n,t)}return ps(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=_f(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return If(t.k,e)}))};this.gr(n)}}]),n}(Ip),Dp=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a){var o;return Ie(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return Ae(n,[{key:"Or",value:function(){if(this.$r)throw new gs(ys.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],u=a[1];return r.ir.Bi(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ys.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new gs(ys.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],u=a[1];return r.ir.ji(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ys.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new gs(ys.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return Ae((function e(){Ie(this,e)}))}()),Np=function(){function e(t,n){Ie(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}return Ae(e,[{key:"Br",value:function(){var e=this;0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Fr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(ls(t),this.Lr=!1):cs("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}]),e}(),Rp=Ae((function e(t,n,r,i,a){var o=this;Ie(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=zp(o),!e.t0){e.next=5;break}return cs("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=xe(Te().mark((function e(t){var n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=vs(t)).Gr.add(4),e.next=4,Lp(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,Op(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new Np(r,i)}));function Op(e){return Pp.apply(this,arguments)}function Pp(){return Pp=xe(Te().mark((function e(t){var n,r,i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zp(t)){e.next=18;break}n=De(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Pp.apply(this,arguments)}function Lp(e){return Fp.apply(this,arguments)}function Fp(){return Fp=xe(Te().mark((function e(t){var n,r,i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=De(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Fp.apply(this,arguments)}function Mp(e,t){var n=vs(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),qp(n)?Bp(n):mv(n).lr()&&jp(n,t))}function Up(e,t){var n=vs(e),r=mv(n);n.Wr.delete(t),r.lr()&&Vp(n,t),0===n.Wr.size&&(r.lr()?r._r():zp(n)&&n.Jr.set("Unknown"))}function jp(e,t){e.Yr.X(t.targetId),mv(e).Pr(t)}function Vp(e,t){e.Yr.X(t),mv(e).vr(t)}function Bp(e){e.Yr=new of({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),mv(e).start(),e.Jr.Br()}function qp(e){return zp(e)&&!mv(e).hr()&&e.Wr.size>0}function zp(e){return 0===vs(e).Gr.size}function Kp(e){e.Yr=void 0}function Hp(e){return Wp.apply(this,arguments)}function Wp(){return Wp=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){jp(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Wp.apply(this,arguments)}function Gp(e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=xe(Te().mark((function e(t,n){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Kp(t),qp(t)?(t.Jr.Kr(n),Bp(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}function Yp(e,t,n){return Xp.apply(this,arguments)}function Xp(){return Xp=xe(Te().mark((function e(t,n,r){var i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof rf&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=xe(Te().mark((function e(t,n){var r,i,a,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=De(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),cs("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,$p(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof tf?t.Yr.ot(n):n instanceof nf?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(Ps.min())){e.next=29;break}return e.prev=14,e.next=17,Fd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(zs.EMPTY_BYTE_STRING,n.snapshotVersion)),Vp(e,t);var r=new Th(n.target,t,1,n.sequenceNumber);jp(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),cs("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,$p(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Xp.apply(this,arguments)}function $p(e,t,n){return Jp.apply(this,arguments)}function Jp(){return Jp=xe(Te().mark((function e(t,n,r){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gh(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,Lp(t);case 5:t.Jr.set("Offline"),r||(r=function(){return Fd(t.localStore)}),t.asyncQueue.enqueueRetryable(xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cs("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,Op(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Jp.apply(this,arguments)}function Zp(e,t){return t().catch((function(n){return $p(e,n,t)}))}function ev(e){return tv.apply(this,arguments)}function tv(){return tv=xe(Te().mark((function e(t){var n,r,i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=vs(t),r=kv(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!nv(n)){e.next=19;break}return e.prev=3,e.next=6,jd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,rv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,$p(n,e.t0);case 17:e.next=2;break;case 19:iv(n)&&av(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),tv.apply(this,arguments)}function nv(e){return zp(e)&&e.Qr.length<10}function rv(e,t){e.Qr.push(t);var n=kv(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function iv(e){return zp(e)&&!kv(e).hr()&&e.Qr.length>0}function av(e){kv(e).start()}function ov(e){return uv.apply(this,arguments)}function uv(){return uv=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kv(t).kr();case 1:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function sv(e){return cv.apply(this,arguments)}function cv(){return cv=xe(Te().mark((function e(t){var n,r,i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=kv(t),r=De(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),cv.apply(this,arguments)}function lv(e,t,n){return fv.apply(this,arguments)}function fv(){return fv=xe(Te().mark((function e(t,n,r){var i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=Sh.from(i,n,r),e.next=3,Zp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,ev(t);case 5:case"end":return e.stop()}}),e)}))),fv.apply(this,arguments)}function hv(e,t){return dv.apply(this,arguments)}function dv(){return dv=xe(Te().mark((function e(t,n){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&kv(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=xe(Te().mark((function e(t,n){var r,i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fl(i=n.code)||i===ys.ABORTED){e.next=7;break}return r=t.Qr.shift(),kv(t).wr(),e.next=5,Zp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,ev(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:iv(t)&&av(t);case 5:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function pv(e,t){return vv.apply(this,arguments)}function vv(){return vv=xe(Te().mark((function e(t,n){var r,i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=vs(t)).asyncQueue.verifyOperationInProgress(),cs("RemoteStore","RemoteStore received new credentials"),i=zp(r),r.Gr.add(3),e.next=6,Lp(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,Op(r);case 12:case"end":return e.stop()}}),e)}))),vv.apply(this,arguments)}function yv(e,t){return gv.apply(this,arguments)}function gv(){return gv=xe(Te().mark((function e(t,n){var r;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vs(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,Op(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,Lp(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),gv.apply(this,arguments)}function mv(e){return e.Xr||(e.Xr=function(e,t,n){var r=vs(e);return r.Or(),new Cp(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Hp.bind(null,e),Ni:Gp.bind(null,e),br:Yp.bind(null,e)}),e.zr.push(function(){var t=xe(Te().mark((function t(n){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),qp(e)?Bp(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:Kp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function kv(e){return e.Zr||(e.Zr=function(e,t,n){var r=vs(e);return r.Or(),new Ap(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:ov.bind(null,e),Ni:hv.bind(null,e),Nr:sv.bind(null,e),Cr:lv.bind(null,e)}),e.zr.push(function(){var t=xe(Te().mark((function t(n){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,ev(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(cs("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var bv=function(){function e(t,n,r,i,a){Ie(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ae(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gs(ys.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function wv(e,t){if(ls("AsyncQueue","".concat(t,": ").concat(e)),gh(e))return new gs(ys.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var _v=function(){function e(t){Ie(this,e),this.comparator=t?function(e,n){return t(e,n)||ec.comparator(e.key,n.key)}:function(e,t){return ec.comparator(e.key,t.key)},this.keyedMap=Wl(),this.sortedSet=new Ul(this.comparator)}return Ae(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Ev=function(){function e(){Ie(this,e),this.eo=new Ul(ec.comparator)}return Ae(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):ds():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),xv=function(){function e(t,n,r,i,a,o,u,s){Ie(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Ae(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,_v.emptySet(n),a,r,i,!0,!1)}}]),e}(),Sv=Ae((function e(){Ie(this,e),this.so=void 0,this.listeners=[]})),Tv=Ae((function e(){Ie(this,e),this.queries=new dd((function(e){return Xc(e)}),Yc),this.onlineState="Unknown",this.io=new Set}));function Iv(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=xe(Te().mark((function e(t,n){var r,i,a,o,u;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vs(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Sv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=wv(e.t0,"Initialization of query '".concat($c(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&Ov(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Cv.apply(this,arguments)}function Av(e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=xe(Te().mark((function e(t,n){var r,i,a,o,u;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vs(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Nv(e,t){var n,r=vs(e),i=!1,a=De(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=De(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.so=o}}}catch(f){a.e(f)}finally{a.f()}i&&Ov(r)}function Rv(e,t,n){var r=vs(e),i=r.queries.get(t);if(i){var a,o=De(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Ov(e){e.io.forEach((function(e){e.next()}))}var Pv=function(){function e(t,n,r){Ie(this,e),this.query=t,this.co=n,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return Ae(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=De(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new xv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.ao?this.ho(e)&&(this.co.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.co.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=xv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}]),e}(),Lv=function(){function e(t,n){Ie(this,e),this.payload=t,this.byteLength=n}return Ae(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),Fv=function(){function e(t){Ie(this,e),this.k=t}return Ae(e,[{key:"Hn",value:function(e){return kf(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?Sf(this.k,e.document,!1):gc.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return vf(e)}}]),e}(),Mv=function(){function e(t,n,r){Ie(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=Uv(t)}return Ae(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new Fv(this.k),i=De(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hn(a.metadata.name),s=De(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Xl()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=xe(Te().mark((function e(){var t,n,r,i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qd(this.localStore,new Fv(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=De(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Xd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new Id(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Uv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var jv=Ae((function e(t){Ie(this,e),this.key=t})),Vv=Ae((function e(t){Ie(this,e),this.key=t})),Bv=function(){function e(t,n){Ie(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=Xl(),this.mutatedKeys=Xl(),this.Ao=Zc(t),this.Ro=new _v(this.Ao)}return Ae(e,[{key:"bo",get:function(){return this.To}},{key:"Po",value:function(e,t){var n=this,r=t?t.vo:new Ev,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Bc(this.query)&&i.size===this.query.limit?i.last():null,c=qc(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Jc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ao(f,s)>0||c&&n.Ao(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Bc(this.query)||qc(this.query))for(;o.size>this.query.limit;){var l=Bc(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:u,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ds()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],u=0===this.Io.size&&this.current?1:0,s=u!==this.Eo;return this.Eo=u,0!==a.length||s?{snapshot:new xv(this.query,e.Ro,i,a,e.mutatedKeys,0===u,s,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Ev,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=Xl(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new Vv(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new jv(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=Xl();var t=this.Po(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return xv.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),qv=Ae((function e(t,n,r){Ie(this,e),this.query=t,this.targetId=n,this.view=r})),zv=Ae((function e(t){Ie(this,e),this.key=t,this.$o=!1})),Kv=function(){function e(t,n,r,i,a,o){Ie(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Oo={},this.Mo=new dd((function(e){return Xc(e)}),Yc),this.Fo=new Map,this.Lo=new Set,this.Bo=new Ul(ec.comparator),this.Uo=new Map,this.qo=new Zd,this.Ko={},this.jo=new Map,this.Qo=ed.re(),this.onlineState="Unknown",this.Wo=void 0}return Ae(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function Hv(e,t){return Wv.apply(this,arguments)}function Wv(){return Wv=xe(Te().mark((function e(t,n){var r,i,a,o,u,s;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Uy(t),!(o=r.Mo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,Vd(r.localStore,Gc(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Gv(r,n,i,"current"===s);case 13:a=e.sent,r.isPrimaryClient&&Mp(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Wv.apply(this,arguments)}function Gv(e,t,n,r){return Qv.apply(this,arguments)}function Qv(){return Qv=xe(Te().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=xe(Te().mark((function e(t,n,r,i){var a,o,u;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Po(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,zd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Po(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(py(t,n.targetId,u.Co),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,zd(t.localStore,n,!0);case 3:return a=e.sent,o=new Bv(n,a.zn),u=o.Po(a.documents),s=ef.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),py(t,r,c.Co),l=new qv(n,r,o),e.abrupt("return",(t.Mo.set(n,l),t.Fo.has(r)?t.Fo.get(r).push(n):t.Fo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Yv(e,t){return Xv.apply(this,arguments)}function Xv(){return Xv=xe(Te().mark((function e(t,n){var r,i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vs(t),i=r.Mo.get(n),!((a=r.Fo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Fo.set(i.targetId,a.filter((function(e){return!Yc(e,n)}))),void r.Mo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Bd(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Up(r.remoteStore,i.targetId),hy(r,i.targetId)})).catch(ad);case 9:e.next=14;break;case 11:return hy(r,i.targetId),e.next=14,Bd(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Xv.apply(this,arguments)}function $v(e,t,n){return Jv.apply(this,arguments)}function Jv(){return Jv=xe(Te().mark((function e(t,n,r){var i,a,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jy(t),e.prev=1,e.next=4,function(e,t){var n,r=vs(e),i=Os.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Xl());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,u=[],s=De(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=El(c,n.get(c.key));null!=l&&u.push(new Il(c.key,l,yc(l.value.mapValue),ml.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.An.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new Ul(Ds)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,gy(i,a.changes);case 9:return e.next=11,ev(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=wv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Jv.apply(this,arguments)}function Zv(e,t){return ey.apply(this,arguments)}function ey(){return ey=xe(Te().mark((function e(t,n){var r,i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vs(t),e.prev=1,e.next=4,Md(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(ps(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?ps(n.$o):e.removedDocuments.size>0&&(ps(n.$o),n.$o=!1))})),e.next=8,gy(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ad(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ey.apply(this,arguments)}function ty(e,t,n){var r=vs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Mo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=vs(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=De(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ro(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Ov(n)}(r.eventManager,t),i.length&&r.Oo.br(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ny(e,t,n){return ry.apply(this,arguments)}function ry(){return ry=xe(Te().mark((function e(t,n,r){var i,a,o,u,s,c;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=vs(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Ul(ec.comparator)).insert(o,gc.newNoDocument(o,Ps.min())),s=Xl().add(o),c=new Zl(Ps.min(),new Map,new Bl(Ds),u,s),e.next=9,Zv(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),yy(i),e.next=16;break;case 14:return e.next=16,Bd(i.localStore,n,!1).then((function(){return hy(i,n,r)})).catch(ad);case 16:case"end":return e.stop()}}),e)}))),ry.apply(this,arguments)}function iy(e,t){return ay.apply(this,arguments)}function ay(){return ay=xe(Te().mark((function e(t,n){var r,i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vs(t),i=n.batch.batchId,e.prev=1,e.next=4,Ld(r.localStore,n);case 4:return a=e.sent,fy(r,i,null),ly(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,gy(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ad(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ay.apply(this,arguments)}function oy(e,t,n){return uy.apply(this,arguments)}function uy(){return uy=xe(Te().mark((function e(t,n,r){var i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vs(t),e.prev=1,e.next=4,function(e,t){var n=vs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return ps(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,fy(i,n,r),ly(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,gy(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ad(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),uy.apply(this,arguments)}function sy(e,t){return cy.apply(this,arguments)}function cy(){return cy=xe(Te().mark((function e(t,n){var r,i,a,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zp((r=vs(t)).remoteStore)||cs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=vs(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=wv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),cy.apply(this,arguments)}function ly(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function fy(e,t,n){var r=vs(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function hy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=De(e.Fo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Mo.delete(a),n&&e.Oo.zo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Fo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||dy(e,t)}))}function dy(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(Up(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),yy(e))}function py(e,t,n){var r,i=De(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof jv?(e.qo.addReference(a.key,t),vy(e,a)):a instanceof Vv?(cs("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||dy(e,a.key)):ds()}}catch(o){i.e(o)}finally{i.f()}}function vy(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(cs("SyncEngine","New document in limbo: "+n),e.Lo.add(r),yy(e))}function yy(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new ec(js.fromString(t)),r=e.Qo.next();e.Uo.set(r,new zv(n)),e.Bo=e.Bo.insert(n,r),Mp(e.remoteStore,new Th(Gc(Vc(n.path)),r,2,Is.I))}}function gy(e,t,n){return my.apply(this,arguments)}function my(){return my=xe(Te().mark((function e(t,n,r){var i,a,o,u;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=vs(t),a=[],o=[],u=[],e.t0=i.Mo.isEmpty(),e.t0){e.next=9;break}return i.Mo.forEach((function(e,t){u.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Ad.$n(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Oo.br(a),e.next=9,function(){var e=xe(Te().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vs(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return hh.forEach(n,(function(t){return hh.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return hh.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),gh(e.t0)){e.next=10;break}throw e.t0;case 10:cs("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=De(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qn.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),my.apply(this,arguments)}function ky(e,t){return by.apply(this,arguments)}function by(){return by=xe(Te().mark((function e(t,n){var r,i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=vs(t)).currentUser.isEqual(n)){e.next=11;break}return cs("SyncEngine","User change. New user:",n.toKey()),e.next=5,Od(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new gs(ys.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,gy(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),by.apply(this,arguments)}function wy(e,t){var n=vs(e),r=n.Uo.get(t);if(r&&r.$o)return Xl().add(r.key);var i=Xl(),a=n.Fo.get(t);if(!a)return i;var o,u=De(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Mo.get(s);i=i.unionWith(c.view.bo)}}catch(l){u.e(l)}finally{u.f()}return i}function _y(e,t){return Ey.apply(this,arguments)}function Ey(){return Ey=xe(Te().mark((function e(t,n){var r,i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vs(t),e.next=3,zd(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&py(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function xy(e){return Sy.apply(this,arguments)}function Sy(){return Sy=xe(Te().mark((function e(t){var n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vs(t),e.abrupt("return",Hd(n.localStore).then((function(e){return gy(n,e)})));case 2:case"end":return e.stop()}}),e)}))),Sy.apply(this,arguments)}function Ty(e,t,n,r){return Iy.apply(this,arguments)}function Iy(){return Iy=xe(Te().mark((function e(t,n,r,i){var a,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vs(t),e.next=3,function(e,t){var n=vs(e),r=vs(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):hh.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,ev(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(fy(a,n,i||null),ly(a,n),function(e,t){vs(vs(e).An).ee(t)}(a.localStore,n)):ds();case 11:return e.next=13,gy(a,o);case 13:e.next=16;break;case 15:cs("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Iy.apply(this,arguments)}function Cy(e,t){return Ay.apply(this,arguments)}function Ay(){return Ay=xe(Te().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Uy(r=vs(t)),jy(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Dy(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,yv(r.remoteStore,!0);case 9:o=De(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Mp(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Fo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return hy(r,t),Bd(r.localStore,t,!0)})),Up(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Dy(r,c);case 21:return function(e){var t=vs(e);t.Uo.forEach((function(e,n){Up(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new Ul(ec.comparator)}(r),r.Wo=!1,e.next=25,yv(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Ay.apply(this,arguments)}function Dy(e,t,n){return Ny.apply(this,arguments)}function Ny(){return Ny=xe(Te().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,g;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=vs(t),a=[],o=[],u=De(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Fo.get(c))||0===f.length){e.next=34;break}return e.next=11,Vd(i.localStore,Gc(f[0]));case 11:l=e.sent,h=De(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Mo.get(p),e.next=20,_y(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Kd(i.localStore,c);case 36:return g=e.sent,e.next=39,Vd(i.localStore,g);case 39:return l=e.sent,e.next=42,Gv(i,Ry(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Oo.br(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Ny.apply(this,arguments)}function Ry(e){return jc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Oy(e){var t=vs(e);return vs(vs(t.localStore).persistence).Tn()}function Py(e,t,n,r){return Ly.apply(this,arguments)}function Ly(){return Ly=xe(Te().mark((function e(t,n,r,i){var a,o,u;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=vs(t)).Wo){e.next=5;break}cs("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Fo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Hd(a.localStore);case 11:return o=e.sent,u=Zl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,gy(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,Bd(a.localStore,n,!0);case 18:return hy(a,n,i),e.abrupt("break",21);case 20:ds();case 21:case"end":return e.stop()}}),e)}))),Ly.apply(this,arguments)}function Fy(e,t,n){return My.apply(this,arguments)}function My(){return My=xe(Te().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Uy(t)).Wo){e.next=45;break}a=De(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Fo.has(u)){e.next=10;break}return cs("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Kd(i.localStore,u);case 12:return s=e.sent,e.next=15,Vd(i.localStore,s);case 15:return c=e.sent,e.next=18,Gv(i,Ry(s),c.targetId,!1);case 18:Mp(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=De(r),e.prev=30,h=Te().mark((function e(){var t;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Fo.has(t),!e.t0){e.next=5;break}return e.next=5,Bd(i.localStore,t,!1).then((function(){Up(i.remoteStore,t),hy(i,t)})).catch(ad);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),My.apply(this,arguments)}function Uy(e){var t=vs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ny.bind(null,t),t.Oo.br=Nv.bind(null,t.eventManager),t.Oo.zo=Rv.bind(null,t.eventManager),t}function jy(e){var t=vs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oy.bind(null,t),t}function Vy(e,t,n){var r=vs(e);(function(){var e=xe(Te().mark((function e(t,n,r){var i,a,o,u,s;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=vs(e),r=vf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(Uv(i)),a=new Mv(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,gy(t,s.In,void 0);case 30:return e.next=32,function(e,t){var n=vs(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),fs("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var By=function(){function e(){Ie(this,e),this.synchronizeTabs=!1}return Ae(e,[{key:"initialize",value:function(){var e=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=Sp(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return Rd(this.persistence,new Dd,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new ap(up.ks,this.k)}},{key:"Jo",value:function(e){return new gp}},{key:"terminate",value:function(){var e=xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qy=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this)).tc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ae(n,[{key:"initialize",value:function(){var e=xe(Te().mark((function e(t){var r=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr(Pe(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,Wd(this.localStore);case 4:return e.next=6,this.tc.initialize(this,t);case 6:return e.next=8,jy(this.tc.syncEngine);case 8:return e.next=10,ev(this.tc.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return Rd(this.persistence,new Dd,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new cd(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=Td(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Wh.withCacheSize(this.cacheSizeBytes):Wh.DEFAULT;return new Ed(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ep(),xp(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new gp}}]),n}(By),zy=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,e,r,!1)).tc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ae(n,[{key:"initialize",value:function(){var e=xe(Te().mark((function e(t){var r,i=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr(Pe(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.tc.syncEngine,e.t0=this.sharedClientState instanceof yp,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:Ty.bind(null,r),gi:Py.bind(null,r),yi:Fy.bind(null,r),Tn:Oy.bind(null,r),_i:xy.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cy(i.tc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=Ep();if(!yp.Pt(t))throw new gs(ys.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Td(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(qy),Ky=function(){function e(){Ie(this,e)}return Ae(e,[{key:"initialize",value:function(){var e=xe(Te().mark((function e(t,n){var r=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ty(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ky.bind(null,this.syncEngine),e.next=12,yv(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Tv}},{key:"createDatastore",value:function(e){var t,n=Sp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new _p(t));return function(e,t,n,r){return new Dp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ty(o.syncEngine,e,0)},a=kp.Pt()?new kp:new mp,new Rp(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Kv(e,t,n,r,i,a);return o&&(u.Wo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=xe(Te().mark((function e(t){var n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vs(t),cs("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,Lp(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Hy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return xe(Te().mark((function r(){var i;return Te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Wy=function(){function e(t){Ie(this,e),this.observer=t,this.muted=!1}return Ae(e,[{key:"next",value:function(e){this.observer.next&&this.ec(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"nc",value:function(){this.muted=!0}},{key:"ec",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Gy=function(){function e(t,n){var r=this;Ie(this,e),this.sc=t,this.k=n,this.metadata=new ms,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Ae(e,[{key:"close",value:function(){return this.sc.cancel()}},{key:"getMetadata",value:function(){var e=xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rc",value:function(){var e=xe(Te().mark((function e(){var t,n,r,i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ic.decode(t),r=Number(n),isNaN(r)&&this.cc("length string (".concat(n,") is not valid number")),e.next=9,this.ac(r);case 9:return i=e.sent,e.abrupt("return",new Lv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oc",value:function(){var e=xe(Te().mark((function e(){var t,n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.uc()<0)){e.next=7;break}return e.next=3,this.hc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.uc())<0&&this.cc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ac",value:function(){var e=xe(Te().mark((function e(t){var n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.hc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.cc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ic.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cc",value:function(e){throw this.sc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"hc",value:function(){var e=xe(Te().mark((function e(){var t,n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qy=function(){function e(t){Ie(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ae(e,[{key:"lookup",value:function(){var e=xe(Te().mark((function e(t){var n,r=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new gs(ys.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=xe(Te().mark((function e(t,n){var r,i,a,o,u,s;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vs(t),i=_f(r.k)+"/documents",a={documents:n.map((function(e){return mf(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Tf(r.k,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());ps(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ol(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=xe(Te().mark((function e(){var t,n=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ec.fromPath(t);n.mutations.push(new Pl(r,n.precondition(r)))})),e.next=7,function(){var e=xe(Te().mark((function e(t,n){var r,i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vs(t),i=_f(r.k)+"/documents",a={writes:n.map((function(e){return If(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ds();t=Ps.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new gs(ys.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ml.updateTime(t):ml.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ps.min()))throw new gs(ys.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ml.updateTime(t)}return ml.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Yy=function(){function e(t,n,r,i){Ie(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.lc=5,this.ur=new Tp(this.asyncQueue,"transaction_retry")}return Ae(e,[{key:"run",value:function(){this.lc-=1,this.fc()}},{key:"fc",value:function(){var e=this;this.ur.Zi(xe(Te().mark((function t(){var n,r;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Qy(e.datastore),(r=e.dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wc(t)}))}))})).catch((function(t){e.wc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"dc",value:function(e){try{var t=this.updateFunction(e);return!$s(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wc",value:function(e){var t=this;this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget((function(){return t.fc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Fl(t)}return!1}}]),e}(),Xy=function(){function e(t,n,r,i){var a=this;Ie(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=as.UNAUTHENTICATED,this.clientId=As.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cs("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return cs("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ae(e,[{key:"getConfiguration",value:function(){var e=xe(Te().mark((function e(){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new gs(ys.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(xe(Te().mark((function n(){var r;return Te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=wv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function $y(e,t){return Jy.apply(this,arguments)}function Jy(){return Jy=xe(Te().mark((function e(t,n){var r,i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),cs("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Od(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Jy.apply(this,arguments)}function Zy(e,t){return eg.apply(this,arguments)}function eg(){return eg=xe(Te().mark((function e(t,n){var r,i;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,tg(t);case 3:return r=e.sent,cs("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return pv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return pv(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),eg.apply(this,arguments)}function tg(e){return ng.apply(this,arguments)}function ng(){return ng=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return cs("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,$y(t,new By);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),ng.apply(this,arguments)}function rg(e){return ig.apply(this,arguments)}function ig(){return ig=xe(Te().mark((function e(t){return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return cs("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Zy(t,new Ky);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),ig.apply(this,arguments)}function ag(e){return tg(e).then((function(e){return e.persistence}))}function og(e){return tg(e).then((function(e){return e.localStore}))}function ug(e){return rg(e).then((function(e){return e.remoteStore}))}function sg(e){return rg(e).then((function(e){return e.syncEngine}))}function cg(e){return lg.apply(this,arguments)}function lg(){return lg=xe(Te().mark((function e(t){var n,r;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rg(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Hv.bind(null,n.syncEngine),r.onUnlisten=Yv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),lg.apply(this,arguments)}function fg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ms;return e.asyncQueue.enqueueAndForget(xe(Te().mark((function i(){return Te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Wy({next:function(a){t.enqueueAndForget((function(){return Av(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new gs(ys.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new gs(ys.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Pv(Vc(n.path),a,{includeMetadataChanges:!0,wo:!0});return Iv(e,o)},i.next=3,cg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function hg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ms;return e.asyncQueue.enqueueAndForget(xe(Te().mark((function i(){return Te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Wy({next:function(n){t.enqueueAndForget((function(){return Av(e,o)})),n.fromCache&&"server"===r.source?i.reject(new gs(ys.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Pv(n,a,{includeMetadataChanges:!0,wo:!0});return Iv(e,o)},i.next=3,cg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var dg=Ae((function e(t,n,r,i,a,o,u,s){Ie(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),pg=function(){function e(t,n){Ie(this,e),this.projectId=t,this.database=n||"(default)"}return Ae(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),vg=new Map;function yg(e,t,n){if(!n)throw new gs(ys.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function gg(e,t,n,r){if(!0===t&&!0===r)throw new gs(ys.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function mg(e){if(!ec.isDocumentKey(e))throw new gs(ys.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function kg(e){if(ec.isDocumentKey(e))throw new gs(ys.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function bg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ds()}function wg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gs(ys.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=bg(e);throw new gs(ys.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function _g(e,t){if(t<=0)throw new gs(ys.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Eg=function(){function e(t){var n;if(Ie(this,e),void 0===t.host){if(void 0!==t.ssl)throw new gs(ys.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new gs(ys.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,gg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ae(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),xg=function(){function e(t,n,r){Ie(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eg({}),this._settingsFrozen=!1,t instanceof pg?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new gs(ys.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pg(e.options.projectId)}(t))}return Ae(e,[{key:"app",get:function(){if(!this._app)throw new gs(ys.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new gs(ys.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new bs;switch(e.type){case"gapi":var t=e.client;return ps(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new xs(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new gs(ys.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=vg.get(e);t&&(cs("ComponentProvider","Removing Datastore"),vg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Sg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=wg(e,xg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&fs("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=as.MOCK_USER;else{o=We(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new gs(ys.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new as(s)}e._authCredentials=new ws(new ks(o,u))}}var Tg=function(){function e(t,n,r){Ie(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ae(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Cg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Ig=function(){function e(t,n,r){Ie(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ae(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Cg=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this,e,r,Vc(i)))._path=i,a.type="collection",a}return Ae(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Tg(this.firestore,null,new ec(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Ig);function Ag(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=at(e),yg("collection","path",t),e instanceof xg){var a=js.fromString.apply(js,[t].concat(r));return kg(a),new Cg(e,null,a)}if(!(e instanceof Tg||e instanceof Cg))throw new gs(ys.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(js.fromString.apply(js,[t].concat(r)));return kg(o),new Cg(e.firestore,null,o)}function Dg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=at(e),1===arguments.length&&(t=As.A()),yg("doc","path",t),e instanceof xg){var a=js.fromString.apply(js,[t].concat(r));return mg(a),new Tg(e,null,new ec(a))}if(!(e instanceof Tg||e instanceof Cg))throw new gs(ys.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(js.fromString.apply(js,[t].concat(r)));return mg(o),new Tg(e.firestore,e instanceof Cg?e.converter:null,new ec(o))}function Ng(e,t){return e=at(e),t=at(t),(e instanceof Tg||e instanceof Cg)&&(t instanceof Tg||t instanceof Cg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Rg(e,t){return e=at(e),t=at(t),e instanceof Ig&&t instanceof Ig&&e.firestore===t.firestore&&Yc(e._query,t._query)&&e.converter===t.converter}var Og=function(){function e(){var t=this;Ie(this,e),this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new Tp(this,"async_queue_retry"),this.bc=function(){var e=xp();e&&cs("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=xp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.bc)}return Ae(e,[{key:"isShuttingDown",get:function(){return this.yc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pc(),this.vc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;var t=xp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pc(),this.yc)return new Promise((function(){}));var n=new ms;return this.vc((function(){return t.yc&&t.Ac?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.gc.push(e),t.Vc()}))}},{key:"Vc",value:function(){var e=xe(Te().mark((function e(){var t=this;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.gc.length){e.next=14;break}return e.prev=1,e.next=4,this.gc[0]();case 4:this.gc.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),gh(e.t0)){e.next=12;break}throw e.t0;case 12:cs("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.gc.length>0&&this.ur.Zi((function(){return t.Vc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(e){var t=this,n=this.mc.then((function(){return t.Ic=!0,e().catch((function(e){t.Ec=e,t.Ic=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ls("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ic=!1,e}))}));return this.mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);var i=bv.createAndSchedule(this,e,t,n,(function(e){return r.Sc(e)}));return this.Tc.push(i),i}},{key:"Pc",value:function(){this.Ec&&ds()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Dc",value:function(){var e=xe(Te().mark((function e(){var t;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mc,e.next=3,t;case 3:if(t!==this.mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(e){var t,n=De(this.Tc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Nc",value:function(e){var t=this;return this.Dc().then((function(){t.Tc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=De(t.Tc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Dc()}))}},{key:"kc",value:function(e){this.Rc.push(e)}},{key:"Sc",value:function(e){var t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}]),e}();function Pg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=De(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Lg=function(){function e(){Ie(this,e),this._progressObserver={},this._taskCompletionResolver=new ms,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ae(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Fg=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Og,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Ae(n,[{key:"_terminate",value:function(){return this._firestoreClient||Ug(this),this._firestoreClient.terminate()}}]),n}(xg);function Mg(e){return e._firestoreClient||Ug(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ug(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new dg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Xy(e._authCredentials,e._appCheckCredentials,e._queue,r)}function jg(e,t,n){var r=new ms;return e.asyncQueue.enqueue(xe(Te().mark((function i(){return Te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,$y(e,n);case 3:return i.next=5,Zy(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===ys.FAILED_PRECONDITION||e.code===ys.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Vg(e){return function(e){return e.asyncQueue.enqueue(xe(Te().mark((function t(){var n,r;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ag(e);case 2:return n=t.sent,t.next=5,ug(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=vs(e);return t.Gr.delete(0),Op(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Mg(e=wg(e,Fg)))}function Bg(e){return function(e){return e.asyncQueue.enqueue(xe(Te().mark((function t(){var n,r;return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ag(e);case 2:return n=t.sent,t.next=5,ug(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=xe(Te().mark((function e(t){var n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=vs(t)).Gr.add(0),e.next=4,Lp(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Mg(e=wg(e,Fg)))}function qg(e,t){var n=Mg(e=wg(e,Fg)),r=new Lg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Gy(e,t)}(function(e,t){if(e instanceof Uint8Array)return Hy(e,t);if(e instanceof ArrayBuffer)return Hy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Sp(t));e.asyncQueue.enqueueAndForget(xe(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Vy,t.next=3,sg(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function zg(e,t){return function(e,t){return e.asyncQueue.enqueue(xe(Te().mark((function n(){return Te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=vs(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,og(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Mg(e=wg(e,Fg)),t).then((function(t){return t?new Ig(e,null,t.query):null}))}function Kg(e){if(e._initialized||e._terminated)throw new gs(ys.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Hg=function(){function e(){Ie(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new gs(ys.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bs(n)}return Ae(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Wg=function(){function e(t){Ie(this,e),this._byteString=t}return Ae(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(zs.fromBase64String(t))}catch(t){throw new gs(ys.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(zs.fromUint8Array(t))}}]),e}(),Gg=Ae((function e(t){Ie(this,e),this._methodName=t})),Qg=function(){function e(t,n){if(Ie(this,e),!isFinite(t)||t<-90||t>90)throw new gs(ys.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new gs(ys.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ae(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ds(this._lat,e._lat)||Ds(this._long,e._long)}}]),e}(),Yg=/^__.*__$/,Xg=function(){function e(t,n,r){Ie(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ae(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Il(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}]),e}(),$g=function(){function e(t,n,r){Ie(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ae(e,[{key:"toMutation",value:function(e,t){return new Il(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Jg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ds()}}var Zg=function(){function e(t,n,r,i,a,o){Ie(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ae(e,[{key:"path",get:function(){return this.settings.path}},{key:"$c",get:function(){return this.settings.$c}},{key:"Oc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Mc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.Lc(e),r}},{key:"Bc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.xc(),r}},{key:"Uc",value:function(e){return this.Oc({path:void 0,Fc:!0})}},{key:"qc",value:function(e){return km(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}},{key:"Lc",value:function(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(Jg(this.$c)&&Yg.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}]),e}(),em=function(){function e(t,n,r){Ie(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||Sp(t)}return Ae(e,[{key:"Qc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Zg({$c:e,methodName:t,jc:n,path:Bs.emptyPath(),Fc:!1,Kc:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function tm(e){var t=e._freezeSettings(),n=Sp(e._databaseId);return new em(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Qc(a.merge||a.mergeFields?2:0,t,n,i);vm("Data must be an object, but it was:",o,r);var u,s,c=dm(r,o);if(a.merge)u=new qs(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=De(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=ym(t,d,n);if(!o.contains(p))throw new gs(ys.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));bm(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new qs(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Xg(new vc(c),u,s)}var rm=function(e){Oe(n,e);var t=Ue(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ae(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.$c)throw 1===e.$c?e.qc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.qc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Gg);function im(e,t,n){return new Zg({$c:3,jc:t.settings.jc,methodName:e._methodName,Fc:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var am=function(e){Oe(n,e);var t=Ue(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ae(n,[{key:"_toFieldTransform",value:function(e){return new yl(e.path,new sl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Gg),om=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,e)).Wc=r,i}return Ae(n,[{key:"_toFieldTransform",value:function(e){var t=im(this,e,!0),n=this.Wc.map((function(e){return hm(e,t)})),r=new cl(n);return new yl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Gg),um=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,e)).Wc=r,i}return Ae(n,[{key:"_toFieldTransform",value:function(e){var t=im(this,e,!0),n=this.Wc.map((function(e){return hm(e,t)})),r=new fl(n);return new yl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Gg),sm=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,e)).Gc=r,i}return Ae(n,[{key:"_toFieldTransform",value:function(e){var t=new dl(e.k,rl(e.k,this.Gc));return new yl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Gg);function cm(e,t,n,r){var i=e.Qc(1,t,n);vm("Data must be an object, but it was:",i,r);var a=[],o=vc.empty();Fs(r,(function(e,r){var u=mm(t,e,n);r=at(r);var s=i.Bc(u);if(r instanceof rm)a.push(u);else{var c=hm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new qs(a);return new $g(o,u,i.fieldTransforms)}function lm(e,t,n,r,i,a){var o=e.Qc(1,t,n),u=[ym(t,r,n)],s=[i];if(a.length%2!=0)throw new gs(ys.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(ym(t,a[c])),s.push(a[c+1]);for(var l=[],f=vc.empty(),h=u.length-1;h>=0;--h)if(!bm(l,u[h])){var d=u[h],p=s[h];p=at(p);var v=o.Bc(d);if(p instanceof rm)l.push(d);else{var y=hm(p,v);null!=y&&(l.push(d),f.set(d,y))}}var g=new qs(l);return new $g(f,g,o.fieldTransforms)}function fm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return hm(n,e.Qc(r?4:3,t))}function hm(e,t){if(pm(e=at(e)))return vm("Unsupported field value:",t,e),dm(e,t);if(e instanceof Gg)return function(e,t){if(!Jg(t.$c))throw t.qc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.qc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.$c)throw t.qc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=De(e);try{for(a.s();!(n=a.n()).done;){var o=hm(n.value,t.Uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=at(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rl(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Os.fromDate(e);return{timestampValue:hf(t.k,n)}}if(e instanceof Os){var r=new Os(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:hf(t.k,r)}}if(e instanceof Qg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Wg)return{bytesValue:df(t.k,e._byteString)};if(e instanceof Tg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.qc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:yf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.qc("Unsupported field value: ".concat(bg(e)))}(e,t)}function dm(e,t){var n={};return Ms(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fs(e,(function(e,r){var i=hm(r,t.Mc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function pm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Os||e instanceof Qg||e instanceof Wg||e instanceof Tg||e instanceof Gg)}function vm(e,t,n){if(!pm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=bg(n);throw"an object"===r?t.qc(e+" a custom object"):t.qc(e+" "+r)}}function ym(e,t,n){if((t=at(t))instanceof Hg)return t._internalPath;if("string"==typeof t)return mm(e,t);throw km("Field path arguments must be of type string or ",e,!1,void 0,n)}var gm=new RegExp("[~\\*/\\[\\]]");function mm(e,t,n){if(t.search(gm)>=0)throw km("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return je(Hg,ot(t.split(".")))._internalPath}catch(r){throw km("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function km(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new gs(ys.INVALID_ARGUMENT,u+e+s)}function bm(e,t){return e.some((function(e){return e.isEqual(t)}))}var wm=function(){function e(t,n,r,i,a){Ie(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ae(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Tg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new _m(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Em("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),_m=function(e){Oe(n,e);var t=Ue(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ae(n,[{key:"data",value:function(){return zr(Pe(n.prototype),"data",this).call(this)}}]),n}(wm);function Em(e,t){return"string"==typeof t?mm(e,t):t instanceof Hg?t._internalPath:t._delegate._internalPath}var xm=function(){function e(t,n){Ie(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ae(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Sm=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a,o,u){var s;return Ie(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ae(n,[{key:"exists",value:function(){return zr(Pe(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Tm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Em("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(wm),Tm=function(e){Oe(n,e);var t=Ue(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ae(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return zr(Pe(n.prototype),"data",this).call(this,e)}}]),n}(Sm),Im=function(){function e(t,n,r,i){Ie(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new xm(i.hasPendingWrites,i.fromCache),this.query=r}return Ae(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Tm(n._firestore,n._userDataWriter,r.key,r,new xm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gs(ys.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Tm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Tm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Cm(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Cm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ds()}}function Am(e,t){return e instanceof Sm&&t instanceof Sm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Im&&t instanceof Im&&e._firestore===t._firestore&&Rg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Dm(e){if(qc(e)&&0===e.explicitOrderBy.length)throw new gs(ys.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nm=Ae((function e(){Ie(this,e)}));function Rm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Om=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this)).zc=e,a.Hc=r,a.Jc=i,a.type="where",a}return Ae(n,[{key:"_apply",value:function(e){var t=tm(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new gs(ys.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Km(o,a);var s,c=[],l=De(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(zm(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=zm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Km(o,a),u=fm(n,"where",o,"in"===a||"not-in"===a);var h=Ec.create(i,a,u);return function(e,t){if(t.V()){var n=Kc(e);if(null!==n&&!n.isEqual(t.field))throw new gs(ys.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=zc(e);null!==r&&Hm(e,t.field,r)}var i=function(e,t){var n,r=De(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new gs(ys.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new gs(ys.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Ig(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Nm);var Pm=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this)).zc=e,i.Yc=r,i.type="orderBy",i}return Ae(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new gs(ys.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new gs(ys.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Pc(t,n);return function(e,t){if(null===zc(e)){var n=Kc(e);null!==n&&Hm(e,n,t.field)}}(e,r),r}(e._query,this.zc,this.Yc);return new Ig(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Uc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Nm);var Lm=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this)).type=e,a.Xc=r,a.Zc=i,a}return Ae(n,[{key:"_apply",value:function(e){return new Ig(e.firestore,e.converter,Qc(e._query,this.Xc,this.Zc))}}]),n}(Nm);var Fm=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this)).type=e,a.ta=r,a.ea=i,a}return Ae(n,[{key:"_apply",value:function(e){var t=qm(e,this.type,this.ta,this.ea);return new Ig(e.firestore,e.converter,function(e,t){return new Uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Nm);function Mm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fm("startAt",t,!0)}function Um(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fm("startAfter",t,!1)}var jm=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ie(this,n),(a=t.call(this)).type=e,a.ta=r,a.ea=i,a}return Ae(n,[{key:"_apply",value:function(e){var t=qm(e,this.type,this.ta,this.ea);return new Ig(e.firestore,e.converter,function(e,t){return new Uc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Nm);function Vm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jm("endBefore",t,!0)}function Bm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jm("endAt",t,!1)}function qm(e,t,n,r){if(n[0]=at(n[0]),n[0]instanceof wm)return function(e,t,n,r,i){if(!r)throw new gs(ys.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=De(Wc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(sc(t,r.key));else{var c=r.data.field(s.field);if(Qs(c))throw new gs(ys.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new gs(ys.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Rc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=tm(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new gs(ys.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new gs(ys.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Hc(e)&&-1!==c.indexOf("/"))throw new gs(ys.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(js.fromString(c));if(!ec.isDocumentKey(l))throw new gs(ys.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ec(l);u.push(sc(t,f))}else{var h=fm(n,r,c);u.push(h)}}return new Rc(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function zm(e,t,n){if("string"==typeof(n=at(n))){if(""===n)throw new gs(ys.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hc(t)&&-1!==n.indexOf("/"))throw new gs(ys.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(js.fromString(n));if(!ec.isDocumentKey(r))throw new gs(ys.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return sc(e,new ec(r))}if(n instanceof Tg)return sc(e,n._key);throw new gs(ys.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(bg(n),"."))}function Km(e,t){if(!Array.isArray(e)||0===e.length)throw new gs(ys.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new gs(ys.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Hm(e,t,n){if(!n.isEqual(t))throw new gs(ys.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Wm=function(){function e(){Ie(this,e)}return Ae(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ws(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ds()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Fs(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Qg(Ws(e.latitude),Ws(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ys(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Xs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Hs(e);return new Os(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=js.fromString(e);ps(qf(n));var r=new pg(n.get(1),n.get(3)),i=new ec(n.popFirst(5));return r.isEqual(t)||ls("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Gm(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Qm=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ie(this,n),(r=t.call(this)).firestore=e,r}return Ae(n,[{key:"convertBytes",value:function(e){return new Wg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tg(this.firestore,null,t)}}]),n}(Wm),Ym=function(){function e(t,n){Ie(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tm(t)}return Ae(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Xm(e,this._firestore),i=Gm(r.converter,t,n),a=nm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ml.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Xm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=at(t))||t instanceof Hg?lm(this._dataReader,"WriteBatch.update",i._key,t,n,o):cm(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ml.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Xm(e,this._firestore);return this._mutations=this._mutations.concat(new Ol(t._key,ml.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new gs(ys.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Xm(e,t){if((e=at(e)).firestore!==t)throw new gs(ys.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var $m=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ie(this,n),(r=t.call(this)).firestore=e,r}return Ae(n,[{key:"convertBytes",value:function(e){return new Wg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tg(this.firestore,null,t)}}]),n}(Wm);function Jm(e){e=wg(e,Tg);var t=wg(e.firestore,Fg),n=Mg(t),r=new $m(t);return function(e,t){var n=new ms;return e.asyncQueue.enqueueAndForget(xe(Te().mark((function r(){return Te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=xe(Te().mark((function e(t,n,r){var i,a;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=vs(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new gs(ys.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=wv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,og(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Sm(t,r,e._key,n,new xm(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Zm(e){e=wg(e,Ig);var t=wg(e.firestore,Fg),n=Mg(t),r=new $m(t);return function(e,t){var n=new ms;return e.asyncQueue.enqueueAndForget(xe(Te().mark((function r(){return Te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=xe(Te().mark((function e(t,n,r){var i,a,o,u,s;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zd(t,n,!0);case 3:i=e.sent,a=new Bv(n,i.zn),o=a.Po(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=wv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,og(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Im(t,r,e,n)}))}function ek(e,t,n){e=wg(e,Tg);var r=wg(e.firestore,Fg),i=Gm(e.converter,t,n);return ik(r,[nm(tm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ml.none())])}function tk(e,t,n){e=wg(e,Tg);for(var r=wg(e.firestore,Fg),i=tm(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return ik(r,[("string"==typeof(t=at(t))||t instanceof Hg?lm(i,"updateDoc",e._key,t,n,o):cm(i,"updateDoc",e._key,t)).toMutation(e._key,ml.exists(!0))])}function nk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=at(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Pg(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Pg(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Tg)l=wg(e.firestore,Fg),f=Vc(e._key.path),c={next:function(t){n[s]&&n[s](ak(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=wg(e,Ig);l=wg(p.firestore,Fg),f=p._query;var v=new $m(l);c={next:function(e){n[s]&&n[s](new Im(l,v,p,e))},error:n[s+1],complete:n[s+2]},Dm(e._query)}return function(e,t,n,r){var i=new Wy(r),a=new Pv(t,i,n);return e.asyncQueue.enqueueAndForget(xe(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Iv,t.next=3,cg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.nc(),e.asyncQueue.enqueueAndForget(xe(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Av,t.next=3,cg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Mg(l),f,h,c)}function rk(e,t){return function(e,t){var n=new Wy(t);return e.asyncQueue.enqueueAndForget(xe(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){vs(e).io.add(t),t.next()},t.next=3,cg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.nc(),e.asyncQueue.enqueueAndForget(xe(Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){vs(e).io.delete(t)},t.next=3,cg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Mg(e=wg(e,Fg)),Pg(t)?t:{next:t})}function ik(e,t){return function(e,t){var n=new ms;return e.asyncQueue.enqueueAndForget(xe(Te().mark((function r(){return Te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=$v,r.next=3,sg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Mg(e),t)}function ak(e,t,n){var r=n.docs.get(t._key),i=new $m(e);return new Sm(e,i,t._key,r,new xm(n.hasPendingWrites,n.fromCache),t.converter)}var ok=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ae(n,[{key:"get",value:function(e){var t=this,r=Xm(e,this._firestore),i=new $m(this._firestore);return zr(Pe(n.prototype),"get",this).call(this,e).then((function(e){return new Sm(t._firestore,i,r._key,e._document,new xm(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ie(this,e),this._firestore=t,this._transaction=n,this._dataReader=tm(t)}return Ae(e,[{key:"get",value:function(e){var t=this,n=Xm(e,this._firestore),r=new Qm(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ds();var i=e[0];if(i.isFoundDocument())return new wm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new wm(t._firestore,r,n._key,null,n.converter);throw ds()}))}},{key:"set",value:function(e,t,n){var r=Xm(e,this._firestore),i=Gm(r.converter,t,n),a=nm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Xm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=at(t))||t instanceof Hg?lm(this._dataReader,"Transaction.update",i._key,t,n,o):cm(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Xm(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function uk(e,t){return function(e,t){var n=new ms;return e.asyncQueue.enqueueAndForget(xe(Te().mark((function r(){var i;return Te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return rg(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Yy(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Mg(e=wg(e,Fg)),(function(n){return t(new ok(e,n))}))}function sk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new om("arrayUnion",t)}function ck(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new um("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){os=e}(Vt),Nt(new ut("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Fg(i,new _s(e.getProvider("auth-internal")),new Ts(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Wt(is,"3.4.4",e),Wt(is,"3.4.4","esm2017")}();function lk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new gs("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function fk(){if("undefined"===typeof Uint8Array)throw new gs("unimplemented","Uint8Arrays are not available in this environment.")}function hk(){if("undefined"==typeof atob)throw new gs("unimplemented","Blobs are unavailable in Firestore in this environment.")}var dk=function(){function e(t){Ie(this,e),this._delegate=t}return Ae(e,[{key:"toBase64",value:function(){return hk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return fk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return hk(),new e(Wg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return fk(),new e(Wg.fromUint8Array(t))}}]),e}();function pk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=De(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var vk=function(){function e(){Ie(this,e)}return Ae(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Kg(e=wg(e,Fg));var n=Mg(e),r=e._freezeSettings(),i=new Ky;return jg(n,i,new qy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Kg(e=wg(e,Fg));var t=Mg(e),n=e._freezeSettings(),r=new Ky;return jg(t,r,new zy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new gs(ys.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ms;return e._queue.enqueueAndForgetEvenWhileRestricted(xe(Te().mark((function n(){return Te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=xe(Te().mark((function e(t){var n;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ph.Pt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ph.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Td(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),yk=function(){function e(t,n,r){var i=this;Ie(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof pg||(this._appCompat=t)}return Ae(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||fs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Sg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Vg(this._delegate)}},{key:"disableNetwork",value:function(){return Bg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&gg("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ms;return e.asyncQueue.enqueueAndForget(xe(Te().mark((function n(){return Te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=sy,n.next=3,sg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Mg(e=wg(e,Fg)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return rk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new gs("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Dk(this,Ag(this._delegate,e))}catch(t){throw _k(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new wk(this,Dg(this._delegate,e))}catch(t){throw _k(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Ik(this,function(e,t){if(e=wg(e,xg),yg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new gs(ys.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ig(e,null,function(e){return new Uc(js.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw _k(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return uk(this._delegate,(function(n){return e(new mk(t,n))}))}},{key:"batch",value:function(){var e=this;return Mg(this._delegate),new kk(new Ym(this._delegate,(function(t){return ik(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return qg(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return zg(this._delegate,e).then((function(e){return e?new Ik(t,e):null}))}}]),e}(),gk=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ie(this,n),(r=t.call(this)).firestore=e,r}return Ae(n,[{key:"convertBytes",value:function(e){return new dk(new Wg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return wk.forKey(t,this.firestore,null)}}]),n}(Wm);var mk=function(){function e(t,n){Ie(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new gk(t)}return Ae(e,[{key:"get",value:function(e){var t=this,n=Nk(e);return this._delegate.get(n).then((function(e){return new Sk(t._firestore,new Sm(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Nk(e);return n?(lk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Nk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Nk(e);return this._delegate.delete(t),this}}]),e}(),kk=function(){function e(t){Ie(this,e),this._delegate=t}return Ae(e,[{key:"set",value:function(e,t,n){var r=Nk(e);return n?(lk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Nk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Nk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),bk=function(){function e(t,n,r){Ie(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ae(e,[{key:"fromFirestore",value:function(e,t){var n=new Tm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Tk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new gk(t),n),i.set(n,a)),a}}]),e}();bk.INSTANCES=new WeakMap;var wk=function(){function e(t,n){Ie(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gk(t)}return Ae(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Dk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Dk(this.firestore,Ag(this._delegate,e))}catch(t){throw _k(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=at(e))instanceof Tg&&Ng(this._delegate,e)}},{key:"set",value:function(e,t){t=lk("DocumentReference.set",t);try{return t?ek(this._delegate,e,t):ek(this._delegate,e)}catch(n){throw _k(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?tk(this._delegate,e):tk.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw _k(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return ik(wg(e.firestore,Fg),[new Ol(e._key,ml.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ek(n),a=xk(n,(function(t){return new Sk(e.firestore,new Sm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return nk(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Jm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=wg(e,Tg);var t=wg(e.firestore,Fg);return fg(Mg(t),e._key,{source:"server"}).then((function(n){return ak(t,e,n)}))}(this._delegate):function(e){e=wg(e,Tg);var t=wg(e.firestore,Fg);return fg(Mg(t),e._key).then((function(n){return ak(t,e,n)}))}(this._delegate),t.then((function(e){return new Sk(n.firestore,new Sm(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(bk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new gs("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Tg(n._delegate,r,new ec(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Tg(n._delegate,r,t))}}]),e}();function _k(e,t,n){return e.message=e.message.replace(t,n),e}function Ek(e){var t,n=De(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!pk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function xk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=pk(e[0])?e[0]:pk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Sk=function(){function e(t,n){Ie(this,e),this._firestore=t,this._delegate=n}return Ae(e,[{key:"ref",get:function(){return new wk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Am(this._delegate,e._delegate)}}]),e}(),Tk=function(e){Oe(n,e);var t=Ue(n);function n(){return Ie(this,n),t.apply(this,arguments)}return Ae(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ds()}(void 0!==t),t}}]),n}(Sk),Ik=function(){function e(t,n){Ie(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gk(t)}return Ae(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Rm(this._delegate,function(e,t,n){var r=t,i=Em("where",e);return new Om(i,r,n)}(t,n,r)))}catch(i){throw _k(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Rm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Em("orderBy",e);return new Pm(n,t)}(t,n)))}catch(r){throw _k(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Rm(this._delegate,function(e){return _g("limit",e),new Lm("limit",e,"F")}(t)))}catch(n){throw _k(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Rm(this._delegate,function(e){return _g("limitToLast",e),new Lm("limitToLast",e,"L")}(t)))}catch(n){throw _k(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Rm(this._delegate,Mm.apply(void 0,arguments)))}catch(t){throw _k(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Rm(this._delegate,Um.apply(void 0,arguments)))}catch(t){throw _k(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Rm(this._delegate,Vm.apply(void 0,arguments)))}catch(t){throw _k(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Rm(this._delegate,Bm.apply(void 0,arguments)))}catch(t){throw _k(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Rg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Zm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=wg(e,Ig);var t=wg(e.firestore,Fg),n=Mg(t),r=new $m(t);return hg(n,e._query,{source:"server"}).then((function(n){return new Im(t,r,e,n)}))}(this._delegate):function(e){e=wg(e,Ig);var t=wg(e.firestore,Fg),n=Mg(t),r=new $m(t);return Dm(e._query),hg(n,e._query).then((function(n){return new Im(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Ak(n.firestore,new Im(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ek(n),a=xk(n,(function(t){return new Ak(e.firestore,new Im(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return nk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(bk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Ck=function(){function e(t,n){Ie(this,e),this._firestore=t,this._delegate=n}return Ae(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Tk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Ak=function(){function e(t,n){Ie(this,e),this._firestore=t,this._delegate=n}return Ae(e,[{key:"query",get:function(){return new Ik(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Tk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Ck(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Tk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Am(this._delegate,e._delegate)}}]),e}(),Dk=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ie(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ae(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new wk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new wk(this.firestore,void 0===e?Dg(this._delegate):Dg(this._delegate,e))}catch(t){throw _k(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=wg(e.firestore,Fg),r=Dg(e),i=Gm(e.converter,t);return ik(n,[nm(tm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ml.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new wk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Ng(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(bk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Ik);function Nk(e){return wg(e,Tg)}var Rk,Ok=function(){function e(){Ie(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=je(Hg,n)}return Ae(e,[{key:"isEqual",value:function(e){return(e=at(e))instanceof Hg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Bs.keyField().canonicalString())}}]),e}(),Pk=function(){function e(t){Ie(this,e),this._delegate=t}return Ae(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new am("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new rm("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=sk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=ck.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new sm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Lk={Firestore:yk,GeoPoint:Qg,Timestamp:Os,Blob:dk,Transaction:mk,WriteBatch:kk,DocumentReference:wk,DocumentSnapshot:Sk,Query:Ik,QueryDocumentSnapshot:Tk,QuerySnapshot:Ak,CollectionReference:Dk,FieldPath:Ok,FieldValue:Pk,setLogLevel:function(e){!function(e){us.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ut("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Lk)))})(Rk=tn,(function(e,t){return new yk(e,t,new vk)})),Rk.registerVersion("@firebase/firestore-compat","0.1.13");var Fk=tn.initializeApp({projectId:"medicall-3dced",appId:"1:663908802543:web:f4a13a428f6066156a601a",databaseURL:"https://medicall-3dced.firebaseio.com",storageBucket:"medicall-3dced.appspot.com",locationId:"us-central",apiKey:"AIzaSyBJ1p9hEKtKjQ1kzGm5D130wkTSCHCL7tc",authDomain:"medicall-3dced.firebaseapp.com",messagingSenderId:"663908802543",measurementId:"G-6ESGVFRY9W"});function Mk(){var e=function(){var e=(0,t.useContext)(v),n=e.setFile,r=e.setIsLoading,i=e.setIsUploaded,a=function(){var e=xe(Te().mark((function e(t){var a,o,u,s;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,o=Fk.storage().ref(),u=o.child(a.name),e.next=5,u.put(a);case 5:return e.next=7,u.getDownloadURL();case 7:s=e.sent,n(s),r(!1),i(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return[a]}(),n=f(e,1)[0],r=(0,t.useContext)(v),i=r.file,a=r.setIsLoading,o=r.isUploaded,u=(0,t.useCallback)((function(e){e&&e.map((function(e){return a(!0),n(e)}))}),[n,a]),c=we({onDrop:u}),l=c.getRootProps,d=c.getInputProps;c.isDragActive;return(0,h.jsxs)("div",s(s({className:o?"".concat(g," ").concat(m):"".concat(g)},l()),{},{children:[(0,h.jsx)("input",s({},d())),o?(0,h.jsx)("img",{src:i,alt:"FileStorage"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("img",{id:k,src:y,alt:"background"}),(0,h.jsx)("p",{children:"Drag & Drop your image here"})]})]}))}var Uk="button_button__jD3ZH",jk="button_container__E3eF6",Vk="button_container2__MhbUI",Bk="button_p__ccevO",qk="button_none__IYfrL",zk=function(){var e=f((0,t.useState)(""),2),n=e[0],r=e[1],i=(0,t.useContext)(v),a=i.isUploaded,o=i.file,u=(0,t.useRef)(null),s=(0,t.useRef)(null);return(0,h.jsx)(h.Fragment,{children:a?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:jk,children:[(0,h.jsx)("input",{readOnly:!0,ref:u,value:o}),(0,h.jsx)("button",{onClick:function(e){console.log(u),u.current.select(),document.execCommand("copy"),e.target.focus(),r("Copied!")},children:"Copy Link"})]}),(0,h.jsx)("p",{className:Bk,children:n})]}):(0,h.jsxs)("div",{className:Vk,children:[(0,h.jsx)("p",{children:"Or"}),(0,h.jsx)("button",{onClick:function(){s.current.click()},type:"button",className:Uk,children:"Choose file"}),(0,h.jsx)("input",{ref:s,type:"file",className:qk})]})})},Kk="title_container__fAr2g",Hk=n(849),Wk=function(){var e=(0,t.useContext)(v).isUploaded;return(0,h.jsx)(h.Fragment,{children:e?(0,h.jsxs)("div",{className:Kk,children:[(0,h.jsx)("img",{src:Hk,alt:"Checked"}),(0,h.jsx)("h2",{children:"Uploaded Successfully!"})]}):(0,h.jsxs)("div",{className:Kk,children:[(0,h.jsx)("h2",{children:"Upload your image"}),(0,h.jsx)("p",{children:"File should be Jpeg, Png,..."})]})})},Gk="loading_Uploaded__RKJBB",Qk="loading_bar__MVlu7",Yk="loading_Item__bar__+uKEO",Xk=function(){return(0,h.jsxs)("div",{className:Gk,children:[(0,h.jsx)("h2",{children:"Uploading..."}),(0,h.jsx)("div",{className:Qk,children:(0,h.jsx)("div",{className:Yk})})]})},$k=function(){var e=(0,t.useContext)(v).isLoading;return(0,h.jsx)("div",{className:i,children:e?(0,h.jsx)(Xk,{}):(0,h.jsxs)("div",{className:a,children:[(0,h.jsx)(Wk,{}),(0,h.jsx)(Mk,{}),(0,h.jsx)(zk,{})]})})};r.render((0,h.jsx)(t.StrictMode,{children:(0,h.jsx)(p,{children:(0,h.jsx)($k,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.067f6924.js.map